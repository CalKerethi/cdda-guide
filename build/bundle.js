var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function m(){return d("")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function _(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let M;function v(t){M=t}function w(t){(function(){if(!M)throw new Error("Function called outside component initialization");return M})().$$.on_mount.push(t)}const I=[],O=[],x=[],E=[],C=Promise.resolve();let $=!1;function A(t){x.push(t)}let S=!1;const k=new Set;function L(){if(!S){S=!0;do{for(let t=0;t<I.length;t+=1){const e=I[t];v(e),T(e.$$)}for(v(null),I.length=0;O.length;)O.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];k.has(e)||(k.add(e),e())}x.length=0}while(I.length);for(;E.length;)E.pop()();$=!1,S=!1,k.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const R=new Set;let N;function B(){N={r:0,c:[],p:N}}function D(){N.r||r(N.c),N=N.p}function P(t,e){t&&t.i&&(R.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(R.has(t))return;R.add(t),N.c.push((()=>{R.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const j="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function H(t,e){F(t,1,1,(()=>{e.delete(t.key)}))}function G(t){t&&t.c()}function W(t,n,i,s){const{fragment:c,on_mount:l,on_destroy:a,after_update:u}=t.$$;c&&c.m(n,i),s||A((()=>{const n=l.map(e).filter(o);a?a.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(A)}function U(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(I.push(t),$||($=!0,C.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(e,o,i,s,c,l,u=[-1]){const h=M;v(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&q(e,t)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();o.intro&&P(e.$$.fragment),W(e,o.target,o.anchor,o.customElement),L()}v(h)}class Y{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const K=[];function z(e,n=t){let r;const o=[];function s(t){if(i(e,t)&&(e=t,r)){const t=!K.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),K.push(n,e)}if(t){for(let t=0;t<K.length;t+=2)K[t][0](K[t+1]);K.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,c=t){const l=[i,c];return o.push(l),1===o.length&&(r=n(s)||t),i(e),()=>{const t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const J=new Map([["AMMO","item"],["GUN","item"],["ARMOR","item"],["PET_ARMOR","item"],["TOOL","item"],["TOOLMOD","item"],["TOOL_ARMOR","item"],["BOOK","item"],["COMESTIBLE","item"],["ENGINE","item"],["WHEEL","item"],["GUNMOD","item"],["MAGAZINE","item"],["BATTERY","item"],["GENERIC","item"],["BIONIC_ITEM","item"],["MONSTER","monster"]]),Q=t=>{var e;return null!==(e=J.get(t))&&void 0!==e?e:t},Z=t=>{var e,n;return(null==t?void 0:t.name)?"string"==typeof t.name?t.name:null!==(e=t.name.str_sp)&&void 0!==e?e:t.name.str:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract},X=t=>{var e,n,r;return(null==t?void 0:t.name)?"string"==typeof t.name?t.name:null!==(n=null!==(e=t.name.str_sp)&&void 0!==e?e:t.name.str_pl)&&void 0!==n?n:t.name.str+"s":null!==(r=null==t?void 0:t.id)&&void 0!==r?r:null==t?void 0:t.abstract};class tt{constructor(t){this._byType=new Map,this._byTypeById=new Map,this._abstractsByType=new Map,this._toolReplacements=new Map,this._craftingPseudoItems=new Map,this._raw=t;for(const e of t){if(!Object.hasOwnProperty.call(e,"type"))continue;const t=Q(e.type);this._byType.has(t)||this._byType.set(t,[]),this._byType.get(t).push(e),Object.hasOwnProperty.call(e,"id")&&(this._byTypeById.has(t)||this._byTypeById.set(t,new Map),this._byTypeById.get(t).set(e.id,e)),Object.hasOwnProperty.call(e,"abstract")&&(this._abstractsByType.has(t)||this._abstractsByType.set(t,new Map),this._abstractsByType.get(t).set(e.abstract,e)),"TOOL"===e.type&&Object.hasOwnProperty.call(e,"sub")&&(this._toolReplacements.has(e.sub)||this._toolReplacements.set(e.sub,[]),this._toolReplacements.get(e.sub).push(e.id)),Object.hasOwnProperty.call(e,"crafting_pseudo_item")&&this._craftingPseudoItems.set(e.crafting_pseudo_item,e.id)}}byId(t,e){var n;if(!e)throw new Error("fix");const r=null===(n=this._byTypeById.get(t))||void 0===n?void 0:n.get(e);if(r)return this._flatten(r)}byType(t){return this._byType.get(t)}replacementTools(t){var e;return null!==(e=this._toolReplacements.get(t))&&void 0!==e?e:[]}craftingPseudoItem(t){return this._craftingPseudoItems.get(t)}all(){return this._raw}_flatten(t){var e,n,r,o,i,s;const c="copy-from"in t?null!==(n=null===(e=this._byTypeById.get(Q(t.type)))||void 0===e?void 0:e.get(t["copy-from"]))&&void 0!==n?n:null===(r=this._abstractsByType.get(Q(t.type)))||void 0===r?void 0:r.get(t["copy-from"]):null;if("copy-from"in t&&!c&&console.error(`Missing parent in ${null!==(o=t.id)&&void 0!==o?o:t.abstract}`),!c)return t;const l=Object.assign(Object.assign({},this._flatten(c)),t);for(const t of Object.keys(null!==(i=l.relative)&&void 0!==i?i:{}))"number"==typeof l.relative[t]&&(l[t]+=l.relative[t]);delete l.relative;for(const t of Object.keys(null!==(s=l.proportional)&&void 0!==s?s:{}))"number"==typeof l.proportional[t]&&("attack_cost"!==t||t in l||(l[t]=100),l[t]*=l.proportional[t],l[t]=0|l[t]);return delete l.proportional,l}}const et=(async()=>{const t=await fetch("https://raw.githubusercontent.com/nornagon/cdda-data/main/latest-build.json");if(!t.ok)throw new Error(`Error ${t.status} (${t.statusText}) fetching data`);const{latest_build:e}=await t.json(),n=await fetch(`https://raw.githubusercontent.com/nornagon/cdda-data/main/data/${e}/all.json`);if(!n.ok)throw new Error(`Error ${n.status} (${n.statusText}) fetching data`);const r=await n.json();return new tt(r)})(),nt={subscribe:z(null,(function(t){et.then(t)})).subscribe};function rt(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function ot(t,e,n){const r=t.slice();return r[8]=e[n],r[7]=n,r}function it(t,e,n){const r=t.slice();return r[10]=e[n],r}function st(e){let n,r,o,i=e[10].name+"";return{c(){n=h("li"),r=h("a"),o=d(i),p(r,"href","#/material/"+e[10].id)},m(t,e){l(t,n,e),c(n,r),c(r,o)},p:t,d(t){t&&a(n)}}}function ct(t){let e,n,r,o=t[0].special_attacks,i=[];for(let e=0;e<o.length;e+=1)i[e]=lt(ot(t,o,e));return{c(){e=h("dt"),e.textContent="Special attacks:",n=h("dd"),r=h("ul");for(let t=0;t<i.length;t+=1)i[t].c();p(r,"class","no-bullets")},m(t,o){l(t,e,o),l(t,n,o),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(r,null)},p(t,e){if(1&e){let n;for(o=t[0].special_attacks,n=0;n<o.length;n+=1){const s=ot(t,o,n);i[n]?i[n].p(s,e):(i[n]=lt(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&a(e),t&&a(n),u(i,t)}}}function lt(t){let e,n,r=bt(t[8])+"";return{c(){e=h("li"),n=d(r)},m(t,r){l(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=bt(t[8])+"")&&y(n,r)},d(t){t&&a(e)}}}function at(t){let e,n,r,o=t[0].anger_triggers.join(", ")+"";return{c(){e=h("dt"),e.textContent="Anger triggers",n=h("dd"),r=d(o)},m(t,o){l(t,e,o),l(t,n,o),c(n,r)},p(t,e){1&e&&o!==(o=t[0].anger_triggers.join(", ")+"")&&y(r,o)},d(t){t&&a(e),t&&a(n)}}}function ut(t){let e,n,r,o=t[0].placate_triggers.join(", ")+"";return{c(){e=h("dt"),e.textContent="Placate triggers",n=h("dd"),r=d(o)},m(t,o){l(t,e,o),l(t,n,o),c(n,r)},p(t,e){1&e&&o!==(o=t[0].placate_triggers.join(", ")+"")&&y(r,o)},d(t){t&&a(e),t&&a(n)}}}function ht(t){let e;return{c(){e=d(", ")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function dt(t){let e,n,r,o,i=t[5]+"",s=t[7]<t[0].flags.length-1&&ht();return{c(){e=h("abbr"),n=d(i),s&&s.c(),o=m(),p(e,"title",r=t[1][t[5]])},m(t,r){l(t,e,r),c(e,n),s&&s.m(t,r),l(t,o,r)},p(t,c){1&c&&i!==(i=t[5]+"")&&y(n,i),1&c&&r!==(r=t[1][t[5]])&&p(e,"title",r),t[7]<t[0].flags.length-1?s||(s=ht(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(t){t&&a(e),s&&s.d(t),t&&a(o)}}}function ft(e){let n,r,o,i,s,g,b,M,v,w,I,O,x,E,C,$,A,S,k,L,T,R,N,B,D,P,F,j,H,G,W,U,q,V,Y,K,z,J,Q,X,tt,et,nt,ot,lt,ht,ft,bt,_t,Mt,vt,wt,It,Ot,xt,Et,Ct,$t,At,St,kt,Lt,Tt,Rt,Nt,Bt,Dt,Pt,Ft,jt,Ht,Gt,Wt,Ut,qt,Vt,Yt,Kt,zt,Jt,Qt,Zt,Xt,te,ee,ne,re,oe,ie,se,ce,le,ae,ue,he,de,fe,me,ge,pe,ye,be,_e,Me,ve=e[0].symbol+"",we=Z(e[0])+"",Ie=e[0].description+"",Oe=mt(e[0])+"",xe=gt(mt(e[0]))+"",Ee=e[0].bodytype+"",Ce=(e[0].species??[]).join(", ")+"",$e=e[0].volume+"",Ae=e[0].weight+"",Se=e[0].speed+"",ke=(e[0].melee_skill??0)+"",Le=yt(e[0])+"",Te=e[0].hp+"",Re=(e[0].dodge??0)+"",Ne=(e[0].armor_bash??0)+"",Be=(e[0].armor_cut??0)+"",De=(e[0].armor_stab??Math.floor(.8*(e[0].armor_cut??0)))+"",Pe=(e[0].armor_bullet??0)+"",Fe=(e[0].armor_acid??Math.floor(.5*(e[0].armor_cut??0)))+"",je=(e[0].armor_fire??0)+"",He=e[0].aggression+"",Ge=e[0].morale+"",We=e[0].default_faction+"",Ue=(e[0].death_function??[]).join(", ")+"",qe=e[2],Ve=[];for(let t=0;t<qe.length;t+=1)Ve[t]=st(it(e,qe,t));let Ye=e[0].special_attacks&&ct(e),Ke=e[0].anger_triggers&&at(e),ze=e[0].placate_triggers&&ut(e),Je=e[0].flags??[],Qe=[];for(let t=0;t<Je.length;t+=1)Qe[t]=dt(rt(e,Je,t));return{c(){n=h("h1"),r=h("span"),o=d(ve),s=f(),g=d(we),b=f(),M=h("section"),v=h("p"),w=d(Ie),I=f(),O=h("p"),x=d("Difficulty: "),E=d(Oe),C=f(),$=h("span"),A=d("("),S=d(xe),k=d(")"),T=f(),R=h("section"),N=h("h1"),N.textContent="Body",B=f(),D=h("dl"),P=h("dt"),P.textContent="Body type",F=h("dd"),j=d(Ee),H=h("dt"),H.textContent="Species",G=h("dd"),W=d(Ce),U=h("dt"),U.textContent="Volume",q=h("dd"),V=d($e),Y=h("dt"),Y.textContent="Weight",K=h("dd"),z=d(Ae),J=h("dt"),J.textContent="Material",Q=h("dd"),X=h("ul");for(let t=0;t<Ve.length;t+=1)Ve[t].c();tt=f(),et=h("section"),nt=h("h1"),nt.textContent="Combat",ot=f(),lt=h("div"),ht=h("dl"),ft=h("dt"),ft.textContent="Speed",bt=h("dd"),_t=d(Se),Mt=h("dt"),Mt.textContent="Melee skill",vt=h("dd"),wt=d(ke),It=h("dt"),It.textContent="Damage",Ot=h("dd"),xt=d(Le),Ye&&Ye.c(),Et=f(),Ct=h("dl"),$t=h("dt"),$t.textContent="HP",At=h("dd"),St=d(Te),kt=h("dt"),kt.textContent="Dodge",Lt=h("dd"),Tt=d(Re),Rt=h("dt"),Rt.textContent="Armor",Nt=h("dd"),Bt=h("dl"),Dt=h("dt"),Dt.textContent="Bash",Pt=h("dd"),Ft=d(Ne),jt=h("dt"),jt.textContent="Cut",Ht=h("dd"),Gt=d(Be),Wt=h("dt"),Wt.textContent="Stab",Ut=h("dd"),qt=d(De),Vt=h("dt"),Vt.textContent="Bullet",Yt=h("dd"),Kt=d(Pe),zt=h("dt"),zt.textContent="Acid",Jt=h("dd"),Qt=d(Fe),Zt=h("dt"),Zt.textContent="Fire",Xt=h("dd"),te=d(je),ee=f(),ne=h("section"),re=h("h1"),re.textContent="Behavior",oe=f(),ie=h("dl"),se=h("dt"),se.textContent="Aggression",ce=h("dd"),le=d(He),ae=h("dt"),ae.textContent="Morale",ue=h("dd"),he=d(Ge),de=h("dt"),de.textContent="Default faction",fe=h("dd"),me=d(We),Ke&&Ke.c(),ge=m(),ze&&ze.c(),pe=h("dt"),pe.textContent="Flags",ye=h("dd");for(let t=0;t<Qe.length;t+=1)Qe[t].c();be=h("dt"),be.textContent="On death",_e=h("dd"),Me=d(Ue),_(r,"font-family","monospace"),p(r,"class",i="c_"+e[0].color),p($,"class",L="c_"+pt(mt(e[0]))+" fg_only"),p(X,"class","comma-separated"),_(ht,"flex","1"),_(Ct,"flex","1"),_(lt,"display","flex"),_(lt,"flex-direction","row"),_(lt,"align-items","start")},m(t,e){l(t,n,e),c(n,r),c(r,o),c(n,s),c(n,g),l(t,b,e),l(t,M,e),c(M,v),c(v,w),c(M,I),c(M,O),c(O,x),c(O,E),c(O,C),c(O,$),c($,A),c($,S),c($,k),l(t,T,e),l(t,R,e),c(R,N),c(R,B),c(R,D),c(D,P),c(D,F),c(F,j),c(D,H),c(D,G),c(G,W),c(D,U),c(D,q),c(q,V),c(D,Y),c(D,K),c(K,z),c(D,J),c(D,Q),c(Q,X);for(let t=0;t<Ve.length;t+=1)Ve[t].m(X,null);l(t,tt,e),l(t,et,e),c(et,nt),c(et,ot),c(et,lt),c(lt,ht),c(ht,ft),c(ht,bt),c(bt,_t),c(ht,Mt),c(ht,vt),c(vt,wt),c(ht,It),c(ht,Ot),c(Ot,xt),Ye&&Ye.m(ht,null),c(lt,Et),c(lt,Ct),c(Ct,$t),c(Ct,At),c(At,St),c(Ct,kt),c(Ct,Lt),c(Lt,Tt),c(Ct,Rt),c(Ct,Nt),c(Nt,Bt),c(Bt,Dt),c(Bt,Pt),c(Pt,Ft),c(Bt,jt),c(Bt,Ht),c(Ht,Gt),c(Bt,Wt),c(Bt,Ut),c(Ut,qt),c(Bt,Vt),c(Bt,Yt),c(Yt,Kt),c(Bt,zt),c(Bt,Jt),c(Jt,Qt),c(Bt,Zt),c(Bt,Xt),c(Xt,te),l(t,ee,e),l(t,ne,e),c(ne,re),c(ne,oe),c(ne,ie),c(ie,se),c(ie,ce),c(ce,le),c(ie,ae),c(ie,ue),c(ue,he),c(ie,de),c(ie,fe),c(fe,me),Ke&&Ke.m(ie,null),c(ie,ge),ze&&ze.m(ie,null),c(ie,pe),c(ie,ye);for(let t=0;t<Qe.length;t+=1)Qe[t].m(ye,null);c(ie,be),c(ie,_e),c(_e,Me)},p(t,[e]){if(1&e&&ve!==(ve=t[0].symbol+"")&&y(o,ve),1&e&&i!==(i="c_"+t[0].color)&&p(r,"class",i),1&e&&we!==(we=Z(t[0])+"")&&y(g,we),1&e&&Ie!==(Ie=t[0].description+"")&&y(w,Ie),1&e&&Oe!==(Oe=mt(t[0])+"")&&y(E,Oe),1&e&&xe!==(xe=gt(mt(t[0]))+"")&&y(S,xe),1&e&&L!==(L="c_"+pt(mt(t[0]))+" fg_only")&&p($,"class",L),1&e&&Ee!==(Ee=t[0].bodytype+"")&&y(j,Ee),1&e&&Ce!==(Ce=(t[0].species??[]).join(", ")+"")&&y(W,Ce),1&e&&$e!==($e=t[0].volume+"")&&y(V,$e),1&e&&Ae!==(Ae=t[0].weight+"")&&y(z,Ae),4&e){let n;for(qe=t[2],n=0;n<qe.length;n+=1){const r=it(t,qe,n);Ve[n]?Ve[n].p(r,e):(Ve[n]=st(r),Ve[n].c(),Ve[n].m(X,null))}for(;n<Ve.length;n+=1)Ve[n].d(1);Ve.length=qe.length}if(1&e&&Se!==(Se=t[0].speed+"")&&y(_t,Se),1&e&&ke!==(ke=(t[0].melee_skill??0)+"")&&y(wt,ke),1&e&&Le!==(Le=yt(t[0])+"")&&y(xt,Le),t[0].special_attacks?Ye?Ye.p(t,e):(Ye=ct(t),Ye.c(),Ye.m(ht,null)):Ye&&(Ye.d(1),Ye=null),1&e&&Te!==(Te=t[0].hp+"")&&y(St,Te),1&e&&Re!==(Re=(t[0].dodge??0)+"")&&y(Tt,Re),1&e&&Ne!==(Ne=(t[0].armor_bash??0)+"")&&y(Ft,Ne),1&e&&Be!==(Be=(t[0].armor_cut??0)+"")&&y(Gt,Be),1&e&&De!==(De=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"")&&y(qt,De),1&e&&Pe!==(Pe=(t[0].armor_bullet??0)+"")&&y(Kt,Pe),1&e&&Fe!==(Fe=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"")&&y(Qt,Fe),1&e&&je!==(je=(t[0].armor_fire??0)+"")&&y(te,je),1&e&&He!==(He=t[0].aggression+"")&&y(le,He),1&e&&Ge!==(Ge=t[0].morale+"")&&y(he,Ge),1&e&&We!==(We=t[0].default_faction+"")&&y(me,We),t[0].anger_triggers?Ke?Ke.p(t,e):(Ke=at(t),Ke.c(),Ke.m(ie,ge)):Ke&&(Ke.d(1),Ke=null),t[0].placate_triggers?ze?ze.p(t,e):(ze=ut(t),ze.c(),ze.m(ie,pe)):ze&&(ze.d(1),ze=null),3&e){let n;for(Je=t[0].flags??[],n=0;n<Je.length;n+=1){const r=rt(t,Je,n);Qe[n]?Qe[n].p(r,e):(Qe[n]=dt(r),Qe[n].c(),Qe[n].m(ye,null))}for(;n<Qe.length;n+=1)Qe[n].d(1);Qe.length=Je.length}1&e&&Ue!==(Ue=(t[0].death_function??[]).join(", ")+"")&&y(Me,Ue)},i:t,o:t,d(t){t&&a(n),t&&a(b),t&&a(M),t&&a(T),t&&a(R),u(Ve,t),t&&a(tt),t&&a(et),Ye&&Ye.d(),t&&a(ee),t&&a(ne),Ke&&Ke.d(),ze&&ze.d(),u(Qe,t)}}}function mt(t){const{melee_skill:e=0,melee_dice:n=0,melee_cut:r=0,melee_dice_sides:o=0,dodge:i=0,armor_bash:s=-1,armor_cut:c=-1,diff:l=0,special_attacks:a=[],emit_fields:u=[],hp:h,speed:d,attack_cost:f=100,morale:m=0,aggression:g=0,vision_day:p=40,vision_night:y=1}=t;let b=(e+1)*n*(r+o)*.04+(i+1)*(3+s+c)*.04+(l+a.length+8*u.length);return b=Math.floor(b),b*=.01*(h+d-f+.1*(m+g))+.01*(p+2*y),Math.floor(b)}function gt(t){return t<3?"Minimal threat.":t<10?"Mildly dangerous.":t<20?"Dangerous.":t<30?"Very dangerous.":t<50?"Extremely dangerous.":"Fatally dangerous!"}function pt(t){return t<3||t<10?"light_gray":t<20?"light_red":"red"}function yt(t){let{melee_dice:e=0,melee_dice_sides:n=0,melee_damage:r,melee_cut:o}=t;return`${e}d${n}`}function bt(t){return Array.isArray(t)?t.length>1?`${t[0]} (cooldown: ${t[1]})`:t[0]:"type"in t?"cooldown"in t?`${t.type} (cooldown: ${t.cooldown})`:t.type:"id"in t?"damage_max_instance"in t?`${t.id}: ${t.damage_max_instance.map((t=>`(${t.damage_type} for ${t.amount} damage)`)).join(" ")}`:t.id:void 0}function _t(t,e,n){let r;var o;s(t,nt,(t=>n(4,r=t)));let{item:i}=e;let c=(null!==(o=i.material)&&void 0!==o?o:[]).map((t=>r.byId("material",t)));return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,{SEES:"It can see you (and will run/follow)",HEARS:"It can hear you",GOODHEARING:"Pursues sounds more than most monsters",SMELLS:"It can smell you",KEENNOSE:"Keen sense of smell",STUMBLES:"Stumbles in its movement",WARM:"Warm blooded",NOHEAD:"Headshots not allowed!",HARDTOSHOOT:"It's one size smaller for ranged attacks, no less then creature_size::tiny",GRABS:"Its attacks may grab us!",BASHES:"Bashes down doors",DESTROYS:"Bashes down walls and more",BORES:"Tunnels through just about anything",POISON:"Poisonous to eat",VENOM:"Attack may poison the player",BADVENOM:"Attack may SEVERELY poison the player",PARALYZE:"Attack may paralyze the player with venom",WEBWALK:"Doesn't destroy webs",DIGS:"Digs through the ground",CAN_DIG:"Can dig and walk",FLIES:"Can fly (over water, etc)",AQUATIC:"Confined to water",SWIMS:"Treats water as 50 movement point terrain",ATTACKMON:"Attacks other monsters",ANIMAL:'Is an "animal" for purposes of the Animal Empath trait',PLASTIC:"Absorbs physical damage to a great degree",SUNDEATH:"Dies in full sunlight",ELECTRIC:"Shocks unarmed attackers",ACIDPROOF:"Immune to acid",ACIDTRAIL:"Leaves a trail of acid",SHORTACIDTRAIL:"Leaves an intermittent trail of acid",FIREPROOF:"Immune to fire",SLUDGEPROOF:"Ignores the effect of sludge trails",SLUDGETRAIL:"Causes monster to leave a sludge trap trail when moving",COLDPROOF:"Immune to cold damage",FIREY:"Burns stuff and is immune to fire",QUEEN:"When it dies, local populations start to die off too",ELECTRONIC:"e.g. a robot; affected by EMP blasts, and other stuff",FUR:"May produce fur when butchered",LEATHER:"May produce leather when butchered",WOOL:"May produce wool when butchered",BONES:"May produce bones and sinews when butchered; if combined with POISON flag, tainted bones, if combined with HUMAN, human bones",FAT:"May produce fat when butchered; if combined with POISON flag, tainted fat",CONSOLE_DESPAWN:"Despawns when a nearby console is properly hacked",IMMOBILE:"Doesn't move (e.g. turrets)",ID_CARD_DESPAWN:"Despawns when a science ID card is used on a nearby console",RIDEABLE_MECH:"A rideable mech that is immobile until ridden.",MILITARY_MECH:"A rideable mech that was designed for military work.",MECH_RECON_VISION:"This mech gives you IR night-vision.",MECH_DEFENSIVE:"This mech gives you thorough protection.",HIT_AND_RUN:"Flee for several turns after a melee attack",GUILT:"You feel guilty for killing it",PAY_BOT:"You can pay this bot to be your friend for a time",HUMAN:"It's a live human, as long as it's alive",NO_BREATHE:"Creature can't drown and is unharmed by gas, smoke, or poison",FLAMMABLE:"Monster catches fire, burns, and spreads fire to nearby objects",REVIVES:"Monster corpse will revive after a short period of time",CHITIN:"May produce chitin when butchered",VERMIN:'Obsolete flag labeling "nuisance" or "scenery" monsters, now used to prevent loading the same.',NOGIB:"Creature won't leave gibs / meat chunks when killed with huge damage.",LARVA:"Creature is a larva. Currently used for gib and blood handling.",ARTHROPOD_BLOOD:"Forces monster to bleed hemolymph.",ACID_BLOOD:"Makes monster bleed acid. Fun stuff! Does not automatically dissolve in a pool of acid on death.",BILE_BLOOD:"Makes monster bleed bile.",ABSORBS:"Consumes objects it moves over which gives bonus hp.",ABSORBS_SPLITS:"Consumes objects it moves over which gives bonus hp. If it gets enough bonus HP, it spawns a copy of itself.",CBM_CIV:"May produce a common CBM a power CBM when butchered.",CBM_POWER:"May produce a power CBM when butchered, independent of MF_CBM_wev.",CBM_SCI:"May produce a bionic from bionics_sci when butchered.",CBM_OP:"May produce a bionic from bionics_op when butchered, and the power storage is mk 2.",CBM_TECH:"May produce a bionic from bionics_tech when butchered.",CBM_SUBS:"May produce a bionic from bionics_subs when butchered.",FILTHY:"Any clothing it drops will be filthy.",FISHABLE:"It is fishable.",GROUP_BASH:"Monsters that can pile up against obstacles and add their strength together to break them.",SWARMS:"Monsters that like to group together and form loose packs",GROUP_MORALE:"Monsters that are more courageous when near friends",INTERIOR_AMMO:"Monster contain's its ammo inside itself, no need to load on launch. Prevents ammo from being dropped on disable.",CLIMBS:"Monsters that can climb certain terrain and furniture",PACIFIST:"Monsters that will never use melee attack, useful for having them use grab without attacking the player",PUSH_MON:"Monsters that can push creatures out of their way",PUSH_VEH:"Monsters that can push vehicles out of their way",NIGHT_INVISIBILITY:"Monsters that are invisible in poor light conditions",REVIVES_HEALTHY:"When revived, this monster has full hitpoints and speed",NO_NECRO:"This monster can't be revived by necros. It will still rise on its own.",AVOID_DANGER_1:"This monster will path around some dangers instead of through them.",AVOID_DANGER_2:"This monster will path around most dangers instead of through them.",AVOID_FIRE:"This monster will path around heat-related dangers instead of through them.",AVOID_FALL:"This monster will path around cliffs instead of off of them.",PRIORITIZE_TARGETS:"This monster will prioritize targets depending on their danger levels",NOT_HALLU:"Monsters that will NOT appear when player's producing hallucinations",CATFOOD:"This monster will become friendly when fed cat food.",CATTLEFODDER:"This monster will become friendly when fed cattle fodder.",BIRDFOOD:"This monster will become friendly when fed bird food.",CANPLAY:"This monster can be played with if it's a pet.",PET_MOUNTABLE:"This monster can be mounted and ridden when tamed.",PET_HARNESSABLE:"This monster can be harnessed when tamed.",DOGFOOD:"This monster will become friendly when fed dog food.",MILKABLE:"This monster is milkable.",SHEARABLE:"This monster is shearable.",NO_BREED:"This monster doesn't breed, even though it has breed data",PET_WONT_FOLLOW:"This monster won't follow the player automatically when tamed.",DRIPS_NAPALM:"This monster occasionally drips napalm on move",DRIPS_GASOLINE:"This monster occasionally drips gasoline on move",ELECTRIC_FIELD:"This monster is surrounded by an electrical field that ignites flammable liquids near it",LOUDMOVES:"This monster makes move noises as if ~2 sizes louder, even if flying.",CAN_OPEN_DOORS:"This monster can open doors.",STUN_IMMUNE:"This monster is immune to the stun effect",DROPS_AMMO:"This monster drops ammo. Should not be set for monsters that use pseudo ammo.",INSECTICIDEPROOF:"This monster is immune to insecticide, even though it's made of bug flesh",RANGED_ATTACKER:"This monster has any sort of ranged attack"},c]}class Mt extends Y{constructor(t){super(),V(this,t,_t,ft,i,{item:0})}}function vt(t,e,n){const r=t.slice();return r[12]=e[n],r}function wt(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function It(t,e,n){const r=t.slice();return r[18]=e[n],r}function Ot(t,e,n){const r=t.slice();return r[21]=e[n],r[17]=n,r}function xt(t,e,n){const r=t.slice();return r[23]=e[n],r}function Et(t,e,n){const r=t.slice();return r[26]=e[n],r}function Ct(t,e,n){const r=t.slice();return r[29]=e[n][0],r[30]=e[n][1],r[17]=n,r}function $t(t){let e;return{c(){e=d("none")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function At(t){let e;return{c(){e=d(", ")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function St(t){let e;return{c(){e=d(" and ")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function kt(e){let n,r,o,i,s,u,f=e[29]+"",g=e[30]+"";let y=function(t,e){return t[17]===t[6].length-2?St:t[17]!==t[6].length-1?At:void 0}(e),b=y&&y(e);return{c(){n=h("a"),r=d(f),o=d(" ("),i=d(g),s=d(")"),b&&b.c(),u=m(),p(n,"href","#/skill/"+e[29])},m(t,e){l(t,n,e),c(n,r),l(t,o,e),l(t,i,e),l(t,s,e),b&&b.m(t,e),l(t,u,e)},p:t,d(t){t&&a(n),t&&a(o),t&&a(i),t&&a(s),b&&b.d(t),t&&a(u)}}}function Lt(t){let e,n,r,o,i=t[0].proficiencies??[],s=[];for(let e=0;e<i.length;e+=1)s[e]=Tt(Et(t,i,e));return{c(){e=h("dt"),e.textContent="Proficiencies",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=f(),p(r,"class","svelte-k9dy74")},m(t,i){l(t,e,i),l(t,n,i),c(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);c(n,o)},p(t,e){if(3&e[0]){let n;for(i=t[0].proficiencies??[],n=0;n<i.length;n+=1){const o=Et(t,i,n);s[n]?s[n].p(o,e):(s[n]=Tt(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&a(e),t&&a(n),u(s,t)}}}function Tt(t){let e,n,r,o,i=Z(t[1].byId("proficiency",t[26].proficiency))+"";return{c(){e=h("li"),n=h("a"),r=d(i),p(n,"href",o="#/proficiency/"+t[26].proficiency)},m(t,o){l(t,e,o),c(e,n),c(n,r)},p(t,e){3&e[0]&&i!==(i=Z(t[1].byId("proficiency",t[26].proficiency))+"")&&y(r,i),1&e[0]&&o!==(o="#/proficiency/"+t[26].proficiency)&&p(n,"href",o)},d(t){t&&a(e)}}}function Rt(t){let e,n,r,o,i,s,u,f,m,g,b=(t[23].amount??1)+"",_=1===(t[23].amount??1)?"":"s",M=Z(t[1].byId("tool_quality",t[23].id))+"",v=t[23].level+"";return{c(){e=h("li"),n=d(b),r=d(" tool"),o=d(_),i=d(" with "),s=h("a"),u=d(M),f=d(" of "),m=d(v),g=d(" or more."),p(s,"href","#/tool_quality/"+t[23].id)},m(t,a){l(t,e,a),c(e,n),c(e,r),c(e,o),c(e,i),c(e,s),c(s,u),c(e,f),c(e,m),c(e,g)},p(t,e){2&e[0]&&M!==(M=Z(t[1].byId("tool_quality",t[23].id))+"")&&y(u,M)},d(t){t&&a(e)}}}function Nt(t){let e,n,r=Z(t[1].byId("item",t[21].id))+"";return{c(){e=h("a"),n=d(r),p(e,"href","#/item/"+t[21].id)},m(t,r){l(t,e,r),c(e,n)},p(t,e){2&e[0]&&r!==(r=Z(t[1].byId("item",t[21].id))+"")&&y(n,r)},d(t){t&&a(e)}}}function Bt(t){let e,n,r,o=Z(t[1].byId("item",t[21].id))+"";return{c(){e=h("a"),n=d(o),p(e,"href",r="#/furniture/"+t[1].craftingPseudoItem(t[21].id))},m(t,r){l(t,e,r),c(e,n)},p(t,i){2&i[0]&&o!==(o=Z(t[1].byId("item",t[21].id))+"")&&y(n,o),2&i[0]&&r!==(r="#/furniture/"+t[1].craftingPseudoItem(t[21].id))&&p(e,"href",r)},d(t){t&&a(e)}}}function Dt(e){let n,r,o,i,s=e[21].count+"",c=1!==e[21].count&&function(t){let e;return{c(){e=d("s")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}();return{c(){n=d("("),r=d(s),o=d(" charge"),c&&c.c(),i=d(")")},m(t,e){l(t,n,e),l(t,r,e),l(t,o,e),c&&c.m(t,e),l(t,i,e)},p:t,d(t){t&&a(n),t&&a(r),t&&a(o),c&&c.d(t),t&&a(i)}}}function Pt(t){let e,n,r,o,i=0!==t[17]&&function(t){let e;return{c(){e=d(" OR ")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}();function s(t,e){return(null==n||2&e[0])&&(n=!!t[1].craftingPseudoItem(t[21].id)),n?Bt:Nt}let c=s(t,[-1]),u=c(t),h=t[21].count>0&&Dt(t);return{c(){i&&i.c(),e=f(),u.c(),r=f(),h&&h.c(),o=m()},m(t,n){i&&i.m(t,n),l(t,e,n),u.m(t,n),l(t,r,n),h&&h.m(t,n),l(t,o,n)},p(t,e){c===(c=s(t,e))&&u?u.p(t,e):(u.d(1),u=c(t),u&&(u.c(),u.m(r.parentNode,r))),t[21].count>0&&h.p(t,e)},d(t){i&&i.d(t),t&&a(e),u.d(t),t&&a(r),h&&h.d(t),t&&a(o)}}}function Ft(t){let e,n,r=t[18],o=[];for(let e=0;e<r.length;e+=1)o[e]=Pt(Ot(t,r,e));return{c(){e=h("li");for(let t=0;t<o.length;t+=1)o[t].c();n=f()},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,n)},p(t,i){if(10&i[0]){let s;for(r=t[18],s=0;s<r.length;s+=1){const c=Ot(t,r,s);o[s]?o[s].p(c,i):(o[s]=Pt(c),o[s].c(),o[s].m(e,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d(t){t&&a(e),u(o,t)}}}function jt(t){let e,n,r,o,i,s=t[15].count+"",u=(1===t[15].count?Z(t[1].byId("item",t[15].id)):X(t[1].byId("item",t[15].id)))+"",m=0!==t[17]&&function(t){let e;return{c(){e=d(" OR ")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}();return{c(){m&&m.c(),e=f(),n=d(s),r=f(),o=h("a"),i=d(u),p(o,"href","#/item/"+t[15].id)},m(t,s){m&&m.m(t,s),l(t,e,s),l(t,n,s),l(t,r,s),l(t,o,s),c(o,i)},p(t,e){2&e[0]&&u!==(u=(1===t[15].count?Z(t[1].byId("item",t[15].id)):X(t[1].byId("item",t[15].id)))+"")&&y(i,u)},d(t){m&&m.d(t),t&&a(e),t&&a(n),t&&a(r),t&&a(o)}}}function Ht(t){let e,n,r=t[12],o=[];for(let e=0;e<r.length;e+=1)o[e]=jt(wt(t,r,e));return{c(){e=h("li");for(let t=0;t<o.length;t+=1)o[t].c();n=f()},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,n)},p(t,i){if(18&i[0]){let s;for(r=t[12],s=0;s<r.length;s+=1){const c=wt(t,r,s);o[s]?o[s].p(c,i):(o[s]=jt(c),o[s].c(),o[s].m(e,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d(t){t&&a(e),u(o,t)}}}function Gt(e){let n,r,o,i,s,g,b,_,M,v,w,I,O,x,E,C,$,A,S,k,L,T,R,N,B,D,P,F,j,H,G,W=Z(e[1].byId("skill",e[0].skill_used))+"",U=(e[0].difficulty??0)+"",q=e[0].time+"",V=(e[0].charges??e[2].initial_charges??e[2].count??e[2].charges)+"",Y=JSON.stringify(e[0],null,2)+"",K=e[6].length&&function(t){let e,n,r,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=kt(Ct(t,o,e));let s=null;return o.length||(s=$t()),{c(){e=h("dt"),e.textContent="Other skills",n=h("dd");for(let t=0;t<i.length;t+=1)i[t].c();s&&s.c(),r=f()},m(t,o){l(t,e,o),l(t,n,o);for(let t=0;t<i.length;t+=1)i[t].m(n,null);s&&s.m(n,null),c(n,r)},p(t,e){if(64&e[0]){let c;for(o=t[6],c=0;c<o.length;c+=1){const s=Ct(t,o,c);i[c]?i[c].p(s,e):(i[c]=kt(s),i[c].c(),i[c].m(n,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length,o.length?s&&(s.d(1),s=null):s||(s=$t(),s.c(),s.m(n,r))}},d(t){t&&a(e),t&&a(n),u(i,t),s&&s.d()}}}(e),z=e[0].proficiencies&&Lt(e),J=e[5]??[],Q=[];for(let t=0;t<J.length;t+=1)Q[t]=Rt(xt(e,J,t));let X=e[3],tt=[];for(let t=0;t<X.length;t+=1)tt[t]=Ft(It(e,X,t));let et=e[4],nt=[];for(let t=0;t<et.length;t+=1)nt[t]=Ht(vt(e,et,t));return{c(){n=h("section"),r=h("dl"),o=h("dt"),o.textContent="Primary skill",i=h("dd"),s=h("a"),g=d(W),_=d(" ("),M=d(U),v=d(")"),K&&K.c(),w=m(),z&&z.c(),I=h("dt"),I.textContent="Time to complete",O=h("dd"),x=d(q),E=h("dt"),E.textContent="Recipe makes",C=h("dd"),$=d(V),A=h("dt"),A.textContent="Tools required",S=h("dd"),k=h("ul");for(let t=0;t<Q.length;t+=1)Q[t].c();L=f();for(let t=0;t<tt.length;t+=1)tt[t].c();T=f(),R=h("dt"),R.textContent="Components",N=h("dd"),B=h("ul");for(let t=0;t<nt.length;t+=1)nt[t].c();D=f(),P=h("details"),F=h("summary"),F.textContent="Recipe JSON",j=f(),H=h("pre"),G=d(Y),p(s,"href",b="#/skill/"+e[0].skill_used),p(k,"class","svelte-k9dy74"),p(B,"class","svelte-k9dy74"),p(n,"class","recipe")},m(t,e){l(t,n,e),c(n,r),c(r,o),c(r,i),c(i,s),c(s,g),c(i,_),c(i,M),c(i,v),K&&K.m(r,null),c(r,w),z&&z.m(r,null),c(r,I),c(r,O),c(O,x),c(r,E),c(r,C),c(C,$),c(r,A),c(r,S),c(S,k);for(let t=0;t<Q.length;t+=1)Q[t].m(k,null);c(k,L);for(let t=0;t<tt.length;t+=1)tt[t].m(k,null);c(S,T),c(r,R),c(r,N),c(N,B);for(let t=0;t<nt.length;t+=1)nt[t].m(B,null);c(n,D),c(n,P),c(P,F),c(P,j),c(P,H),c(H,G)},p(t,e){if(3&e[0]&&W!==(W=Z(t[1].byId("skill",t[0].skill_used))+"")&&y(g,W),1&e[0]&&b!==(b="#/skill/"+t[0].skill_used)&&p(s,"href",b),1&e[0]&&U!==(U=(t[0].difficulty??0)+"")&&y(M,U),t[6].length&&K.p(t,e),t[0].proficiencies?z?z.p(t,e):(z=Lt(t),z.c(),z.m(r,I)):z&&(z.d(1),z=null),1&e[0]&&q!==(q=t[0].time+"")&&y(x,q),1&e[0]&&V!==(V=(t[0].charges??t[2].initial_charges??t[2].count??t[2].charges)+"")&&y($,V),34&e[0]){let n;for(J=t[5]??[],n=0;n<J.length;n+=1){const r=xt(t,J,n);Q[n]?Q[n].p(r,e):(Q[n]=Rt(r),Q[n].c(),Q[n].m(k,L))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=J.length}if(10&e[0]){let n;for(X=t[3],n=0;n<X.length;n+=1){const r=It(t,X,n);tt[n]?tt[n].p(r,e):(tt[n]=Ft(r),tt[n].c(),tt[n].m(k,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=X.length}if(18&e[0]){let n;for(et=t[4],n=0;n<et.length;n+=1){const r=vt(t,et,n);nt[n]?nt[n].p(r,e):(nt[n]=Ht(r),nt[n].c(),nt[n].m(B,null))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}1&e[0]&&Y!==(Y=JSON.stringify(t[0],null,2)+"")&&y(G,Y)},i:t,o:t,d(t){t&&a(n),K&&K.d(),z&&z.d(),u(Q,t),u(tt,t),u(nt,t)}}}function Wt(t,e,n){let r;var o;s(t,nt,(t=>n(1,r=t)));let{recipe:i}=e;function c(t,e){var n;const o=[];for(const i of t){const[t,s,l]=i;if(l){const i=r.byId("requirement",t);"requirement"!==i.type&&console.error(`Expected a requirement, got ${i.type} (id=${i.id})`);const l=(null!==(n=e(i))&&void 0!==n?n:[])[0];o.push(...c(l,e).map((t=>Object.assign(Object.assign({},t),{count:t.count*s}))))}else o.push({id:t,count:s})}return o}function l(t){const e=r.replacementTools(t.id);return[t,...e.map((e=>({id:e,count:t.count})))]}function a(t,e){return t.map((t=>c(t,e))).map((t=>t.flatMap(l))).filter((t=>t.length))}let u=r.byId("item",i.result),h=(null!==(o=i.using)&&void 0!==o?o:[]).map((([t,e])=>[r.byId("requirement",t),e])).concat([[i,1]]),d=h.flatMap((([t,e])=>{var n;return a(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools)).map((t=>t.map((t=>Object.assign(Object.assign({},t),{count:t.count*e})))))})),f=h.flatMap((([t,e])=>{var n;return a(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>Object.assign(Object.assign({},t),{count:t.count*e})))))})),m=h.flatMap((([t,e])=>{var n;return null!==(n=t.qualities)&&void 0!==n?n:[]})),g=void 0===(p=i.skills_required)?[]:Array.isArray(p[0])?p:[p];var p;return t.$$set=t=>{"recipe"in t&&n(0,i=t.recipe)},[i,r,u,d,f,m,g]}class Ut extends Y{constructor(t){super(),V(this,t,Wt,Gt,i,{recipe:0},[-1,-1])}}function qt(t,e,n){const r=t.slice();return r[12]=e[n],r}function Vt(t,e,n){const r=t.slice();return r[15]=e[n],r}function Yt(t,e,n){const r=t.slice();return r[18]=e[n].quality,r[19]=e[n].level,r}function Kt(t,e,n){const r=t.slice();return r[22]=e[n],r}function zt(t,e,n){const r=t.slice();return r[25]=e[n],r}function Jt(e){let n,r,o,i=e[25].name+"";return{c(){n=h("li"),r=h("a"),o=d(i),p(r,"href","#/material/"+e[25].id)},m(t,e){l(t,n,e),c(n,r),c(r,o)},p:t,d(t){t&&a(n)}}}function Qt(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function Zt(e){let n,r,o,i=e[22].id+"";return{c(){n=h("li"),r=h("a"),o=d(i),p(r,"href","#/json_flag/"+e[22].id)},m(t,e){l(t,n,e),c(n,r),c(r,o)},p:t,d(t){t&&a(n)}}}function Xt(e){let n,r,o,i,s,u,m,g,y=e[19]+"",b=Z(e[18])+"";return{c(){n=h("li"),r=d("Has level "),o=h("strong"),i=d(y),s=f(),u=h("a"),m=d(b),g=d(" quality."),p(u,"href","#/tool_quality/"+e[18].id)},m(t,e){l(t,n,e),c(n,r),c(n,o),c(o,i),c(o,s),c(o,u),c(u,m),c(n,g)},p:t,d(t){t&&a(n)}}}function te(t){let e,n,r,o,i,s,m,g,b,_,M,v,w,I,O,x,E=(t[0].bashing??0)+"",C=(t[0].cutting??0)+"",$=(t[0].to_hit??0)+"",A=ce(t[0])+"",S=t[2].length&&function(t){let e,n,r,o=t[2],i=[];for(let e=0;e<o.length;e+=1)i[e]=ee(Vt(t,o,e));return{c(){e=h("dt"),e.textContent="Techniques",n=h("dd"),r=h("ul");for(let t=0;t<i.length;t+=1)i[t].c();p(r,"class","no-bullets")},m(t,o){l(t,e,o),l(t,n,o),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(r,null)},p(t,e){if(4&e){let n;for(o=t[2],n=0;n<o.length;n+=1){const s=Vt(t,o,n);i[n]?i[n].p(s,e):(i[n]=ee(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&a(e),t&&a(n),u(i,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Melee",r=f(),o=h("dl"),i=h("dt"),i.textContent="Bash",s=h("dd"),m=d(E),g=h("dt"),g.textContent="Cut",b=h("dd"),_=d(C),M=h("dt"),M.textContent="To hit",v=h("dd"),w=d($),I=h("dt"),I.textContent="Moves per attack",O=h("dd"),x=d(A),S&&S.c()},m(t,a){l(t,e,a),c(e,n),c(e,r),c(e,o),c(o,i),c(o,s),c(s,m),c(o,g),c(o,b),c(b,_),c(o,M),c(o,v),c(v,w),c(o,I),c(o,O),c(O,x),S&&S.m(o,null)},p(t,e){1&e&&E!==(E=(t[0].bashing??0)+"")&&y(m,E),1&e&&C!==(C=(t[0].cutting??0)+"")&&y(_,C),1&e&&$!==($=(t[0].to_hit??0)+"")&&y(w,$),1&e&&A!==(A=ce(t[0])+"")&&y(x,A),t[2].length&&S.p(t,e)},d(t){t&&a(e),S&&S.d()}}}function ee(e){let n,r,o,i,s,u,f=e[15].name+"",m=e[15].description+"";return{c(){n=h("li"),r=h("strong"),o=h("a"),i=d(f),s=d(": "),u=d(m),p(o,"href","#/technique/"+e[15].id)},m(t,e){l(t,n,e),c(n,r),c(r,o),c(o,i),c(n,s),c(n,u)},p:t,d(t){t&&a(n)}}}function ne(t){let e,n,r,o,i=[],s=new Map,c=t[7];const u=t=>t[12];for(let e=0;e<c.length;e+=1){let n=qt(t,c,e),r=u(n);s.set(r,i[e]=re(r,n))}return{c(){e=h("h2"),e.textContent="Recipes",n=f();for(let t=0;t<i.length;t+=1)i[t].c();r=m()},m(t,s){l(t,e,s),l(t,n,s);for(let e=0;e<i.length;e+=1)i[e].m(t,s);l(t,r,s),o=!0},p(t,e){128&e&&(c=t[7],B(),i=function(t,e,n,r,o,i,s,c,l,a,u,h){let d=t.length,f=i.length,m=d;const g={};for(;m--;)g[t[m].key]=m;const p=[],y=new Map,b=new Map;for(m=f;m--;){const t=h(o,i,m),c=n(t);let l=s.get(c);l?r&&l.p(t,e):(l=a(c,t),l.c()),y.set(c,p[m]=l),c in g&&b.set(c,Math.abs(m-g[c]))}const _=new Set,M=new Set;function v(t){P(t,1),t.m(c,u),s.set(t.key,t),u=t.first,f--}for(;d&&f;){const e=p[f-1],n=t[d-1],r=e.key,o=n.key;e===n?(u=e.first,d--,f--):y.has(o)?!s.has(r)||_.has(r)?v(e):M.has(o)?d--:b.get(r)>b.get(o)?(M.add(r),v(e)):(_.add(o),d--):(l(n,s),d--)}for(;d--;){const e=t[d];y.has(e.key)||l(e,s)}for(;f;)v(p[f-1]);return p}(i,e,u,1,t,c,s,r.parentNode,H,re,r,qt),D())},i(t){if(!o){for(let t=0;t<c.length;t+=1)P(i[t]);o=!0}},o(t){for(let t=0;t<i.length;t+=1)F(i[t]);o=!1},d(t){t&&a(e),t&&a(n);for(let e=0;e<i.length;e+=1)i[e].d(t);t&&a(r)}}}function re(t,e){let n,r,o;return r=new Ut({props:{recipe:e[12]}}),{key:t,first:null,c(){n=m(),G(r.$$.fragment),this.first=n},m(t,e){l(t,n,e),W(r,t,e),o=!0},p(t,n){e=t},i(t){o||(P(r.$$.fragment,t),o=!0)},o(t){F(r.$$.fragment,t),o=!1},d(t){t&&a(n),U(r,t)}}}function oe(t){let e,n,r,o,i,s,g,b,M,v,w,I,O,x,E,C,$,A,S,k,L,T,R,N,B,D,j,H,G,W,U,q,V,Y,K,z=t[0].symbol+"",J=Z(t[0])+"",Q=t[0].volume+"",X=t[0].weight+"",tt=se(t[0])+"",et=t[0].description+"",nt=t[4],rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=Jt(zt(t,nt,e));let ot=t[6]&&function(t){let e,n,r,o,i=Z(t[1].byId("ammunition_type",t[6]))+"";return{c(){e=h("dt"),e.textContent="Ammo",n=h("dd"),r=h("a"),o=d(i),p(r,"href","#/ammunition_type/"+t[6])},m(t,i){l(t,e,i),l(t,n,i),c(n,r),c(r,o)},p(t,e){2&e&&i!==(i=Z(t[1].byId("ammunition_type",t[6]))+"")&&y(o,i)},d(t){t&&a(e),t&&a(n)}}}(t),it=t[5],st=[];for(let e=0;e<it.length;e+=1)st[e]=Zt(Kt(t,it,e));let ct=null;it.length||(ct=Qt());let lt=t[3].length&&function(t){let e,n,r,o=t[3],i=[];for(let e=0;e<o.length;e+=1)i[e]=Xt(Yt(t,o,e));return{c(){e=h("dt"),e.textContent="Qualities",n=h("dd"),r=h("ul");for(let t=0;t<i.length;t+=1)i[t].c();p(r,"class","no-bullets")},m(t,o){l(t,e,o),l(t,n,o),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(r,null)},p(t,e){if(8&e){let n;for(o=t[3],n=0;n<o.length;n+=1){const s=Yt(t,o,n);i[n]?i[n].p(s,e):(i[n]=Xt(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&a(e),t&&a(n),u(i,t)}}}(t),at=(t[0].bashing||t[0].cutting)&&te(t),ut=t[7].length&&ne(t);return{c(){e=h("h1"),n=h("span"),r=d(z),i=f(),s=d(J),g=f(),b=h("section"),M=h("h1"),M.textContent="General",v=f(),w=h("dl"),I=h("dt"),I.textContent="Material",O=h("dd"),x=h("ul");for(let t=0;t<rt.length;t+=1)rt[t].c();E=f(),C=h("dt"),C.textContent="Volume",$=h("dd"),A=d(Q),S=h("dt"),S.textContent="Weight",k=h("dd"),L=d(X),T=h("dt"),T.textContent="Length",R=h("dd"),N=d(tt),ot&&ot.c(),B=h("dt"),B.textContent="Flags",D=h("dd"),j=h("ul");for(let t=0;t<st.length;t+=1)st[t].c();ct&&ct.c(),H=f(),lt&&lt.c(),G=f(),W=h("p"),U=d(et),q=f(),at&&at.c(),V=f(),ut&&ut.c(),Y=m(),_(n,"font-family","monospace"),p(n,"class",o="c_"+t[0].color),p(x,"class","comma-separated"),p(j,"class","comma-separated"),_(W,"color","var(--cata-color-gray)")},m(t,o){l(t,e,o),c(e,n),c(n,r),c(e,i),c(e,s),l(t,g,o),l(t,b,o),c(b,M),c(b,v),c(b,w),c(w,I),c(w,O),c(O,x);for(let t=0;t<rt.length;t+=1)rt[t].m(x,null);c(O,E),c(w,C),c(w,$),c($,A),c(w,S),c(w,k),c(k,L),c(w,T),c(w,R),c(R,N),ot&&ot.m(w,null),c(w,B),c(w,D),c(D,j);for(let t=0;t<st.length;t+=1)st[t].m(j,null);ct&&ct.m(j,null),c(D,H),lt&&lt.m(w,null),c(b,G),c(b,W),c(W,U),l(t,q,o),at&&at.m(t,o),l(t,V,o),ut&&ut.m(t,o),l(t,Y,o),K=!0},p(t,[e]){if((!K||1&e)&&z!==(z=t[0].symbol+"")&&y(r,z),(!K||1&e&&o!==(o="c_"+t[0].color))&&p(n,"class",o),(!K||1&e)&&J!==(J=Z(t[0])+"")&&y(s,J),16&e){let n;for(nt=t[4],n=0;n<nt.length;n+=1){const r=zt(t,nt,n);rt[n]?rt[n].p(r,e):(rt[n]=Jt(r),rt[n].c(),rt[n].m(x,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=nt.length}if((!K||1&e)&&Q!==(Q=t[0].volume+"")&&y(A,Q),(!K||1&e)&&X!==(X=t[0].weight+"")&&y(L,X),(!K||1&e)&&tt!==(tt=se(t[0])+"")&&y(N,tt),t[6]&&ot.p(t,e),32&e){let n;for(it=t[5],n=0;n<it.length;n+=1){const r=Kt(t,it,n);st[n]?st[n].p(r,e):(st[n]=Zt(r),st[n].c(),st[n].m(j,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=it.length,it.length?ct&&(ct.d(1),ct=null):ct||(ct=Qt(),ct.c(),ct.m(j,null))}t[3].length&&lt.p(t,e),(!K||1&e)&&et!==(et=t[0].description+"")&&y(U,et),t[0].bashing||t[0].cutting?at?at.p(t,e):(at=te(t),at.c(),at.m(V.parentNode,V)):at&&(at.d(1),at=null),t[7].length&&ut.p(t,e)},i(t){K||(P(ut),K=!0)},o(t){F(ut),K=!1},d(t){t&&a(e),t&&a(g),t&&a(b),u(rt,t),ot&&ot.d(),u(st,t),ct&&ct.d(),lt&&lt.d(),t&&a(q),at&&at.d(t),t&&a(V),ut&&ut.d(t),t&&a(Y)}}}function ie(t){return void 0===t?0:"number"==typeof t?250*t:t.endsWith("ml")?parseInt(t):t.endsWith("L")?1e3*parseInt(t):void 0}function se(t){return t.longest_side?t.longest_side:`${Math.round(Math.cbrt(ie(t.volume)))} cm`}function ce(t){return Math.floor(ie(t.volume)/62.5+(void 0===(e=t.weight)?0:"number"==typeof e?e:e.endsWith("g")?parseInt(e):e.endsWith("mg")?parseInt(e)/1e3:e.endsWith("kg")?1e3*parseInt(e):void 0)/60+65);var e}function le(t,e,n){let r;var o,i,c,l;s(t,nt,(t=>n(1,r=t)));let{item:a}=e,u=(null!==(o=a.techniques)&&void 0!==o?o:[]).map((t=>r.byId("technique",t))),h=(null!==(i=a.qualities)&&void 0!==i?i:[]).map((([t,e])=>({quality:r.byId("tool_quality",t),level:e}))),d=(null!==(c=a.material)&&void 0!==c?c:[]).map((t=>r.byId("material",t))),f=(null!==(l=a.flags)&&void 0!==l?l:[]).map((t=>{var e;return null!==(e=r.byId("json_flag",t))&&void 0!==e?e:{id:t}})),m=Array.isArray(a.ammo)?a.ammo[0]:a.ammo,g=r.byType("recipe").filter((t=>t.result===a.id&&!t.obsolete));return t.$$set=t=>{"item"in t&&n(0,a=t.item)},[a,r,u,h,d,f,m,g]}class ae extends Y{constructor(t){super(),V(this,t,le,oe,i,{item:0})}}function ue(e){let n,r,o=JSON.stringify(e[0],null,2)+"";return{c(){n=h("pre"),r=d(o)},m(t,e){l(t,n,e),c(n,r)},p(t,[e]){1&e&&o!==(o=JSON.stringify(t[0],null,2)+"")&&y(r,o)},i:t,o:t,d(t){t&&a(n)}}}function he(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class de extends Y{constructor(t){super(),V(this,t,he,ue,i,{item:0})}}function fe(t){let e,n,r,o,i,s,u,m,g=JSON.stringify(t[2],null,2)+"";var p=t[3][t[2].type]??de;function b(t){return{props:{item:t[2]}}}return p&&(e=new p(b(t))),{c(){e&&G(e.$$.fragment),n=f(),r=h("details"),o=h("summary"),o.textContent="Raw JSON",i=f(),s=h("pre"),u=d(g)},m(t,a){e&&W(e,t,a),l(t,n,a),l(t,r,a),c(r,o),c(r,i),c(r,s),c(s,u),m=!0},p(t,r){const o={};if(4&r&&(o.item=t[2]),p!==(p=t[3][t[2].type]??de)){if(e){B();const t=e;F(t.$$.fragment,1,0,(()=>{U(t,1)})),D()}p?(e=new p(b(t)),G(e.$$.fragment),P(e.$$.fragment,1),W(e,n.parentNode,n)):e=null}else p&&e.$set(o);(!m||4&r)&&g!==(g=JSON.stringify(t[2],null,2)+"")&&y(u,g)},i(t){m||(e&&P(e.$$.fragment,t),m=!0)},o(t){e&&F(e.$$.fragment,t),m=!1},d(t){e&&U(e,t),t&&a(n),t&&a(r)}}}function me(e){let n,r,o,i,s=e[0].type+"",c=e[0].id+"";return{c(){n=d("Unknown obj: "),r=d(s),o=d("/"),i=d(c)},m(t,e){l(t,n,e),l(t,r,e),l(t,o,e),l(t,i,e)},p(t,e){1&e&&s!==(s=t[0].type+"")&&y(r,s),1&e&&c!==(c=t[0].id+"")&&y(i,c)},i:t,o:t,d(t){t&&a(n),t&&a(r),t&&a(o),t&&a(i)}}}function ge(e){let n;return{c(){n=d("...")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function pe(t){let e,n,r,o;const i=[ge,me,fe],s=[];function c(t,e){return t[1]?t[2]?2:1:0}return e=c(t),n=s[e]=i[e](t),{c(){n.c(),r=m()},m(t,n){s[e].m(t,n),l(t,r,n),o=!0},p(t,[o]){let l=e;e=c(t),e===l?s[e].p(t,o):(B(),F(s[l],1,1,(()=>{s[l]=null})),D(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),P(n,1),n.m(r.parentNode,r))},i(t){o||(P(n),o=!0)},o(t){F(n),o=!1},d(t){s[e].d(t),t&&a(r)}}}function ye(t,e,n){let r;s(t,nt,(t=>n(1,r=t)));let o,{item:i}=e;const c={MONSTER:Mt,AMMO:ae,GUN:ae,ARMOR:ae,PET_ARMOR:ae,TOOL:ae,TOOLMOD:ae,TOOL_ARMOR:ae,BOOK:ae,COMESTIBLE:ae,ENGINE:ae,WHEEL:ae,GUNMOD:ae,MAGAZINE:ae,BATTERY:ae,GENERIC:ae,BIONIC_ITEM:ae};return t.$$set=t=>{"item"in t&&n(0,i=t.item)},t.$$.update=()=>{3&t.$$.dirty&&n(2,o=null==r?void 0:r.byId(i.type,i.id))},[i,r,o,c]}class be extends Y{constructor(t){super(),V(this,t,ye,pe,i,{item:0})}}function _e(t){return Array.isArray?Array.isArray(t):"[object Array]"===Ee(t)}function Me(t){return"string"==typeof t}function ve(t){return"number"==typeof t}function we(t){return!0===t||!1===t||function(t){return Ie(t)&&null!==t}(t)&&"[object Boolean]"==Ee(t)}function Ie(t){return"object"==typeof t}function Oe(t){return null!=t}function xe(t){return!t.trim().length}function Ee(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Ce=Object.prototype.hasOwnProperty;class $e{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=Ae(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ae(t){let e=null,n=null,r=null,o=1;if(Me(t)||_e(t))r=t,e=Se(t),n=ke(t);else{if(!Ce.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,Ce.call(t,"weight")&&(o=t.weight,o<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=Se(i),n=ke(i)}return{path:e,id:n,weight:o,src:r}}function Se(t){return _e(t)?t:t.split(".")}function ke(t){return _e(t)?t.join("."):t}var Le={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const o=(t,e,i)=>{if(Oe(t))if(e[i]){const s=t[e[i]];if(!Oe(s))return;if(i===e.length-1&&(Me(s)||ve(s)||we(s)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(s));else if(_e(s)){r=!0;for(let t=0,n=s.length;t<n;t+=1)o(s[t],e,i+1)}else e.length&&o(s,e,i+1)}else n.push(t)};return o(t,Me(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const Te=/[^ ]+/g;class Re{constructor({getFn:t=Le.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(Te).length;if(e.has(r))return e.get(r);const o=1/Math.sqrt(r),i=parseFloat(Math.round(o*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Me(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();Me(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Oe(t)||xe(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let o=this.getFn(t,e.path);if(Oe(o))if(_e(o)){let t=[];const e=[{nestedArrIndex:-1,value:o}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(Oe(r))if(Me(r)&&!xe(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else _e(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!xe(o)){let t={v:o,n:this.norm.get(o)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ne(t,e,{getFn:n=Le.getFn}={}){const r=new Re({getFn:n});return r.setKeys(t.map(Ae)),r.setSources(e),r.create(),r}function Be(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:o=Le.distance,ignoreLocation:i=Le.ignoreLocation}={}){const s=e/t.length;if(i)return s;const c=Math.abs(r-n);return o?s+c/o:c?1:s}const De=32;function Pe(t,e,n,{location:r=Le.location,distance:o=Le.distance,threshold:i=Le.threshold,findAllMatches:s=Le.findAllMatches,minMatchCharLength:c=Le.minMatchCharLength,includeMatches:l=Le.includeMatches,ignoreLocation:a=Le.ignoreLocation}={}){if(e.length>De)throw new Error(`Pattern length exceeds max of ${De}.`);const u=e.length,h=t.length,d=Math.max(0,Math.min(r,h));let f=i,m=d;const g=c>1||l,p=g?Array(h):[];let y;for(;(y=t.indexOf(e,m))>-1;){let t=Be(e,{currentLocation:y,expectedLocation:d,distance:o,ignoreLocation:a});if(f=Math.min(t,f),m=y+u,g){let t=0;for(;t<u;)p[y+t]=1,t+=1}}m=-1;let b=[],_=1,M=u+h;const v=1<<u-1;for(let r=0;r<u;r+=1){let i=0,c=M;for(;i<c;){Be(e,{errors:r,currentLocation:d+c,expectedLocation:d,distance:o,ignoreLocation:a})<=f?i=c:M=c,c=Math.floor((M-i)/2+i)}M=c;let l=Math.max(1,d-c+1),y=s?h:Math.min(d+c,h)+u,w=Array(y+2);w[y+1]=(1<<r)-1;for(let i=y;i>=l;i-=1){let s=i-1,c=n[t.charAt(s)];if(g&&(p[s]=+!!c),w[i]=(w[i+1]<<1|1)&c,r&&(w[i]|=(b[i+1]|b[i])<<1|1|b[i+1]),w[i]&v&&(_=Be(e,{errors:r,currentLocation:s,expectedLocation:d,distance:o,ignoreLocation:a}),_<=f)){if(f=_,m=s,m<=d)break;l=Math.max(1,2*d-m)}}if(Be(e,{errors:r+1,currentLocation:d,expectedLocation:d,distance:o,ignoreLocation:a})>f)break;b=w}const w={isMatch:m>=0,score:Math.max(.001,_)};if(g){const t=function(t=[],e=Le.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let s=t.length;i<s;i+=1){let s=t[i];s&&-1===r?r=i:s||-1===r||(o=i-1,o-r+1>=e&&n.push([r,o]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(p,c);t.length?l&&(w.indices=t):w.isMatch=!1}return w}function Fe(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const o=t.charAt(n);e[o]=(e[o]||0)|1<<r-n-1}return e}class je{constructor(t,{location:e=Le.location,threshold:n=Le.threshold,distance:r=Le.distance,includeMatches:o=Le.includeMatches,findAllMatches:i=Le.findAllMatches,minMatchCharLength:s=Le.minMatchCharLength,isCaseSensitive:c=Le.isCaseSensitive,ignoreLocation:l=Le.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(t,e)=>{this.chunks.push({pattern:t,alphabet:Fe(t),startIndex:e})},u=this.pattern.length;if(u>De){let t=0;const e=u%De,n=u-e;for(;t<n;)a(this.pattern.substr(t,De),t),t+=De;if(e){const t=u-De;a(this.pattern.substr(t),t)}}else a(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:c,ignoreLocation:l}=this.options;let a=[],u=0,h=!1;this.chunks.forEach((({pattern:e,alphabet:d,startIndex:f})=>{const{isMatch:m,score:g,indices:p}=Pe(t,e,d,{location:r+f,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});m&&(h=!0),u+=g,m&&p&&(a=[...a,...p])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=a),d}}class He{constructor(t){this.pattern=t}static isMultiMatch(t){return Ge(t,this.multiRegex)}static isSingleMatch(t){return Ge(t,this.singleRegex)}search(){}}function Ge(t,e){const n=t.match(e);return n?n[1]:null}class We extends He{constructor(t,{location:e=Le.location,threshold:n=Le.threshold,distance:r=Le.distance,includeMatches:o=Le.includeMatches,findAllMatches:i=Le.findAllMatches,minMatchCharLength:s=Le.minMatchCharLength,isCaseSensitive:c=Le.isCaseSensitive,ignoreLocation:l=Le.ignoreLocation}={}){super(t),this._bitapSearch=new je(t,{location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Ue extends He{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],o=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+o,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const qe=[class extends He{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Ue,class extends He{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends He{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends He{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends He{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends He{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},We],Ve=qe.length,Ye=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const Ke=new Set([We.type,Ue.type]);class ze{constructor(t,{isCaseSensitive:e=Le.isCaseSensitive,includeMatches:n=Le.includeMatches,minMatchCharLength:r=Le.minMatchCharLength,ignoreLocation:o=Le.ignoreLocation,findAllMatches:i=Le.findAllMatches,location:s=Le.location,threshold:c=Le.threshold,distance:l=Le.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:o,location:s,threshold:c,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(Ye).filter((t=>t&&!!t.trim())),r=[];for(let t=0,o=n.length;t<o;t+=1){const o=n[t];let i=!1,s=-1;for(;!i&&++s<Ve;){const t=qe[s];let n=t.isMultiMatch(o);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(s=-1;++s<Ve;){const t=qe[s];let n=t.isSingleMatch(o);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let o=0,i=[],s=0;for(let r=0,c=e.length;r<c;r+=1){const c=e[r];i.length=0,o=0;for(let e=0,r=c.length;e<r;e+=1){const r=c[e],{isMatch:l,indices:a,score:u}=r.search(t);if(!l){s=0,o=0,i.length=0;break}if(o+=1,s+=u,n){const t=r.constructor.type;Ke.has(t)?i=[...i,...a]:i.push(a)}}if(o){let t={isMatch:!0,score:s/o};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const Je=[];function Qe(t,e){for(let n=0,r=Je.length;n<r;n+=1){let r=Je[n];if(r.condition(t,e))return new r(t,e)}return new je(t,e)}const Ze="$and",Xe="$or",tn="$path",en="$val",nn=t=>!(!t[Ze]&&!t[Xe]),rn=t=>({[Ze]:Object.keys(t).map((e=>({[e]:t[e]})))});function on(t,e,{auto:n=!0}={}){const r=t=>{let o=Object.keys(t);const i=(t=>!!t[tn])(t);if(!i&&o.length>1&&!nn(t))return r(rn(t));if((t=>!_e(t)&&Ie(t)&&!nn(t))(t)){const r=i?t[tn]:o[0],s=i?t[en]:t[r];if(!Me(s))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:ke(r),pattern:s};return n&&(c.searcher=Qe(s,e)),c}let s={children:[],operator:o[0]};return o.forEach((e=>{const n=t[e];_e(n)&&n.forEach((t=>{s.children.push(r(t))}))})),s};return nn(t)||(t=rn(t)),r(t)}function sn(t,e){const n=t.matches;e.matches=[],Oe(n)&&n.forEach((t=>{if(!Oe(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let o={indices:n,value:r};t.key&&(o.key=t.key.src),t.idx>-1&&(o.refIndex=t.idx),e.matches.push(o)}))}function cn(t,e){e.score=t.score}class ln{constructor(t,e={},n){this.options={...Le,...e},this.options.useExtendedSearch,this._keyStore=new $e(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Re))throw new Error("Incorrect 'index' type");this._myIndex=e||Ne(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){Oe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:s}=this.options;let c=Me(t)?Me(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=Le.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:o})=>{const i=t?t.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(e?1:r))})),t.score=n}))}(c,{ignoreFieldNorm:s}),o&&c.sort(i),ve(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=Le.includeMatches,includeScore:r=Le.includeScore}={}){const o=[];return n&&o.push(sn),r&&o.push(cn),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return o.length&&o.forEach((e=>{e(t,r)})),r}))}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=Qe(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:o})=>{if(!Oe(t))return;const{isMatch:i,score:s,indices:c}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:s,value:t,norm:o,indices:c}]})})),r}_searchLogical(t){const e=on(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:o}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:o});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case Ze:{const o=[];for(let i=0,s=t.children.length;i<s;i+=1){const s=t.children[i],c=n(s,e,r);if(!c.length)return[];o.push(...c)}return o}case Xe:{const o=[];for(let i=0,s=t.children.length;i<s;i+=1){const s=t.children[i],c=n(s,e,r);if(c.length){o.push(...c);break}}return o}}},r=this._myIndex.records,o={},i=[];return r.forEach((({$:t,i:r})=>{if(Oe(t)){let s=n(e,t,r);s.length&&(o[r]||(o[r]={idx:r,item:t,matches:[]},i.push(o[r])),s.forEach((({matches:t})=>{o[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=Qe(t,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach((({$:t,i:r})=>{if(!Oe(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&o.push({idx:r,item:t,matches:i})})),o}_findMatches({key:t,value:e,searcher:n}){if(!Oe(e))return[];let r=[];if(_e(e))e.forEach((({v:e,i:o,n:i})=>{if(!Oe(e))return;const{isMatch:s,score:c,indices:l}=n.searchIn(e);s&&r.push({score:c,key:t,value:e,idx:o,norm:i,indices:l})}));else{const{v:o,n:i}=e,{isMatch:s,score:c,indices:l}=n.searchIn(o);s&&r.push({score:c,key:t,value:o,norm:i,indices:l})}return r}}function an(t,e,n){const r=t.slice();return r[7]=e[n],r}function un(t,e,n){const r=t.slice();return r[10]=e[n],r}function hn(e){let n;return{c(){n=h("pre"),n.textContent="..."},m(t,e){l(t,n,e)},p:t,d(t){t&&a(n)}}}function dn(t){let e,n=[...t[0].keys()],r=[];for(let e=0;e<n.length;e+=1)r[e]=mn(an(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=m()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);l(t,e,n)},p(t,o){if(1&o){let i;for(n=[...t[0].keys()],i=0;i<n.length;i+=1){const s=an(t,n,i);r[i]?r[i].p(s,o):(r[i]=mn(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){u(r,t),t&&a(e)}}}function fn(t){let e,n,r,o,i=Z(t[10])+"";return{c(){e=h("li"),n=h("a"),r=d(i),p(n,"href",o="#/"+Q(t[10].type)+"/"+t[10].id)},m(t,o){l(t,e,o),c(e,n),c(n,r)},p(t,e){1&e&&i!==(i=Z(t[10])+"")&&y(r,i),1&e&&o!==(o="#/"+Q(t[10].type)+"/"+t[10].id)&&p(n,"href",o)},d(t){t&&a(e)}}}function mn(t){let e,n,r,o,i,s=t[7]+"",m=t[0].get(t[7]),g=[];for(let e=0;e<m.length;e+=1)g[e]=fn(un(t,m,e));return{c(){e=h("h1"),n=d(s),r=f(),o=h("ul");for(let t=0;t<g.length;t+=1)g[t].c();i=f()},m(t,s){l(t,e,s),c(e,n),l(t,r,s),l(t,o,s);for(let t=0;t<g.length;t+=1)g[t].m(o,null);c(o,i)},p(t,e){if(1&e&&s!==(s=t[7]+"")&&y(n,s),1&e){let n;for(m=t[0].get(t[7]),n=0;n<m.length;n+=1){const r=un(t,m,n);g[n]?g[n].p(r,e):(g[n]=fn(r),g[n].c(),g[n].m(o,i))}for(;n<g.length;n+=1)g[n].d(1);g.length=m.length}},d(t){t&&a(e),t&&a(r),t&&a(o),u(g,t)}}}function gn(e){let n;function r(t,e){return t[0]?dn:hn}let o=r(e),i=o(e);return{c(){i.c(),n=m()},m(t,e){i.m(t,e),l(t,n,e)},p(t,[e]){o===(o=r(t))&&i?i.p(t,e):(i.d(1),i=o(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&a(n)}}}function pn(t,e,n){let r,o;var i;let c;s(t,nt,(t=>n(3,o=t)));let{search:l}=e;const a=new Set(["item","monster"]);return t.$$set=t=>{"search"in t&&n(1,l=t.search)},t.$$.update=()=>{12&t.$$.dirty&&(c=new ln([...null!==n(2,i=null==o?void 0:o.all())&&void 0!==i?i:[]].filter((t=>"string"==typeof t.id)),{keys:["id","name"],getFn:(t,e)=>{var n,r;return"id"===e[0]?null!==(r=null!==(n=t.id)&&void 0!==n?n:t.abstract)&&void 0!==r?r:"":"name"===e[0]?Z(t):void 0},ignoreFieldNorm:!0,minMatchCharLength:2,threshold:.2})),10&t.$$.dirty&&n(0,r=l&&l.length>1&&o&&function(t){const e=c.search(t,{limit:100}),n=new Map;for(const{item:t}of e){const e=Q(t.type);a.has(e)&&(n.has(e)||n.set(e,[]),n.get(e).push(t))}return n}(l)),2&t.$$.dirty&&history.replaceState({search:l},"")},[r,l,i,o]}ln.version="6.4.6",ln.createIndex=Ne,ln.parseIndex=function(t,{getFn:e=Le.getFn}={}){const{keys:n,records:r}=t,o=new Re({getFn:e});return o.setKeys(n),o.setIndexRecords(r),o},ln.config=Le,ln.parseQuery=on,function(...t){Je.push(...t)}(ze);class yn extends Y{constructor(t){super(),V(this,t,pn,gn,i,{search:1})}}const{window:bn}=j;function _n(e){let n;return{c(){n=d("DON'T PANIC")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function Mn(t){let e,n;return e=new yn({props:{search:t[1]}}),{c(){G(e.$$.fragment)},m(t,r){W(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.search=t[1]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vn(e){let n,r,o=e[0],s=wn(e);return{c(){s.c(),n=m()},m(t,e){s.m(t,e),l(t,n,e),r=!0},p(e,r){1&r&&i(o,o=e[0])?(B(),F(s,1,1,t),D(),s=wn(e),s.c(),P(s),s.m(n.parentNode,n)):s.p(e,r)},i(t){r||(P(s),r=!0)},o(t){F(s),r=!1},d(t){t&&a(n),s.d(t)}}}function wn(t){let e,n;return e=new be({props:{item:t[0]}}),{c(){G(e.$$.fragment)},m(t,r){W(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[0]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function In(t){let e,n,o,i,s,u,d,m,y,M,v,w,I;const O=[vn,Mn,_n],x=[];function E(t,e){return t[0]?0:t[1]?1:2}return y=E(t),M=x[y]=O[y](t),{c(){e=h("header"),n=h("nav"),o=h("div"),o.innerHTML="<strong>Hitchhiker&#39;s Guide to the Cataclysm</strong>",i=f(),s=h("div"),u=h("input"),d=f(),m=h("main"),M.c(),_(u,"margin","0"),_(u,"width","100%"),p(u,"placeholder","Search..."),_(s,"flex","0.8"),p(n,"class","svelte-18o3evd"),p(e,"class","svelte-18o3evd"),p(m,"class","svelte-18o3evd")},m(r,a){l(r,e,a),c(e,n),c(n,o),c(n,i),c(n,s),c(s,u),b(u,t[1]),l(r,d,a),l(r,m,a),x[y].m(m,null),v=!0,w||(I=[g(bn,"hashchange",t[2]),g(u,"input",t[4]),g(u,"input",t[3])],w=!0)},p(t,[e]){2&e&&u.value!==t[1]&&b(u,t[1]);let n=y;y=E(t),y===n?x[y].p(t,e):(B(),F(x[n],1,1,(()=>{x[n]=null})),D(),M=x[y],M?M.p(t,e):(M=x[y]=O[y](t),M.c()),P(M,1),M.m(m,null))},i(t){v||(P(M),v=!0)},o(t){F(M),v=!1},d(t){t&&a(e),t&&a(d),t&&a(m),x[y].d(),w=!1,r(I)}}}function On(t,e,n){let r=null;function o(){const t=window.location.hash.slice(1);let e;if(e=/^\/([^\/]+)\/(.+)$/.exec(t)){const[,t,o]=e;n(0,r={type:t,id:o}),window.scrollTo(0,0)}else n(0,r=null)}w(o);let i="";return[r,i,o,()=>{r&&history.pushState(null,"",location.href.replace(/#.*$/,"")),n(0,r=null)},function(){i=this.value,n(1,i)}]}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("service-worker.js").catch((t=>{console.log("ServiceWorker registration failed: ",t)}))}));return new class extends Y{constructor(t){super(),V(this,t,On,In,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
