!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function f(){return p("")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function _(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let b;function x(t){b=t}function E(){if(!b)throw new Error("Function called outside component initialization");return b}function S(t){return E().$$.context.get(t)}const w=[],T=[],O=[],k=[],I=Promise.resolve();let C=!1;function M(t){O.push(t)}let R=!1;const A=new Set;function N(){if(!R){R=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];x(e),L(e.$$)}for(x(null),w.length=0;T.length;)T.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];A.has(e)||(A.add(e),e())}O.length=0}while(w.length);for(;k.length;)k.pop()();C=!1,R=!1,A.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const j=new Set;let D;function $(){D={r:0,c:[],p:D}}function P(){D.r||r(D.c),D=D.p}function F(t,e){t&&t.i&&(j.delete(t),t.i(e))}function B(t,e,n,r){if(t&&t.o){if(j.has(t))return;j.add(t),D.c.push((()=>{j.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const U="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function H(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function q(t){t&&t.c()}function W(t,n,o,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,o),s||M((()=>{const n=c.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(M)}function G(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,I.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,i,o,s,a,c,u=[-1]){const d=b;x(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let h=!1;if(p.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),h&&Y(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();i.intro&&F(e.$$.fragment),W(e,i.target,i.anchor,i.customElement),N()}x(d)}class J{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const V=[];function K(e,n=t){let r;const i=[];function s(t){if(o(e,t)&&(e=t,r)){const t=!V.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),V.push(n,e)}if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a=t){const c=[o,a];return i.push(c),1===i.length&&(r=n(s)||t),o(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const X=new Map([["AMMO","item"],["GUN","item"],["ARMOR","item"],["PET_ARMOR","item"],["TOOL","item"],["TOOLMOD","item"],["TOOL_ARMOR","item"],["BOOK","item"],["COMESTIBLE","item"],["ENGINE","item"],["WHEEL","item"],["GUNMOD","item"],["MAGAZINE","item"],["BATTERY","item"],["GENERIC","item"],["BIONIC_ITEM","item"],["MONSTER","monster"]]),Z=t=>{var e;return null!==(e=X.get(t))&&void 0!==e?e:t},Q=t=>{var e,n;return(null==t?void 0:t.name)?"string"==typeof t.name?t.name:null!==(e=t.name.str_sp)&&void 0!==e?e:t.name.str:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract};class tt{constructor(t){this._byType=new Map,this._byTypeById=new Map,this._abstractsByType=new Map,this._toolReplacements=new Map,this._craftingPseudoItems=new Map,this._migrations=new Map,this._raw=t;for(const e of t){if(!Object.hasOwnProperty.call(e,"type"))continue;if("MIGRATION"===e.type){for(const t of"string"==typeof e.id?[e.id]:e.id){const{replace:n}=e;this._migrations.set(t,n)}continue}const t=Z(e.type);if(this._byType.has(t)||this._byType.set(t,[]),this._byType.get(t).push(e),Object.hasOwnProperty.call(e,"id")&&(this._byTypeById.has(t)||this._byTypeById.set(t,new Map),this._byTypeById.get(t).set(e.id,e)),"recipe"===e.type&&Object.hasOwnProperty.call(e,"result")){this._byTypeById.has(t)||this._byTypeById.set(t,new Map);const n=e.result+(e.id_suffix?"_"+e.id_suffix:"");this._byTypeById.get(t).set(n,e)}Object.hasOwnProperty.call(e,"abstract")&&(this._abstractsByType.has(t)||this._abstractsByType.set(t,new Map),this._abstractsByType.get(t).set(e.abstract,e)),"TOOL"===e.type&&Object.hasOwnProperty.call(e,"sub")&&(this._toolReplacements.has(e.sub)||this._toolReplacements.set(e.sub,[]),this._toolReplacements.get(e.sub).push(e.id)),Object.hasOwnProperty.call(e,"crafting_pseudo_item")&&this._craftingPseudoItems.set(e.crafting_pseudo_item,e.id)}}byId(t,e){var n;if("string"!=typeof e)throw new Error("Requested non-string id");if("item"===t&&this._migrations.has(e))return this.byId(t,this._migrations.get(e));const r=null===(n=this._byTypeById.get(t))||void 0===n?void 0:n.get(e);return r?this._flatten(r):void 0}byType(t){var e;return null!==(e=this._byType.get(t))&&void 0!==e?e:[]}replacementTools(t){var e;return null!==(e=this._toolReplacements.get(t))&&void 0!==e?e:[]}craftingPseudoItem(t){return this._craftingPseudoItems.get(t)}all(){return this._raw}_flatten(t){var e,n,r,i,o,s,a,c;const l="copy-from"in t?null!==(n=null===(e=this._byTypeById.get(Z(t.type)))||void 0===e?void 0:e.get(t["copy-from"]))&&void 0!==n?n:null===(r=this._abstractsByType.get(Z(t.type)))||void 0===r?void 0:r.get(t["copy-from"]):null;if("copy-from"in t&&!l&&console.error(`Missing parent in ${null!==(i=t.id)&&void 0!==i?i:t.abstract}`),!l)return t;const u=Object.assign(Object.assign({},this._flatten(l)),t);for(const t of Object.keys(null!==(o=u.relative)&&void 0!==o?o:{}))"number"==typeof u.relative[t]&&(u[t]+=u.relative[t]);delete u.relative;for(const t of Object.keys(null!==(s=u.proportional)&&void 0!==s?s:{}))"number"==typeof u.proportional[t]&&("attack_cost"!==t||t in u||(u[t]=100),u[t]*=u.proportional[t],u[t]=0|u[t]);delete u.proportional;for(const t of Object.keys(null!==(a=u.extend)&&void 0!==a?a:{}))Array.isArray(u.extend[t])&&(u[t]=(null!==(c=u[t])&&void 0!==c?c:[]).concat(u.extend[t]));return delete u.extend,u}}const et=(()=>{let t;return()=>(t||(t=(async()=>{const t=await fetch("https://raw.githubusercontent.com/nornagon/cdda-data/main/data/latest/all.json");if(console.log(t),!t.ok)throw new Error(`Error ${t.status} (${t.statusText}) fetching data`);const e=await t.json();return new tt(e.data)})()),t)})(),nt=function(t,e){return{subscribe:K(t,e).subscribe}}(null,(function(t){et().then(t)}));function rt(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function it(t,e,n){const r=t.slice();return r[8]=e[n],r[7]=n,r}function ot(t,e,n){const r=t.slice();return r[10]=e[n],r}function st(e){let n,r,i,o=e[10].name+"";return{c(){n=d("li"),r=d("a"),i=p(o),g(r,"href","#/material/"+e[10].id)},m(t,e){c(t,n,e),a(n,r),a(r,i)},p:t,d(t){t&&l(n)}}}function at(t){let e,n,r,i=t[0].special_attacks,o=[];for(let e=0;e<i.length;e+=1)o[e]=ct(it(t,i,e));return{c(){e=d("dt"),e.textContent="Special attacks:",n=d("dd"),r=d("ul");for(let t=0;t<o.length;t+=1)o[t].c();g(r,"class","no-bullets")},m(t,i){c(t,e,i),c(t,n,i),a(n,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,e){if(1&e){let n;for(i=t[0].special_attacks,n=0;n<i.length;n+=1){const s=it(t,i,n);o[n]?o[n].p(s,e):(o[n]=ct(s),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&l(e),t&&l(n),u(o,t)}}}function ct(t){let e,n,r=vt(t[8])+"";return{c(){e=d("li"),n=p(r)},m(t,r){c(t,e,r),a(e,n)},p(t,e){1&e&&r!==(r=vt(t[8])+"")&&y(n,r)},d(t){t&&l(e)}}}function lt(t){let e,n,r,i=t[0].anger_triggers.join(", ")+"";return{c(){e=d("dt"),e.textContent="Anger triggers",n=d("dd"),r=p(i)},m(t,i){c(t,e,i),c(t,n,i),a(n,r)},p(t,e){1&e&&i!==(i=t[0].anger_triggers.join(", ")+"")&&y(r,i)},d(t){t&&l(e),t&&l(n)}}}function ut(t){let e,n,r,i=t[0].placate_triggers.join(", ")+"";return{c(){e=d("dt"),e.textContent="Placate triggers",n=d("dd"),r=p(i)},m(t,i){c(t,e,i),c(t,n,i),a(n,r)},p(t,e){1&e&&i!==(i=t[0].placate_triggers.join(", ")+"")&&y(r,i)},d(t){t&&l(e),t&&l(n)}}}function dt(t){let e;return{c(){e=p(", ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function pt(t){let e,n,r,i,o=t[5]+"",s=t[7]<t[0].flags.length-1&&dt();return{c(){e=d("abbr"),n=p(o),s&&s.c(),i=f(),g(e,"title",r=t[1][t[5]])},m(t,r){c(t,e,r),a(e,n),s&&s.m(t,r),c(t,i,r)},p(t,a){1&a&&o!==(o=t[5]+"")&&y(n,o),1&a&&r!==(r=t[1][t[5]])&&g(e,"title",r),t[7]<t[0].flags.length-1?s||(s=dt(),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(t){t&&l(e),s&&s.d(t),t&&l(i)}}}function ht(e){let n,r,i,o,s,m,v,b,x,E,S,w,T,O,k,I,C,M,R,A,N,L,j,D,$,P,F,B,U,H,q,W,G,Y,z,J,V,K,X,Z,tt,et,nt,it,ct,dt,ht,vt,_t,bt,xt,Et,St,wt,Tt,Ot,kt,It,Ct,Mt,Rt,At,Nt,Lt,jt,Dt,$t,Pt,Ft,Bt,Ut,Ht,qt,Wt,Gt,Yt,zt,Jt,Vt,Kt,Xt,Zt,Qt,te,ee,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,me,ge,ye,ve,_e,be,xe,Ee,Se,we,Te,Oe,ke=e[0].symbol+"",Ie=Q(e[0])+"",Ce=e[0].description+"",Me=ft(e[0])+"",Re=mt(ft(e[0]))+"",Ae=e[0].bodytype+"",Ne=(e[0].species??[]).join(", ")+"",Le=e[0].volume+"",je=e[0].weight+"",De=e[0].speed+"",$e=(e[0].melee_skill??0)+"",Pe=yt(e[0])+"",Fe=e[0].hp+"",Be=(e[0].dodge??0)+"",Ue=(e[0].armor_bash??0)+"",He=(e[0].armor_cut??0)+"",qe=(e[0].armor_stab??Math.floor(.8*(e[0].armor_cut??0)))+"",We=(e[0].armor_bullet??0)+"",Ge=(e[0].armor_acid??Math.floor(.5*(e[0].armor_cut??0)))+"",Ye=(e[0].armor_fire??0)+"",ze=e[0].aggression+"",Je=e[0].morale+"",Ve=(e[0].vision_day??40)+"",Ke=(e[0].vision_night??1)+"",Xe=e[0].default_faction+"",Ze=(e[0].death_function??[]).join(", ")+"",Qe=e[2],tn=[];for(let t=0;t<Qe.length;t+=1)tn[t]=st(ot(e,Qe,t));let en=e[0].special_attacks&&at(e),nn=e[0].anger_triggers&&lt(e),rn=e[0].placate_triggers&&ut(e),on=e[0].flags??[],sn=[];for(let t=0;t<on.length;t+=1)sn[t]=pt(rt(e,on,t));return{c(){n=d("h1"),r=d("span"),i=p(ke),s=h(),m=p(Ie),v=h(),b=d("section"),x=d("p"),E=p(Ce),S=h(),w=d("p"),T=p("Difficulty: "),O=p(Me),k=h(),I=d("span"),C=p("("),M=p(Re),R=p(")"),N=h(),L=d("section"),j=d("h1"),j.textContent="Body",D=h(),$=d("dl"),P=d("dt"),P.textContent="Body type",F=d("dd"),B=p(Ae),U=d("dt"),U.textContent="Species",H=d("dd"),q=p(Ne),W=d("dt"),W.textContent="Volume",G=d("dd"),Y=p(Le),z=d("dt"),z.textContent="Weight",J=d("dd"),V=p(je),K=d("dt"),K.textContent="Material",X=d("dd"),Z=d("ul");for(let t=0;t<tn.length;t+=1)tn[t].c();tt=h(),et=d("section"),nt=d("h1"),nt.textContent="Combat",it=h(),ct=d("div"),dt=d("dl"),ht=d("dt"),ht.textContent="Speed",vt=d("dd"),_t=p(De),bt=d("dt"),bt.textContent="Melee skill",xt=d("dd"),Et=p($e),St=d("dt"),St.textContent="Damage",wt=d("dd"),Tt=p(Pe),en&&en.c(),Ot=h(),kt=d("dl"),It=d("dt"),It.textContent="HP",Ct=d("dd"),Mt=p(Fe),Rt=d("dt"),Rt.textContent="Dodge",At=d("dd"),Nt=p(Be),Lt=d("dt"),Lt.textContent="Armor",jt=d("dd"),Dt=d("dl"),$t=d("dt"),$t.textContent="Bash",Pt=d("dd"),Ft=p(Ue),Bt=d("dt"),Bt.textContent="Cut",Ut=d("dd"),Ht=p(He),qt=d("dt"),qt.textContent="Stab",Wt=d("dd"),Gt=p(qe),Yt=d("dt"),Yt.textContent="Bullet",zt=d("dd"),Jt=p(We),Vt=d("dt"),Vt.textContent="Acid",Kt=d("dd"),Xt=p(Ge),Zt=d("dt"),Zt.textContent="Fire",Qt=d("dd"),te=p(Ye),ee=h(),ne=d("section"),re=d("h1"),re.textContent="Behavior",ie=h(),oe=d("dl"),se=d("dt"),se.textContent="Aggression",ae=d("dd"),ce=p(ze),le=d("dt"),le.textContent="Morale",ue=d("dd"),de=p(Je),pe=d("dt"),pe.textContent="Vision range",he=d("dd"),fe=p(Ve),me=p(" (day) / "),ge=p(Ke),ye=p(" (night)"),ve=d("dt"),ve.textContent="Default faction",_e=d("dd"),be=p(Xe),nn&&nn.c(),xe=f(),rn&&rn.c(),Ee=d("dt"),Ee.textContent="Flags",Se=d("dd");for(let t=0;t<sn.length;t+=1)sn[t].c();we=d("dt"),we.textContent="On death",Te=d("dd"),Oe=p(Ze),_(r,"font-family","monospace"),g(r,"class",o="c_"+e[0].color),g(I,"class",A="c_"+gt(ft(e[0]))+" fg_only"),g(Z,"class","comma-separated"),_(dt,"flex","1"),_(kt,"flex","1"),_(ct,"display","flex"),_(ct,"flex-direction","row"),_(ct,"align-items","start"),_(ct,"flex-wrap","wrap")},m(t,e){c(t,n,e),a(n,r),a(r,i),a(n,s),a(n,m),c(t,v,e),c(t,b,e),a(b,x),a(x,E),a(b,S),a(b,w),a(w,T),a(w,O),a(w,k),a(w,I),a(I,C),a(I,M),a(I,R),c(t,N,e),c(t,L,e),a(L,j),a(L,D),a(L,$),a($,P),a($,F),a(F,B),a($,U),a($,H),a(H,q),a($,W),a($,G),a(G,Y),a($,z),a($,J),a(J,V),a($,K),a($,X),a(X,Z);for(let t=0;t<tn.length;t+=1)tn[t].m(Z,null);c(t,tt,e),c(t,et,e),a(et,nt),a(et,it),a(et,ct),a(ct,dt),a(dt,ht),a(dt,vt),a(vt,_t),a(dt,bt),a(dt,xt),a(xt,Et),a(dt,St),a(dt,wt),a(wt,Tt),en&&en.m(dt,null),a(ct,Ot),a(ct,kt),a(kt,It),a(kt,Ct),a(Ct,Mt),a(kt,Rt),a(kt,At),a(At,Nt),a(kt,Lt),a(kt,jt),a(jt,Dt),a(Dt,$t),a(Dt,Pt),a(Pt,Ft),a(Dt,Bt),a(Dt,Ut),a(Ut,Ht),a(Dt,qt),a(Dt,Wt),a(Wt,Gt),a(Dt,Yt),a(Dt,zt),a(zt,Jt),a(Dt,Vt),a(Dt,Kt),a(Kt,Xt),a(Dt,Zt),a(Dt,Qt),a(Qt,te),c(t,ee,e),c(t,ne,e),a(ne,re),a(ne,ie),a(ne,oe),a(oe,se),a(oe,ae),a(ae,ce),a(oe,le),a(oe,ue),a(ue,de),a(oe,pe),a(oe,he),a(he,fe),a(he,me),a(he,ge),a(he,ye),a(oe,ve),a(oe,_e),a(_e,be),nn&&nn.m(oe,null),a(oe,xe),rn&&rn.m(oe,null),a(oe,Ee),a(oe,Se);for(let t=0;t<sn.length;t+=1)sn[t].m(Se,null);a(oe,we),a(oe,Te),a(Te,Oe)},p(t,[e]){if(1&e&&ke!==(ke=t[0].symbol+"")&&y(i,ke),1&e&&o!==(o="c_"+t[0].color)&&g(r,"class",o),1&e&&Ie!==(Ie=Q(t[0])+"")&&y(m,Ie),1&e&&Ce!==(Ce=t[0].description+"")&&y(E,Ce),1&e&&Me!==(Me=ft(t[0])+"")&&y(O,Me),1&e&&Re!==(Re=mt(ft(t[0]))+"")&&y(M,Re),1&e&&A!==(A="c_"+gt(ft(t[0]))+" fg_only")&&g(I,"class",A),1&e&&Ae!==(Ae=t[0].bodytype+"")&&y(B,Ae),1&e&&Ne!==(Ne=(t[0].species??[]).join(", ")+"")&&y(q,Ne),1&e&&Le!==(Le=t[0].volume+"")&&y(Y,Le),1&e&&je!==(je=t[0].weight+"")&&y(V,je),4&e){let n;for(Qe=t[2],n=0;n<Qe.length;n+=1){const r=ot(t,Qe,n);tn[n]?tn[n].p(r,e):(tn[n]=st(r),tn[n].c(),tn[n].m(Z,null))}for(;n<tn.length;n+=1)tn[n].d(1);tn.length=Qe.length}if(1&e&&De!==(De=t[0].speed+"")&&y(_t,De),1&e&&$e!==($e=(t[0].melee_skill??0)+"")&&y(Et,$e),1&e&&Pe!==(Pe=yt(t[0])+"")&&y(Tt,Pe),t[0].special_attacks?en?en.p(t,e):(en=at(t),en.c(),en.m(dt,null)):en&&(en.d(1),en=null),1&e&&Fe!==(Fe=t[0].hp+"")&&y(Mt,Fe),1&e&&Be!==(Be=(t[0].dodge??0)+"")&&y(Nt,Be),1&e&&Ue!==(Ue=(t[0].armor_bash??0)+"")&&y(Ft,Ue),1&e&&He!==(He=(t[0].armor_cut??0)+"")&&y(Ht,He),1&e&&qe!==(qe=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"")&&y(Gt,qe),1&e&&We!==(We=(t[0].armor_bullet??0)+"")&&y(Jt,We),1&e&&Ge!==(Ge=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"")&&y(Xt,Ge),1&e&&Ye!==(Ye=(t[0].armor_fire??0)+"")&&y(te,Ye),1&e&&ze!==(ze=t[0].aggression+"")&&y(ce,ze),1&e&&Je!==(Je=t[0].morale+"")&&y(de,Je),1&e&&Ve!==(Ve=(t[0].vision_day??40)+"")&&y(fe,Ve),1&e&&Ke!==(Ke=(t[0].vision_night??1)+"")&&y(ge,Ke),1&e&&Xe!==(Xe=t[0].default_faction+"")&&y(be,Xe),t[0].anger_triggers?nn?nn.p(t,e):(nn=lt(t),nn.c(),nn.m(oe,xe)):nn&&(nn.d(1),nn=null),t[0].placate_triggers?rn?rn.p(t,e):(rn=ut(t),rn.c(),rn.m(oe,Ee)):rn&&(rn.d(1),rn=null),3&e){let n;for(on=t[0].flags??[],n=0;n<on.length;n+=1){const r=rt(t,on,n);sn[n]?sn[n].p(r,e):(sn[n]=pt(r),sn[n].c(),sn[n].m(Se,null))}for(;n<sn.length;n+=1)sn[n].d(1);sn.length=on.length}1&e&&Ze!==(Ze=(t[0].death_function??[]).join(", ")+"")&&y(Oe,Ze)},i:t,o:t,d(t){t&&l(n),t&&l(v),t&&l(b),t&&l(N),t&&l(L),u(tn,t),t&&l(tt),t&&l(et),en&&en.d(),t&&l(ee),t&&l(ne),nn&&nn.d(),rn&&rn.d(),u(sn,t)}}}function ft(t){const{melee_skill:e=0,melee_dice:n=0,melee_cut:r=0,melee_dice_sides:i=0,dodge:o=0,armor_bash:s=-1,armor_cut:a=-1,diff:c=0,special_attacks:l=[],emit_fields:u=[],hp:d,speed:p,attack_cost:h=100,morale:f=0,aggression:m=0,vision_day:g=40,vision_night:y=1}=t;let v=(e+1)*n*(r+i)*.04+(o+1)*(3+s+a)*.04+(c+l.length+8*u.length);return v=Math.floor(v),v*=.01*(d+p-h+.1*(f+m))+.01*(g+2*y),Math.floor(v)}function mt(t){return t<3?"Minimal threat.":t<10?"Mildly dangerous.":t<20?"Dangerous.":t<30?"Very dangerous.":t<50?"Extremely dangerous.":"Fatally dangerous!"}function gt(t){return t<3||t<10?"light_gray":t<20?"light_red":"red"}function yt(t){let{melee_dice:e=0,melee_dice_sides:n=0,melee_damage:r,melee_cut:i}=t;return`${e}d${n}`}function vt(t){return Array.isArray(t)?t.length>1?`${t[0]} (cooldown: ${t[1]})`:t[0]:"type"in t?"cooldown"in t?`${t.type} (cooldown: ${t.cooldown})`:t.type:"id"in t?"damage_max_instance"in t?`${t.id}: ${t.damage_max_instance.map((t=>`(${t.damage_type} for ${t.amount} damage)`)).join(" ")}`:t.id:void 0}function _t(t,e,n){var r;let{item:i}=e,o=S("data");let s=(null!==(r=i.material)&&void 0!==r?r:[]).map((t=>o.byId("material",t)));return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,{SEES:"It can see you (and will run/follow)",HEARS:"It can hear you",GOODHEARING:"Pursues sounds more than most monsters",SMELLS:"It can smell you",KEENNOSE:"Keen sense of smell",STUMBLES:"Stumbles in its movement",WARM:"Warm blooded",NOHEAD:"Headshots not allowed!",HARDTOSHOOT:"It's one size smaller for ranged attacks, no less then creature_size::tiny",GRABS:"Its attacks may grab us!",BASHES:"Bashes down doors",DESTROYS:"Bashes down walls and more",BORES:"Tunnels through just about anything",POISON:"Poisonous to eat",VENOM:"Attack may poison the player",BADVENOM:"Attack may SEVERELY poison the player",PARALYZE:"Attack may paralyze the player with venom",WEBWALK:"Doesn't destroy webs",DIGS:"Digs through the ground",CAN_DIG:"Can dig and walk",FLIES:"Can fly (over water, etc)",AQUATIC:"Confined to water",SWIMS:"Treats water as 50 movement point terrain",ATTACKMON:"Attacks other monsters",ANIMAL:'Is an "animal" for purposes of the Animal Empath trait',PLASTIC:"Absorbs physical damage to a great degree",SUNDEATH:"Dies in full sunlight",ELECTRIC:"Shocks unarmed attackers",ACIDPROOF:"Immune to acid",ACIDTRAIL:"Leaves a trail of acid",SHORTACIDTRAIL:"Leaves an intermittent trail of acid",FIREPROOF:"Immune to fire",SLUDGEPROOF:"Ignores the effect of sludge trails",SLUDGETRAIL:"Causes monster to leave a sludge trap trail when moving",COLDPROOF:"Immune to cold damage",FIREY:"Burns stuff and is immune to fire",QUEEN:"When it dies, local populations start to die off too",ELECTRONIC:"e.g. a robot; affected by EMP blasts, and other stuff",FUR:"May produce fur when butchered",LEATHER:"May produce leather when butchered",WOOL:"May produce wool when butchered",BONES:"May produce bones and sinews when butchered; if combined with POISON flag, tainted bones, if combined with HUMAN, human bones",FAT:"May produce fat when butchered; if combined with POISON flag, tainted fat",CONSOLE_DESPAWN:"Despawns when a nearby console is properly hacked",IMMOBILE:"Doesn't move (e.g. turrets)",ID_CARD_DESPAWN:"Despawns when a science ID card is used on a nearby console",RIDEABLE_MECH:"A rideable mech that is immobile until ridden.",MILITARY_MECH:"A rideable mech that was designed for military work.",MECH_RECON_VISION:"This mech gives you IR night-vision.",MECH_DEFENSIVE:"This mech gives you thorough protection.",HIT_AND_RUN:"Flee for several turns after a melee attack",GUILT:"You feel guilty for killing it",PAY_BOT:"You can pay this bot to be your friend for a time",HUMAN:"It's a live human, as long as it's alive",NO_BREATHE:"Creature can't drown and is unharmed by gas, smoke, or poison",FLAMMABLE:"Monster catches fire, burns, and spreads fire to nearby objects",REVIVES:"Monster corpse will revive after a short period of time",CHITIN:"May produce chitin when butchered",VERMIN:'Obsolete flag labeling "nuisance" or "scenery" monsters, now used to prevent loading the same.',NOGIB:"Creature won't leave gibs / meat chunks when killed with huge damage.",LARVA:"Creature is a larva. Currently used for gib and blood handling.",ARTHROPOD_BLOOD:"Forces monster to bleed hemolymph.",ACID_BLOOD:"Makes monster bleed acid. Fun stuff! Does not automatically dissolve in a pool of acid on death.",BILE_BLOOD:"Makes monster bleed bile.",ABSORBS:"Consumes objects it moves over which gives bonus hp.",ABSORBS_SPLITS:"Consumes objects it moves over which gives bonus hp. If it gets enough bonus HP, it spawns a copy of itself.",CBM_CIV:"May produce a common CBM a power CBM when butchered.",CBM_POWER:"May produce a power CBM when butchered, independent of MF_CBM_wev.",CBM_SCI:"May produce a bionic from bionics_sci when butchered.",CBM_OP:"May produce a bionic from bionics_op when butchered, and the power storage is mk 2.",CBM_TECH:"May produce a bionic from bionics_tech when butchered.",CBM_SUBS:"May produce a bionic from bionics_subs when butchered.",FILTHY:"Any clothing it drops will be filthy.",FISHABLE:"It is fishable.",GROUP_BASH:"Monsters that can pile up against obstacles and add their strength together to break them.",SWARMS:"Monsters that like to group together and form loose packs",GROUP_MORALE:"Monsters that are more courageous when near friends",INTERIOR_AMMO:"Monster contain's its ammo inside itself, no need to load on launch. Prevents ammo from being dropped on disable.",CLIMBS:"Monsters that can climb certain terrain and furniture",PACIFIST:"Monsters that will never use melee attack, useful for having them use grab without attacking the player",PUSH_MON:"Monsters that can push creatures out of their way",PUSH_VEH:"Monsters that can push vehicles out of their way",NIGHT_INVISIBILITY:"Monsters that are invisible in poor light conditions",REVIVES_HEALTHY:"When revived, this monster has full hitpoints and speed",NO_NECRO:"This monster can't be revived by necros. It will still rise on its own.",AVOID_DANGER_1:"This monster will path around some dangers instead of through them.",AVOID_DANGER_2:"This monster will path around most dangers instead of through them.",AVOID_FIRE:"This monster will path around heat-related dangers instead of through them.",AVOID_FALL:"This monster will path around cliffs instead of off of them.",PRIORITIZE_TARGETS:"This monster will prioritize targets depending on their danger levels",NOT_HALLU:"Monsters that will NOT appear when player's producing hallucinations",CATFOOD:"This monster will become friendly when fed cat food.",CATTLEFODDER:"This monster will become friendly when fed cattle fodder.",BIRDFOOD:"This monster will become friendly when fed bird food.",CANPLAY:"This monster can be played with if it's a pet.",PET_MOUNTABLE:"This monster can be mounted and ridden when tamed.",PET_HARNESSABLE:"This monster can be harnessed when tamed.",DOGFOOD:"This monster will become friendly when fed dog food.",MILKABLE:"This monster is milkable.",SHEARABLE:"This monster is shearable.",NO_BREED:"This monster doesn't breed, even though it has breed data",PET_WONT_FOLLOW:"This monster won't follow the player automatically when tamed.",DRIPS_NAPALM:"This monster occasionally drips napalm on move",DRIPS_GASOLINE:"This monster occasionally drips gasoline on move",ELECTRIC_FIELD:"This monster is surrounded by an electrical field that ignites flammable liquids near it",LOUDMOVES:"This monster makes move noises as if ~2 sizes louder, even if flying.",CAN_OPEN_DOORS:"This monster can open doors.",STUN_IMMUNE:"This monster is immune to the stun effect",DROPS_AMMO:"This monster drops ammo. Should not be set for monsters that use pseudo ammo.",INSECTICIDEPROOF:"This monster is immune to insecticide, even though it's made of bug flesh",RANGED_ATTACKER:"This monster has any sort of ranged attack"},s]}class bt extends J{constructor(t){super(),z(this,t,_t,ht,o,{item:0})}}function xt(t,e,n){const r=t.slice();return r[13]=e[n],r}function Et(t,e,n){const r=t.slice();return r[16]=e[n].id,r[17]=e[n].item,r[18]=e[n].count,r[20]=n,r}function St(t,e,n){const r=t.slice();return r[21]=e[n],r}function wt(t,e,n){const r=t.slice();return r[24]=e[n],r[20]=n,r}function Tt(t,e,n){const r=t.slice();return r[26]=e[n],r}function Ot(t,e,n){const r=t.slice();return r[29]=e[n],r[20]=n,r}function kt(t,e,n){const r=t.slice();return r[31]=e[n],r}function It(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r[20]=n,r}function Ct(e){let n;return{c(){n=p("none")},m(t,e){c(t,n,e)},p:t,d(t){t&&l(n)}}}function Mt(t){let e,n,r,i,o,s,u=Q(t[1].byId("skill",t[0].skill_used))+"",h=(t[0].difficulty??0)+"";return{c(){e=d("a"),n=p(u),i=p(" ("),o=p(h),s=p(")"),g(e,"href",r="#/skill/"+t[0].skill_used)},m(t,r){c(t,e,r),a(e,n),c(t,i,r),c(t,o,r),c(t,s,r)},p(t,i){1&i[0]&&u!==(u=Q(t[1].byId("skill",t[0].skill_used))+"")&&y(n,u),1&i[0]&&r!==(r="#/skill/"+t[0].skill_used)&&g(e,"href",r),1&i[0]&&h!==(h=(t[0].difficulty??0)+"")&&y(o,h)},d(t){t&&l(e),t&&l(i),t&&l(o),t&&l(s)}}}function Rt(t){let e;return{c(){e=p("none")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function At(t){let e;return{c(){e=p(", ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Nt(t){let e;return{c(){e=p(" and ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Lt(e){let n,r,i,o,s,u,h=Q(e[1].byId("skill",e[34]))+"",m=e[35]+"";let y=function(t,e){return t[20]===t[5].length-2?Nt:t[20]!==t[5].length-1?At:void 0}(e),v=y&&y(e);return{c(){n=d("a"),r=p(h),i=p(" ("),o=p(m),s=p(")"),v&&v.c(),u=f(),g(n,"href","#/skill/"+e[34])},m(t,e){c(t,n,e),a(n,r),c(t,i,e),c(t,o,e),c(t,s,e),v&&v.m(t,e),c(t,u,e)},p:t,d(t){t&&l(n),t&&l(i),t&&l(o),t&&l(s),v&&v.d(t),t&&l(u)}}}function jt(t){let e,n,r,i,o=t[0].proficiencies??[],s=[];for(let e=0;e<o.length;e+=1)s[e]=Dt(kt(t,o,e));return{c(){e=d("dt"),e.textContent="Proficiencies",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","svelte-k9dy74")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(3&e[0]){let n;for(o=t[0].proficiencies??[],n=0;n<o.length;n+=1){const i=kt(t,o,n);s[n]?s[n].p(i,e):(s[n]=Dt(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}function Dt(t){let e,n,r,i,o=Q(t[1].byId("proficiency",t[31].proficiency))+"";return{c(){e=d("li"),n=d("a"),r=p(o),g(n,"href",i="#/proficiency/"+t[31].proficiency)},m(t,i){c(t,e,i),a(e,n),a(n,r)},p(t,e){1&e[0]&&o!==(o=Q(t[1].byId("proficiency",t[31].proficiency))+"")&&y(r,o),1&e[0]&&i!==(i="#/proficiency/"+t[31].proficiency)&&g(n,"href",i)},d(t){t&&l(e)}}}function $t(t){let e,n,r,i=t[0].charges+"";return{c(){e=d("dt"),e.textContent="Recipe makes",n=d("dd"),r=p(i)},m(t,i){c(t,e,i),c(t,n,i),a(n,r)},p(t,e){1&e[0]&&i!==(i=t[0].charges+"")&&y(r,i)},d(t){t&&l(e),t&&l(n)}}}function Pt(e){let n,r,i,o,s,u,f,m,y,v,_,b=(e[29].amount??1)+"",x=1===(e[29].amount??1)?"":"s",E=Q(e[1].byId("tool_quality",e[29].id))+"",S=e[29].level+"",w=0!==e[20]&&function(t){let e;return{c(){e=p(" OR ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}();return{c(){w&&w.c(),n=h(),r=p(b),i=p(" tool"),o=p(x),s=p(" with "),u=d("a"),f=p(E),m=p(" of "),y=p(S),v=p(" or more"),_=p(""),g(u,"href","#/tool_quality/"+e[29].id)},m(t,e){w&&w.m(t,e),c(t,n,e),c(t,r,e),c(t,i,e),c(t,o,e),c(t,s,e),c(t,u,e),a(u,f),c(t,m,e),c(t,y,e),c(t,v,e),c(t,_,e)},p:t,d(t){w&&w.d(t),t&&l(n),t&&l(r),t&&l(i),t&&l(o),t&&l(s),t&&l(u),t&&l(m),t&&l(y),t&&l(v),t&&l(_)}}}function Ft(t){let e,n,r=t[26],i=[];for(let e=0;e<r.length;e+=1)i[e]=Pt(Ot(t,r,e));return{c(){e=d("li");for(let t=0;t<i.length;t+=1)i[t].c();n=p(".")},m(t,r){c(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);a(e,n)},p(t,o){if(18&o[0]){let s;for(r=t[26],s=0;s<r.length;s+=1){const a=Ot(t,r,s);i[s]?i[s].p(a,o):(i[s]=Pt(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d(t){t&&l(e),u(i,t)}}}function Bt(e){let n,r,i=Q(e[1].byId("item",e[24].id))+"";return{c(){n=d("a"),r=p(i),g(n,"href","#/item/"+e[24].id)},m(t,e){c(t,n,e),a(n,r)},p:t,d(t){t&&l(n)}}}function Ut(e){let n,r,i=Q(e[1].byId("item",e[24].id))+"";return{c(){n=d("a"),r=p(i),g(n,"href","#/furniture/"+e[1].craftingPseudoItem(e[24].id))},m(t,e){c(t,n,e),a(n,r)},p:t,d(t){t&&l(n)}}}function Ht(e){let n,r,i,o,s=e[24].count+"",a=1!==e[24].count&&function(t){let e;return{c(){e=p("s")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}();return{c(){n=p("("),r=p(s),i=p(" charge"),a&&a.c(),o=p(")")},m(t,e){c(t,n,e),c(t,r,e),c(t,i,e),a&&a.m(t,e),c(t,o,e)},p:t,d(t){t&&l(n),t&&l(r),t&&l(i),a&&a.d(t),t&&l(o)}}}function qt(t){let e,n,r,i=0!==t[20]&&function(t){let e;return{c(){e=p(" OR ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}();let o=function(t,e){return t[1].craftingPseudoItem(t[24].id)?Ut:Bt}(t)(t),s=t[24].count>0&&Ht(t);return{c(){i&&i.c(),e=h(),o.c(),n=h(),s&&s.c(),r=f()},m(t,a){i&&i.m(t,a),c(t,e,a),o.m(t,a),c(t,n,a),s&&s.m(t,a),c(t,r,a)},p(t,e){o.p(t,e),t[24].count>0&&s.p(t,e)},d(t){i&&i.d(t),t&&l(e),o.d(t),t&&l(n),s&&s.d(t),t&&l(r)}}}function Wt(t){let e,n,r=t[21],i=[];for(let e=0;e<r.length;e+=1)i[e]=qt(wt(t,r,e));return{c(){e=d("li");for(let t=0;t<i.length;t+=1)i[t].c();n=h()},m(t,r){c(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);a(e,n)},p(t,o){if(6&o[0]){let s;for(r=t[21],s=0;s<r.length;s+=1){const a=wt(t,r,s);i[s]?i[s].p(a,o):(i[s]=qt(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d(t){t&&l(e),u(i,t)}}}function Gt(e){let n,r,i,o=!e[6](e[17]),s=(1===e[18]||e[6](e[17])?Q(e[17]):(null==(u=e[17])?void 0:u.name)?"string"==typeof u.name?u.name:null!==(y=null!==(m=u.name.str_sp)&&void 0!==m?m:u.name.str_pl)&&void 0!==y?y:u.name.str+"s":null!==(v=null==u?void 0:u.id)&&void 0!==v?v:null==u?void 0:u.abstract)+"";var u,m,y,v;let _,b,x,E=e[6](e[17]),S=0!==e[20]&&function(t){let e;return{c(){e=p(" OR ")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}(),w=o&&function(e){let n,r=e[18]+"";return{c(){n=p(r)},m(t,e){c(t,n,e)},p:t,d(t){t&&l(n)}}}(e),T=E&&function(e){let n,r,i,o=e[18]+"";return{c(){n=p("("),r=p(o),i=p(")")},m(t,e){c(t,n,e),c(t,r,e),c(t,i,e)},p:t,d(t){t&&l(n),t&&l(r),t&&l(i)}}}(e);return{c(){S&&S.c(),n=h(),w&&w.c(),r=h(),i=d("a"),_=p(s),b=h(),T&&T.c(),x=f(),g(i,"href","#/item/"+e[16])},m(t,e){S&&S.m(t,e),c(t,n,e),w&&w.m(t,e),c(t,r,e),c(t,i,e),a(i,_),c(t,b,e),T&&T.m(t,e),c(t,x,e)},p(t,e){o&&w.p(t,e),E&&T.p(t,e)},d(t){S&&S.d(t),t&&l(n),w&&w.d(t),t&&l(r),t&&l(i),t&&l(b),T&&T.d(t),t&&l(x)}}}function Yt(t){let e,n,r=t[13].map(t[7]),i=[];for(let e=0;e<r.length;e+=1)i[e]=Gt(Et(t,r,e));return{c(){e=d("li");for(let t=0;t<i.length;t+=1)i[t].c();n=h()},m(t,r){c(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);a(e,n)},p(t,o){if(74&o[0]){let s;for(r=t[13].map(t[7]),s=0;s<r.length;s+=1){const a=Et(t,r,s);i[s]?i[s].p(a,o):(i[s]=Gt(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d(t){t&&l(e),u(i,t)}}}function zt(e){let n,r,i,o,s,m,v,_,b,x,E,S,w,T,O,k,I,C=e[0].time+"",M=JSON.stringify(e[0],null,2)+"";function R(t,e){return t[0].skill_used?Mt:Ct}let A=R(e),N=A(e),L=e[5].length&&function(t){let e,n,r,i=t[5],o=[];for(let e=0;e<i.length;e+=1)o[e]=Lt(It(t,i,e));let s=null;return i.length||(s=Rt()),{c(){e=d("dt"),e.textContent="Other skills",n=d("dd");for(let t=0;t<o.length;t+=1)o[t].c();s&&s.c(),r=h()},m(t,i){c(t,e,i),c(t,n,i);for(let t=0;t<o.length;t+=1)o[t].m(n,null);s&&s.m(n,null),a(n,r)},p(t,e){if(34&e[0]){let a;for(i=t[5],a=0;a<i.length;a+=1){const s=It(t,i,a);o[a]?o[a].p(s,e):(o[a]=Lt(s),o[a].c(),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length,i.length?s&&(s.d(1),s=null):s||(s=Rt(),s.c(),s.m(n,r))}},d(t){t&&l(e),t&&l(n),u(o,t),s&&s.d()}}}(e),j=e[0].proficiencies&&jt(e),D=e[0].charges&&$t(e),$=((e[4]??[]).length||e[2].length)&&function(t){let e,n,r,i,o,s=t[4]??[],p=[];for(let e=0;e<s.length;e+=1)p[e]=Ft(Tt(t,s,e));let f=t[2],m=[];for(let e=0;e<f.length;e+=1)m[e]=Wt(St(t,f,e));return{c(){e=d("dt"),e.textContent="Tools required",n=d("dd"),r=d("ul");for(let t=0;t<p.length;t+=1)p[t].c();i=h();for(let t=0;t<m.length;t+=1)m[t].c();o=h(),g(r,"class","svelte-k9dy74")},m(t,s){c(t,e,s),c(t,n,s),a(n,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);a(r,i);for(let t=0;t<m.length;t+=1)m[t].m(r,null);a(n,o)},p(t,e){if(18&e[0]){let n;for(s=t[4]??[],n=0;n<s.length;n+=1){const o=Tt(t,s,n);p[n]?p[n].p(o,e):(p[n]=Ft(o),p[n].c(),p[n].m(r,i))}for(;n<p.length;n+=1)p[n].d(1);p.length=s.length}if(6&e[0]){let n;for(f=t[2],n=0;n<f.length;n+=1){const i=St(t,f,n);m[n]?m[n].p(i,e):(m[n]=Wt(i),m[n].c(),m[n].m(r,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=f.length}},d(t){t&&l(e),t&&l(n),u(p,t),u(m,t)}}}(e),P=e[3].length&&function(t){let e,n,r,i=t[3],o=[];for(let e=0;e<i.length;e+=1)o[e]=Yt(xt(t,i,e));return{c(){e=d("dt"),e.textContent="Components",n=d("dd"),r=d("ul");for(let t=0;t<o.length;t+=1)o[t].c();g(r,"class","svelte-k9dy74")},m(t,i){c(t,e,i),c(t,n,i),a(n,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,e){if(74&e[0]){let n;for(i=t[3],n=0;n<i.length;n+=1){const s=xt(t,i,n);o[n]?o[n].p(s,e):(o[n]=Yt(s),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&l(e),t&&l(n),u(o,t)}}}(e);return{c(){n=d("section"),r=d("dl"),i=d("dt"),i.textContent="Primary skill",o=d("dd"),N.c(),s=h(),L&&L.c(),m=f(),j&&j.c(),v=d("dt"),v.textContent="Time to complete",_=d("dd"),b=p(C),D&&D.c(),x=f(),$&&$.c(),E=f(),P&&P.c(),S=h(),w=d("details"),T=d("summary"),T.textContent="Recipe JSON",O=h(),k=d("pre"),I=p(M),g(n,"class","recipe")},m(t,e){c(t,n,e),a(n,r),a(r,i),a(r,o),N.m(o,null),a(o,s),L&&L.m(r,null),a(r,m),j&&j.m(r,null),a(r,v),a(r,_),a(_,b),D&&D.m(r,null),a(r,x),$&&$.m(r,null),a(r,E),P&&P.m(r,null),a(n,S),a(n,w),a(w,T),a(w,O),a(w,k),a(k,I)},p(t,e){A===(A=R(t))&&N?N.p(t,e):(N.d(1),N=A(t),N&&(N.c(),N.m(o,s))),t[5].length&&L.p(t,e),t[0].proficiencies?j?j.p(t,e):(j=jt(t),j.c(),j.m(r,v)):j&&(j.d(1),j=null),1&e[0]&&C!==(C=t[0].time+"")&&y(b,C),t[0].charges?D?D.p(t,e):(D=$t(t),D.c(),D.m(r,x)):D&&(D.d(1),D=null),((t[4]??[]).length||t[2].length)&&$.p(t,e),t[3].length&&P.p(t,e),1&e[0]&&M!==(M=JSON.stringify(t[0],null,2)+"")&&y(I,M)},i:t,o:t,d(t){t&&l(n),N.d(),L&&L.d(),j&&j.d(),D&&D.d(),$&&$.d(),P&&P.d()}}}function Jt(t,e,n){var r;let i=S("data"),{recipe:o}=e;function s(t,e){var n;const r=[];for(const o of t){const[t,a,c]=o;if("LIST"===c){const o=i.byId("requirement",t);"requirement"!==o.type&&console.error(`Expected a requirement, got ${o.type} (id=${o.id})`);const c=(null!==(n=e(o))&&void 0!==n?n:[])[0];r.push(...s(c,e).map((t=>Object.assign(Object.assign({},t),{count:t.count*a}))))}else r.push({id:t,count:a})}return r}function a(t){const e=i.replacementTools(t.id);return[t,...e.map((e=>({id:e,count:t.count})))]}function c(t,e){return t.map((t=>s(t,e))).map((t=>t.flatMap(a))).filter((t=>t.length))}let l=(null!==(r=o.using)&&void 0!==r?r:[]).map((([t,e])=>[i.byId("requirement",t),e])).concat([[o,1]]),u=l.flatMap((([t,e])=>{var n;return c(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools)).map((t=>t.map((t=>Object.assign(Object.assign({},t),{count:t.count*e})))))})),d=l.flatMap((([t,e])=>{var n;return c(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>Object.assign(Object.assign({},t),{count:t.count*e})))))})),p=l.flatMap((([t,e])=>{var n;return(null!==(n=t.qualities)&&void 0!==n?n:[]).map((t=>Array.isArray(t)?t:[t]))})),h=void 0===(f=o.skills_required)||0===f.length?[]:Array.isArray(f[0])?f:[f];var f;return t.$$set=t=>{"recipe"in t&&n(0,o=t.recipe)},[o,i,u,d,p,h,t=>"AMMO"===t.type||"COMESTIBLE"===t.type||t.stackable,t=>({...t,item:i.byId("item",t.id)})]}class Vt extends J{constructor(t){super(),z(this,t,Jt,zt,o,{recipe:0},[-1,-1])}}function Kt(t,e,n){const r=t.slice();return r[25]=e[n],r}function Xt(t,e,n){const r=t.slice();return r[28]=e[n],r}function Zt(t,e,n){const r=t.slice();return r[31]=e[n],r}function Qt(t,e,n){const r=t.slice();return r[0]=e[n],r}function te(t,e,n){const r=t.slice();return r[36]=e[n],r}function ee(t,e,n){const r=t.slice();return r[39]=e[n],r}function ne(t,e,n){const r=t.slice();return r[42]=e[n][0],r[43]=e[n][1],r}function re(t,e,n){const r=t.slice();return r[46]=e[n].quality,r[47]=e[n].level,r}function ie(t,e,n){const r=t.slice();return r[50]=e[n],r}function oe(t,e,n){const r=t.slice();return r[53]=e[n],r}function se(t,e,n){const r=t.slice();return r[56]=e[n].id,r[57]=e[n].max_charges,r}function ae(t,e,n){const r=t.slice();return r[60]=e[n],r}function ce(e){let n,r,i,o=e[60].name+"";return{c(){n=d("li"),r=d("a"),i=p(o),g(r,"href","#/material/"+e[60].id)},m(t,e){c(t,n,e),a(n,r),a(r,i)},p:t,d(t){t&&l(n)}}}function le(t){let e,n,r,i,o,s,u,f,m=t[57]+"",v="GUN"===t[0].type?"rounds":"charges",_=Q(t[1].byId("ammunition_type",t[56]))+"";return{c(){e=d("li"),n=p(m),r=h(),i=p(v),o=p(" of "),s=d("a"),u=p(_),f=h(),g(s,"href","#/ammunition_type/"+t[56])},m(t,l){c(t,e,l),a(e,n),a(e,r),a(e,i),a(e,o),a(e,s),a(s,u),a(e,f)},p(t,e){1&e[0]&&v!==(v="GUN"===t[0].type?"rounds":"charges")&&y(i,v)},d(t){t&&l(e)}}}function ue(e){let n,r,i,o=Q(e[1].byId("item",e[53]))+"";return{c(){n=d("li"),r=d("a"),i=p(o),g(r,"href","#/item/"+e[53])},m(t,e){c(t,n,e),a(n,r),a(r,i)},p:t,d(t){t&&l(n)}}}function de(t){let e;return{c(){e=d("li"),e.innerHTML="<em>none</em>"},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function pe(e){let n,r,i,o=e[50].id+"";return{c(){n=d("li"),r=d("a"),i=p(o),g(r,"href","#/json_flag/"+e[50].id)},m(t,e){c(t,n,e),a(n,r),a(r,i)},p:t,d(t){t&&l(n)}}}function he(e){let n,r,i,o,s,u,f,m,y=e[47]+"",v=Q(e[46])+"";return{c(){n=d("li"),r=p("Has level "),i=d("strong"),o=p(y),s=h(),u=d("a"),f=p(v),m=p(" quality."),g(u,"href","#/tool_quality/"+e[46].id)},m(t,e){c(t,n,e),a(n,r),a(n,i),a(i,o),a(i,s),a(i,u),a(u,f),a(n,m)},p:t,d(t){t&&l(n)}}}function fe(t){let e,n,r,i,o,s,f,m,v,_,b,x,E,S,w,T,O,k,I,C,M,R,A,N,L,j,D,$,P,F,B,U,H,q,W,G,Y,z,J,V,K,X,Z,Q,tt,et,nt,rt,it,ot,st,at,ct=t[12]("head"),lt=t[12]("eyes"),ut=t[12]("mouth"),dt=t[12]("torso"),pt=(t[0].encumbrance??0)+"",ht=(t[0].warmth??0)+"",ft=(t[0].coverage??0)+"",mt=(t[4].reduce(Ue,0)*t[0].material_thickness/t[4].length).toFixed(2)+"",gt=(t[4].reduce(He,0)*t[0].material_thickness/t[4].length).toFixed(2)+"",yt=(t[4].reduce(qe,0)*t[0].material_thickness/t[4].length).toFixed(2)+"",vt=t[15]().toFixed(2)+"",_t=t[16]().toFixed(2)+"",bt=(t[0].environmental_protection??0)+"",xt=ct&&function(t){let e,n,r;return{c(){e=p("The "),n=d("strong"),n.textContent="head",r=p(".")},m(t,i){c(t,e,i),c(t,n,i),c(t,r,i)},d(t){t&&l(e),t&&l(n),t&&l(r)}}}(),Et=lt&&function(t){let e,n,r;return{c(){e=p("The "),n=d("strong"),n.textContent="eyes",r=p(".")},m(t,i){c(t,e,i),c(t,n,i),c(t,r,i)},d(t){t&&l(e),t&&l(n),t&&l(r)}}}(),St=ut&&function(t){let e,n,r;return{c(){e=p("The "),n=d("strong"),n.textContent="mouth",r=p(".")},m(t,i){c(t,e,i),c(t,n,i),c(t,r,i)},d(t){t&&l(e),t&&l(n),t&&l(r)}}}(),wt=dt&&function(t){let e,n,r;return{c(){e=p("The "),n=d("strong"),n.textContent="torso",r=p(".")},m(t,i){c(t,e,i),c(t,n,i),c(t,r,i)},d(t){t&&l(e),t&&l(n),t&&l(r)}}}(),Tt=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],Ot=[];for(let e=0;e<4;e+=1)Ot[e]=_e(ne(t,Tt,e));let kt=!t[13]&&function(t){let e;return{c(){e=p("Nothing.")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}(),It=t[0].max_encumbrance&&be(t);function Ct(t,e){return(null==L||1&e[0])&&(L=!!(t[0].flags??[]).includes("PERSONAL")),L?ke:((null==j||1&e[0])&&(j=!!(t[0].flags??[]).includes("SKINTIGHT")),j?Oe:((null==D||1&e[0])&&(D=!!(t[0].flags??[]).includes("BELTED")),D?Te:((null==$||1&e[0])&&($=!!(t[0].flags??[]).includes("OUTER")),$?we:((null==P||1&e[0])&&(P=!!(t[0].flags??[]).includes("WAIST")),P?Se:((null==F||1&e[0])&&(F=!!(t[0].flags??[]).includes("AURA")),F?Ee:xe)))))}let Mt=Ct(t,[-1]),Rt=Mt(t);return{c(){e=d("section"),n=d("h1"),n.textContent="Armor",r=h(),i=d("dl"),o=d("dt"),o.textContent="Covers",s=d("dd"),xt&&xt.c(),f=h(),Et&&Et.c(),m=h(),St&&St.c(),v=h(),wt&&wt.c(),_=h();for(let t=0;t<4;t+=1)Ot[t].c();b=h(),kt&&kt.c(),x=h(),E=d("dt"),E.textContent="Encumbrance",S=d("dd"),w=p(pt),It&&It.c(),T=d("dt"),T.textContent="Warmth",O=d("dd"),k=p(ht),I=d("dt"),I.textContent="Coverage",C=d("dd"),M=p(ft),R=p("%"),A=d("dt"),A.textContent="Layer",N=d("dd"),Rt.c(),B=h(),U=d("dt"),U.textContent="Protection",H=d("dd"),q=d("dl"),W=d("dt"),W.textContent="Bash",G=d("dd"),Y=p(mt),z=d("dt"),z.textContent="Cut",J=d("dd"),V=p(gt),K=d("dt"),K.textContent="Ballistic",X=d("dd"),Z=p(yt),Q=d("dt"),Q.textContent="Acid",tt=d("dd"),et=p(vt),nt=d("dt"),nt.textContent="Fire",rt=d("dd"),it=p(_t),ot=d("dt"),ot.textContent="Environ.",st=d("dd"),at=p(bt),g(I,"title","This determines how likely it is that an attack hits the item instead of the player."),g(ot,"title","Environmental")},m(t,l){c(t,e,l),a(e,n),a(e,r),a(e,i),a(i,o),a(i,s),xt&&xt.m(s,null),a(s,f),Et&&Et.m(s,null),a(s,m),St&&St.m(s,null),a(s,v),wt&&wt.m(s,null),a(s,_);for(let t=0;t<4;t+=1)Ot[t].m(s,null);a(s,b),kt&&kt.m(s,null),a(s,x),a(i,E),a(i,S),a(S,w),It&&It.m(S,null),a(i,T),a(i,O),a(O,k),a(i,I),a(i,C),a(C,M),a(C,R),a(i,A),a(i,N),Rt.m(N,null),a(N,B),a(i,U),a(i,H),a(H,q),a(q,W),a(q,G),a(G,Y),a(q,z),a(q,J),a(J,V),a(q,K),a(q,X),a(X,Z),a(q,Q),a(q,tt),a(tt,et),a(q,nt),a(q,rt),a(rt,it),a(q,ot),a(q,st),a(st,at)},p(t,e){if(4097&e[0]){let n;for(Tt=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],n=0;n<4;n+=1){const r=ne(t,Tt,n);Ot[n]?Ot[n].p(r,e):(Ot[n]=_e(r),Ot[n].c(),Ot[n].m(s,b))}for(;n<4;n+=1)Ot[n].d(1)}1&e[0]&&pt!==(pt=(t[0].encumbrance??0)+"")&&y(w,pt),t[0].max_encumbrance?It?It.p(t,e):(It=be(t),It.c(),It.m(S,null)):It&&(It.d(1),It=null),1&e[0]&&ht!==(ht=(t[0].warmth??0)+"")&&y(k,ht),1&e[0]&&ft!==(ft=(t[0].coverage??0)+"")&&y(M,ft),Mt!==(Mt=Ct(t,e))&&(Rt.d(1),Rt=Mt(t),Rt&&(Rt.c(),Rt.m(N,B))),1&e[0]&&mt!==(mt=(t[4].reduce(Ue,0)*t[0].material_thickness/t[4].length).toFixed(2)+"")&&y(Y,mt),1&e[0]&&gt!==(gt=(t[4].reduce(He,0)*t[0].material_thickness/t[4].length).toFixed(2)+"")&&y(V,gt),1&e[0]&&yt!==(yt=(t[4].reduce(qe,0)*t[0].material_thickness/t[4].length).toFixed(2)+"")&&y(Z,yt),1&e[0]&&vt!==(vt=t[15]().toFixed(2)+"")&&y(et,vt),1&e[0]&&_t!==(_t=t[16]().toFixed(2)+"")&&y(it,_t),1&e[0]&&bt!==(bt=(t[0].environmental_protection??0)+"")&&y(at,bt)},d(t){t&&l(e),xt&&xt.d(),Et&&Et.d(),St&&St.d(),wt&&wt.d(),u(Ot,t),kt&&kt.d(),It&&It.d(),Rt.d()}}}function me(t){let e,n,r,i,o;return{c(){e=p("The "),n=d("strong"),r=p("right "),i=p(t[42]),o=p(".")},m(t,s){c(t,e,s),c(t,n,s),a(n,r),a(n,i),c(t,o,s)},d(t){t&&l(e),t&&l(n),t&&l(o)}}}function ge(t){let e,n,r,i,o;return{c(){e=p("The "),n=d("strong"),r=p("left "),i=p(t[42]),o=p(".")},m(t,s){c(t,e,s),c(t,n,s),a(n,r),a(n,i),c(t,o,s)},d(t){t&&l(e),t&&l(n),t&&l(o)}}}function ye(t){let e,n,r,i;return{c(){e=p("The "),n=d("strong"),r=p(t[43]),i=p(".")},m(t,o){c(t,e,o),c(t,n,o),a(n,r),c(t,i,o)},d(t){t&&l(e),t&&l(n),t&&l(i)}}}function ve(t){let e,n,r,i;return{c(){e=p("Either "),n=d("strong"),r=p(t[42]),i=p(".")},m(t,o){c(t,e,o),c(t,n,o),a(n,r),c(t,i,o)},d(t){t&&l(e),t&&l(n),t&&l(i)}}}function _e(t){let e,n,r,i,o,s;function a(t,o){return(null==e||1&o[0])&&(e=!(!t[0].sided||!t[12](`${t[42]}_l`)&&!t[12](`${t[42]}_r`))),e?ve:(null==n&&(n=!(!t[12](`${t[42]}_l`)||!t[12](`${t[42]}_r`))),n?ye:(null==r&&(r=!!t[12](`${t[42]}_l`)),r?ge:(null==i&&(i=!!t[12](`${t[42]}_r`)),i?me:void 0)))}let u=a(t,[-1]),d=u&&u(t);return{c(){d&&d.c(),o=h(),s=p(" ")},m(t,e){d&&d.m(t,e),c(t,o,e),c(t,s,e)},p(t,e){u!==(u=a(t,e))&&(d&&d.d(1),d=u&&u(t),d&&(d.c(),d.m(o.parentNode,o)))},d(t){d&&d.d(t),t&&l(o),t&&l(s)}}}function be(t){let e,n,r,i,o=t[0].max_encumbrance+"";return{c(){e=p(" "),n=p("("),r=p(o),i=p(" when full)")},m(t,o){c(t,e,o),c(t,n,o),c(t,r,o),c(t,i,o)},p(t,e){1&e[0]&&o!==(o=t[0].max_encumbrance+"")&&y(r,o)},d(t){t&&l(e),t&&l(n),t&&l(r),t&&l(i)}}}function xe(t){let e;return{c(){e=p("Normal")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Ee(t){let e;return{c(){e=p("Outer aura")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Se(t){let e;return{c(){e=p("Waist")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function we(t){let e;return{c(){e=p("Outer")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Te(t){let e;return{c(){e=p("Strapped")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Oe(t){let e;return{c(){e=p("Close to skin")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function ke(t){let e;return{c(){e=p("Personal aura")},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}function Ie(t){let e,n,r,i,o,s,f,m,v,_,b,x,E,S,w,T,O=(t[0].bashing??0)+"",k=(t[0].cutting??0)+"",I=(t[0].to_hit??0)+"",C=Fe(t[0])+"",M=t[2].length&&function(t){let e,n,r,i=t[2],o=[];for(let e=0;e<i.length;e+=1)o[e]=Ce(ee(t,i,e));return{c(){e=d("dt"),e.textContent="Techniques",n=d("dd"),r=d("ul");for(let t=0;t<o.length;t+=1)o[t].c();g(r,"class","no-bullets")},m(t,i){c(t,e,i),c(t,n,i),a(n,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,e){if(4&e[0]){let n;for(i=t[2],n=0;n<i.length;n+=1){const s=ee(t,i,n);o[n]?o[n].p(s,e):(o[n]=Ce(s),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&l(e),t&&l(n),u(o,t)}}}(t);return{c(){e=d("section"),n=d("h1"),n.textContent="Melee",r=h(),i=d("dl"),o=d("dt"),o.textContent="Bash",s=d("dd"),f=p(O),m=d("dt"),m.textContent="Cut",v=d("dd"),_=p(k),b=d("dt"),b.textContent="To hit",x=d("dd"),E=p(I),S=d("dt"),S.textContent="Moves per attack",w=d("dd"),T=p(C),M&&M.c()},m(t,l){c(t,e,l),a(e,n),a(e,r),a(e,i),a(i,o),a(i,s),a(s,f),a(i,m),a(i,v),a(v,_),a(i,b),a(i,x),a(x,E),a(i,S),a(i,w),a(w,T),M&&M.m(i,null)},p(t,e){1&e[0]&&O!==(O=(t[0].bashing??0)+"")&&y(f,O),1&e[0]&&k!==(k=(t[0].cutting??0)+"")&&y(_,k),1&e[0]&&I!==(I=(t[0].to_hit??0)+"")&&y(E,I),1&e[0]&&C!==(C=Fe(t[0])+"")&&y(T,C),t[2].length&&M.p(t,e)},d(t){t&&l(e),M&&M.d()}}}function Ce(e){let n,r,i,o,s,u,h=e[39].name+"",f=e[39].description+"";return{c(){n=d("li"),r=d("strong"),i=d("a"),o=p(h),s=p(": "),u=p(f),g(i,"href","#/technique/"+e[39].id)},m(t,e){c(t,n,e),a(n,r),a(r,i),a(i,o),a(n,s),a(n,u)},p:t,d(t){t&&l(n)}}}function Me(e){let n,r,i=e[36]+"";return{c(){n=d("li"),r=p(i)},m(t,e){c(t,n,e),a(n,r)},p:t,d(t){t&&l(n)}}}function Re(e){let n,r,i,o=Q(e[1].byId("item",e[0]))+"";return{c(){n=d("li"),r=d("a"),i=p(o),g(r,"href","#/item/"+e[0])},m(t,e){c(t,n,e),a(n,r),a(r,i)},p:t,d(t){t&&l(n)}}}function Ae(e){let n,r,i,o,s,m,y,v,_,b,x,E,S=e[31].max_contains_volume+"",w=e[31].max_contains_weight+"",T=e[31].moves+"",O=e[31].max_item_length&&function(e){let n,r,i,o=e[31].max_item_length+"";return{c(){n=d("dt"),n.textContent="Max Item Length",r=d("dd"),i=p(o)},m(t,e){c(t,n,e),c(t,r,e),a(r,i)},p:t,d(t){t&&l(n),t&&l(r)}}}(e),k="0 ml"!==e[31].min_item_volume&&function(e){let n,r,i,o=e[31].min_item_volume+"";return{c(){n=d("dt"),n.textContent="Min Item Volume",r=d("dd"),i=p(o)},m(t,e){c(t,n,e),c(t,r,e),a(r,i)},p:t,d(t){t&&l(n),t&&l(r)}}}(e),I=e[31].flag_restriction&&function(t){let e,n,r,i,o=t[31].flag_restriction,s=[];for(let e=0;e<o.length;e+=1)s[e]=Me(te(t,o,e));return{c(){e=d("dt"),e.textContent="Flag Restriction",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","comma-separated")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(128&e[0]){let n;for(o=t[31].flag_restriction,n=0;n<o.length;n+=1){const i=te(t,o,n);s[n]?s[n].p(i,e):(s[n]=Me(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}(e),C=e[31].item_restriction&&function(t){let e,n,r,i,o=t[31].item_restriction,s=[];for(let e=0;e<o.length;e+=1)s[e]=Re(Qt(t,o,e));return{c(){e=d("dt"),e.textContent="Item Restriction",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","comma-separated")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(130&e[0]){let n;for(o=t[31].item_restriction,n=0;n<o.length;n+=1){const i=Qt(t,o,n);s[n]?s[n].p(i,e):(s[n]=Re(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}(e);return{c(){n=d("dl"),r=d("dt"),r.textContent="Volume Capacity",i=d("dd"),o=p(S),s=d("dt"),s.textContent="Weight Capacity",m=d("dd"),y=p(w),O&&O.c(),v=f(),k&&k.c(),_=d("dt"),_.textContent="Moves To Remove Item",b=d("dd"),x=p(T),I&&I.c(),E=f(),C&&C.c()},m(t,e){c(t,n,e),a(n,r),a(n,i),a(i,o),a(n,s),a(n,m),a(m,y),O&&O.m(n,null),a(n,v),k&&k.m(n,null),a(n,_),a(n,b),a(b,x),I&&I.m(n,null),a(n,E),C&&C.m(n,null)},p(t,e){t[31].max_item_length&&O.p(t,e),"0 ml"!==t[31].min_item_volume&&k.p(t,e),t[31].flag_restriction&&I.p(t,e),t[31].item_restriction&&C.p(t,e)},d(t){t&&l(n),O&&O.d(),k&&k.d(),I&&I.d(),C&&C.d()}}}function Ne(e){let n,r,i,o,s,u=Q(e[28])+"",h=e[28].description+"";return{c(){n=d("dt"),r=d("a"),i=p(u),o=d("dd"),s=p(h),g(r,"href","#/fault/"+e[28].id)},m(t,e){c(t,n,e),a(n,r),a(r,i),c(t,o,e),a(o,s)},p:t,d(t){t&&l(n),t&&l(o)}}}function Le(t){let e,n,r,i,o=[],s=new Map,a=t[9];const u=t=>t[25];for(let e=0;e<a.length;e+=1){let n=Kt(t,a,e),r=u(n);s.set(r,o[e]=je(r,n))}return{c(){e=d("h2"),e.textContent="Recipes",n=h();for(let t=0;t<o.length;t+=1)o[t].c();r=f()},m(t,s){c(t,e,s),c(t,n,s);for(let e=0;e<o.length;e+=1)o[e].m(t,s);c(t,r,s),i=!0},p(t,e){512&e[0]&&(a=t[9],$(),o=function(t,e,n,r,i,o,s,a,c,l,u,d){let p=t.length,h=o.length,f=p;const m={};for(;f--;)m[t[f].key]=f;const g=[],y=new Map,v=new Map;for(f=h;f--;){const t=d(i,o,f),a=n(t);let c=s.get(a);c?r&&c.p(t,e):(c=l(a,t),c.c()),y.set(a,g[f]=c),a in m&&v.set(a,Math.abs(f-m[a]))}const _=new Set,b=new Set;function x(t){F(t,1),t.m(a,u),s.set(t.key,t),u=t.first,h--}for(;p&&h;){const e=g[h-1],n=t[p-1],r=e.key,i=n.key;e===n?(u=e.first,p--,h--):y.has(i)?!s.has(r)||_.has(r)?x(e):b.has(i)?p--:v.get(r)>v.get(i)?(b.add(r),x(e)):(_.add(i),p--):(c(n,s),p--)}for(;p--;){const e=t[p];y.has(e.key)||c(e,s)}for(;h;)x(g[h-1]);return g}(o,e,u,1,t,a,s,r.parentNode,H,je,r,Kt),P())},i(t){if(!i){for(let t=0;t<a.length;t+=1)F(o[t]);i=!0}},o(t){for(let t=0;t<o.length;t+=1)B(o[t]);i=!1},d(t){t&&l(e),t&&l(n);for(let e=0;e<o.length;e+=1)o[e].d(t);t&&l(r)}}}function je(t,e){let n,r,i;return r=new Vt({props:{recipe:e[25]}}),{key:t,first:null,c(){n=f(),q(r.$$.fragment),this.first=n},m(t,e){c(t,n,e),W(r,t,e),i=!0},p(t,n){e=t},i(t){i||(F(r.$$.fragment,t),i=!0)},o(t){B(r.$$.fragment,t),i=!1},d(t){t&&l(n),G(r,t)}}}function De(t){let e,n,r,i,o,s,m,v,b,x,E,S,w,T,O,k,I,C,M,R,A,N,L,j,D,$,P,U,H,q,W,G,Y,z,J,V=t[0].symbol+"",K=Q(t[0])+"",X=t[0].volume+"",Z=t[0].weight+"",tt=Pe(t[0])+"",et=t[0].description+"",nt=t[7].filter(Be).length,rt=t[4].length&&function(t){let e,n,r,i,o=t[4],s=[];for(let e=0;e<o.length;e+=1)s[e]=ce(ae(t,o,e));return{c(){e=d("dt"),e.textContent="Material",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","comma-separated")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(16&e[0]){let n;for(o=t[4],n=0;n<o.length;n+=1){const i=ae(t,o,n);s[n]?s[n].p(i,e):(s[n]=ce(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}(t),it=t[11].length&&function(t){let e,n,r,i,o=t[11].map(t[14]),s=[];for(let e=0;e<o.length;e+=1)s[e]=le(se(t,o,e));return{c(){e=d("dt"),e.textContent="Ammo",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","no-bullets")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(3075&e[0]){let n;for(o=t[11].map(t[14]),n=0;n<o.length;n+=1){const i=se(t,o,n);s[n]?s[n].p(i,e):(s[n]=le(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}(t),ot=t[8].length&&function(t){let e,n,r,i,o=t[8],s=[];for(let e=0;e<o.length;e+=1)s[e]=ue(oe(t,o,e));return{c(){e=d("dt"),e.textContent="Compatible magazines",n=d("dd"),r=d("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=h(),g(r,"class","comma-separated")},m(t,o){c(t,e,o),c(t,n,o),a(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);a(n,i)},p(t,e){if(258&e[0]){let n;for(o=t[8],n=0;n<o.length;n+=1){const i=oe(t,o,n);s[n]?s[n].p(i,e):(s[n]=ue(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),t&&l(n),u(s,t)}}}(t),st=t[5],at=[];for(let e=0;e<st.length;e+=1)at[e]=pe(ie(t,st,e));let ct=null;st.length||(ct=de());let lt=t[3].length&&function(t){let e,n,r,i=t[3],o=[];for(let e=0;e<i.length;e+=1)o[e]=he(re(t,i,e));return{c(){e=d("dt"),e.textContent="Qualities",n=d("dd"),r=d("ul");for(let t=0;t<o.length;t+=1)o[t].c();g(r,"class","no-bullets")},m(t,i){c(t,e,i),c(t,n,i),a(n,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,e){if(8&e[0]){let n;for(i=t[3],n=0;n<i.length;n+=1){const s=re(t,i,n);o[n]?o[n].p(s,e):(o[n]=he(s),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&l(e),t&&l(n),u(o,t)}}}(t),ut=("ARMOR"===t[0].type||"TOOL_ARMOR"===t[0].type)&&fe(t),dt=(t[0].bashing||t[0].cutting)&&Ie(t),pt=nt&&function(t){let e,n,r,i=t[7].filter(We),o=[];for(let e=0;e<i.length;e+=1)o[e]=Ae(Zt(t,i,e));return{c(){e=d("section"),n=d("h1"),n.textContent="Pockets",r=h();for(let t=0;t<o.length;t+=1)o[t].c()},m(t,i){c(t,e,i),a(e,n),a(e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,n){if(130&n[0]){let r;for(i=t[7].filter(We),r=0;r<i.length;r+=1){const s=Zt(t,i,r);o[r]?o[r].p(s,n):(o[r]=Ae(s),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},d(t){t&&l(e),u(o,t)}}}(t),ht=t[6].length&&function(t){let e,n,r,i,o=t[6],s=[];for(let e=0;e<o.length;e+=1)s[e]=Ne(Xt(t,o,e));return{c(){e=d("section"),n=d("h1"),n.textContent="Possible faults",r=h(),i=d("dl");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,o){c(t,e,o),a(e,n),a(e,r),a(e,i);for(let t=0;t<s.length;t+=1)s[t].m(i,null)},p(t,e){if(64&e[0]){let n;for(o=t[6],n=0;n<o.length;n+=1){const r=Xt(t,o,n);s[n]?s[n].p(r,e):(s[n]=Ne(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&l(e),u(s,t)}}}(t),ft=t[9].length&&Le(t);return{c(){e=d("h1"),n=d("span"),r=p(V),o=h(),s=p(K),m=h(),v=d("section"),b=d("h1"),b.textContent="General",x=h(),E=d("dl"),rt&&rt.c(),S=d("dt"),S.textContent="Volume",w=d("dd"),T=p(X),O=d("dt"),O.textContent="Weight",k=d("dd"),I=p(Z),C=d("dt"),C.textContent="Length",M=d("dd"),R=p(tt),it&&it.c(),A=f(),ot&&ot.c(),N=d("dt"),N.textContent="Flags",L=d("dd"),j=d("ul");for(let t=0;t<at.length;t+=1)at[t].c();ct&&ct.c(),D=h(),lt&&lt.c(),$=h(),P=d("p"),U=p(et),H=h(),ut&&ut.c(),q=h(),dt&&dt.c(),W=h(),pt&&pt.c(),G=h(),ht&&ht.c(),Y=h(),ft&&ft.c(),z=f(),_(n,"font-family","monospace"),g(n,"class",i="c_"+t[0].color),g(j,"class","comma-separated"),_(P,"color","var(--cata-color-gray)")},m(t,i){c(t,e,i),a(e,n),a(n,r),a(e,o),a(e,s),c(t,m,i),c(t,v,i),a(v,b),a(v,x),a(v,E),rt&&rt.m(E,null),a(E,S),a(E,w),a(w,T),a(E,O),a(E,k),a(k,I),a(E,C),a(E,M),a(M,R),it&&it.m(E,null),a(E,A),ot&&ot.m(E,null),a(E,N),a(E,L),a(L,j);for(let t=0;t<at.length;t+=1)at[t].m(j,null);ct&&ct.m(j,null),a(L,D),lt&&lt.m(E,null),a(v,$),a(v,P),a(P,U),c(t,H,i),ut&&ut.m(t,i),c(t,q,i),dt&&dt.m(t,i),c(t,W,i),pt&&pt.m(t,i),c(t,G,i),ht&&ht.m(t,i),c(t,Y,i),ft&&ft.m(t,i),c(t,z,i),J=!0},p(t,e){if((!J||1&e[0])&&V!==(V=t[0].symbol+"")&&y(r,V),(!J||1&e[0]&&i!==(i="c_"+t[0].color))&&g(n,"class",i),(!J||1&e[0])&&K!==(K=Q(t[0])+"")&&y(s,K),t[4].length&&rt.p(t,e),(!J||1&e[0])&&X!==(X=t[0].volume+"")&&y(T,X),(!J||1&e[0])&&Z!==(Z=t[0].weight+"")&&y(I,Z),(!J||1&e[0])&&tt!==(tt=Pe(t[0])+"")&&y(R,tt),t[11].length&&it.p(t,e),t[8].length&&ot.p(t,e),32&e[0]){let n;for(st=t[5],n=0;n<st.length;n+=1){const r=ie(t,st,n);at[n]?at[n].p(r,e):(at[n]=pe(r),at[n].c(),at[n].m(j,null))}for(;n<at.length;n+=1)at[n].d(1);at.length=st.length,st.length?ct&&(ct.d(1),ct=null):ct||(ct=de(),ct.c(),ct.m(j,null))}t[3].length&&lt.p(t,e),(!J||1&e[0])&&et!==(et=t[0].description+"")&&y(U,et),"ARMOR"===t[0].type||"TOOL_ARMOR"===t[0].type?ut?ut.p(t,e):(ut=fe(t),ut.c(),ut.m(q.parentNode,q)):ut&&(ut.d(1),ut=null),t[0].bashing||t[0].cutting?dt?dt.p(t,e):(dt=Ie(t),dt.c(),dt.m(W.parentNode,W)):dt&&(dt.d(1),dt=null),nt&&pt.p(t,e),t[6].length&&ht.p(t,e),t[9].length&&ft.p(t,e)},i(t){J||(F(ft),J=!0)},o(t){B(ft),J=!1},d(t){t&&l(e),t&&l(m),t&&l(v),rt&&rt.d(),it&&it.d(),ot&&ot.d(),u(at,t),ct&&ct.d(),lt&&lt.d(),t&&l(H),ut&&ut.d(t),t&&l(q),dt&&dt.d(t),t&&l(W),pt&&pt.d(t),t&&l(G),ht&&ht.d(t),t&&l(Y),ft&&ft.d(t),t&&l(z)}}}function $e(t){return void 0===t?0:"number"==typeof t?250*t:t.endsWith("ml")?parseInt(t):t.endsWith("L")?1e3*parseInt(t):void 0}function Pe(t){return t.longest_side?t.longest_side:`${Math.round(Math.cbrt($e(t.volume)))} cm`}function Fe(t){return Math.floor($e(t.volume)/62.5+(void 0===(e=t.weight)?0:"number"==typeof e?e:e.endsWith("g")?parseInt(e):e.endsWith("mg")?parseInt(e)/1e3:e.endsWith("kg")?1e3*parseInt(e):void 0)/60+65);var e}const Be=t=>"CONTAINER"===t.pocket_type,Ue=(t,e)=>t+e.bash_resist??0,He=(t,e)=>t+e.cut_resist??0,qe=(t,e)=>t+e.bullet_resist??0,We=t=>"CONTAINER"===t.pocket_type;function Ge(t,e,n){var r,i,o,s,a,c,l;let{item:u}=e,d=S("data"),p=(null!==(r=u.techniques)&&void 0!==r?r:[]).map((t=>d.byId("technique",t))),h=(null!==(i=u.qualities)&&void 0!==i?i:[]).map((([t,e])=>({quality:d.byId("tool_quality",t),level:e}))),f=("string"==typeof u.material?[u.material]:null!==(o=u.material)&&void 0!==o?o:[]).map((t=>d.byId("material",t))),m=(null!==(s=u.flags)&&void 0!==s?s:[]).map((t=>{var e;return null!==(e=d.byId("json_flag",t))&&void 0!==e?e:{id:t}})),g=(null!==(a=u.faults)&&void 0!==a?a:[]).map((t=>d.byId("fault",t)));const y={pocket_type:"CONTAINER",min_item_volume:"0 ml",moves:100,fire_protection:!1,watertight:!1,airtight:!1,open_container:!1,rigid:!1,holster:!1};let v=(null!==(c=u.pocket_data)&&void 0!==c?c:[]).map((t=>Object.assign(Object.assign({},y),t))),_=v.filter((t=>"MAGAZINE_WELL"===t.pocket_type)).flatMap((t=>t.item_restriction)),b=d.byType("recipe").filter((t=>t.result===u.id&&!t.obsolete)).map((t=>d._flatten(t)));function x(t){var e;let n=0;for(const r of v)"MAGAZINE"===r.pocket_type&&r.ammo_restriction&&(n+=null!==(e=r.ammo_restriction[t])&&void 0!==e?e:0);return n}let E=v.flatMap((t=>{var e;return Object.keys(null!==(e=t.ammo_restriction)&&void 0!==e?e:{})}));let w=(null!==(l=u.covers)&&void 0!==l?l:[]).length;return t.$$set=t=>{"item"in t&&n(0,u=t.item)},[u,d,p,h,f,m,g,v,_,b,x,E,function(t){var e;return(null!==(e=u.covers)&&void 0!==e?e:[]).includes(t)},w,t=>({id:t,max_charges:x(t)}),()=>{let t=f.reduce(((t,e)=>t+e.acid_resist??0),0)/f.length;const e=u.environmental_protection??0;return e<10&&(t*=e/10),t},()=>{let t=f.reduce(((t,e)=>t+e.fire_resist??0),0)/f.length;const e=u.environmental_protection??0;return e<10&&(t*=e/10),t}]}class Ye extends J{constructor(t){super(),z(this,t,Ge,De,o,{item:0},[-1,-1,-1])}}function ze(e){let n,r,i=JSON.stringify(e[0],null,2)+"";return{c(){n=d("pre"),r=p(i)},m(t,e){c(t,n,e),a(n,r)},p(t,[e]){1&e&&i!==(i=JSON.stringify(t[0],null,2)+"")&&y(r,i)},i:t,o:t,d(t){t&&l(n)}}}function Je(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class Ve extends J{constructor(t){super(),z(this,t,Je,ze,o,{item:0})}}function Ke(t){let e,n,r,i,o,s,u,f,m=JSON.stringify(t[1],null,2)+"";var g=t[2][t[1].type]??Ve;function v(t){return{props:{item:t[1]}}}return g&&(e=new g(v(t))),{c(){e&&q(e.$$.fragment),n=h(),r=d("details"),i=d("summary"),i.textContent="Raw JSON",o=h(),s=d("pre"),u=p(m)},m(t,l){e&&W(e,t,l),c(t,n,l),c(t,r,l),a(r,i),a(r,o),a(r,s),a(s,u),f=!0},p(t,r){const i={};if(2&r&&(i.item=t[1]),g!==(g=t[2][t[1].type]??Ve)){if(e){$();const t=e;B(t.$$.fragment,1,0,(()=>{G(t,1)})),P()}g?(e=new g(v(t)),q(e.$$.fragment),F(e.$$.fragment,1),W(e,n.parentNode,n)):e=null}else g&&e.$set(i);(!f||2&r)&&m!==(m=JSON.stringify(t[1],null,2)+"")&&y(u,m)},i(t){f||(e&&F(e.$$.fragment,t),f=!0)},o(t){e&&B(e.$$.fragment,t),f=!1},d(t){e&&G(e,t),t&&l(n),t&&l(r)}}}function Xe(e){let n,r,i,o,s=e[0].type+"",a=e[0].id+"";return{c(){n=p("Unknown obj: "),r=p(s),i=p("/"),o=p(a)},m(t,e){c(t,n,e),c(t,r,e),c(t,i,e),c(t,o,e)},p(t,e){1&e&&s!==(s=t[0].type+"")&&y(r,s),1&e&&a!==(a=t[0].id+"")&&y(o,a)},i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(i),t&&l(o)}}}function Ze(t){let e,n,r,i;const o=[Xe,Ke],s=[];function a(t,e){return t[1]?1:0}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=f()},m(t,n){s[e].m(t,n),c(t,r,n),i=!0},p(t,[i]){let c=e;e=a(t),e===c?s[e].p(t,i):($(),B(s[c],1,1,(()=>{s[c]=null})),P(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),F(n,1),n.m(r.parentNode,r))},i(t){i||(F(n),i=!0)},o(t){B(n),i=!1},d(t){s[e].d(t),t&&l(r)}}}function Qe(t,e,n){let{item:r}=e,{data:i}=e;var o,s;let a;o="data",s=i,E().$$.context.set(o,s);const c={MONSTER:bt,AMMO:Ye,GUN:Ye,ARMOR:Ye,PET_ARMOR:Ye,TOOL:Ye,TOOLMOD:Ye,TOOL_ARMOR:Ye,BOOK:Ye,COMESTIBLE:Ye,ENGINE:Ye,WHEEL:Ye,GUNMOD:Ye,MAGAZINE:Ye,BATTERY:Ye,GENERIC:Ye,BIONIC_ITEM:Ye};return t.$$set=t=>{"item"in t&&n(0,r=t.item),"data"in t&&n(3,i=t.data)},t.$$.update=()=>{9&t.$$.dirty&&n(1,a=i.byId(r.type,r.id))},[r,a,c,i]}class tn extends J{constructor(t){super(),z(this,t,Qe,Ze,o,{item:0,data:3})}}function en(t){return Array.isArray?Array.isArray(t):"[object Array]"===ln(t)}function nn(t){return"string"==typeof t}function rn(t){return"number"==typeof t}function on(t){return!0===t||!1===t||function(t){return sn(t)&&null!==t}(t)&&"[object Boolean]"==ln(t)}function sn(t){return"object"==typeof t}function an(t){return null!=t}function cn(t){return!t.trim().length}function ln(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const un=Object.prototype.hasOwnProperty;class dn{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=pn(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function pn(t){let e=null,n=null,r=null,i=1;if(nn(t)||en(t))r=t,e=hn(t),n=fn(t);else{if(!un.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const o=t.name;if(r=o,un.call(t,"weight")&&(i=t.weight,i<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(o));e=hn(o),n=fn(o)}return{path:e,id:n,weight:i,src:r}}function hn(t){return en(t)?t:t.split(".")}function fn(t){return en(t)?t.join("."):t}var mn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const i=(t,e,o)=>{if(an(t))if(e[o]){const s=t[e[o]];if(!an(s))return;if(o===e.length-1&&(nn(s)||rn(s)||on(s)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(s));else if(en(s)){r=!0;for(let t=0,n=s.length;t<n;t+=1)i(s[t],e,o+1)}else e.length&&i(s,e,o+1)}else n.push(t)};return i(t,nn(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const gn=/[^ ]+/g;class yn{constructor({getFn:t=mn.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(gn).length;if(e.has(r))return e.get(r);const i=1/Math.sqrt(r),o=parseFloat(Math.round(i*n)/n);return e.set(r,o),o},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,nn(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();nn(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!an(t)||cn(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let i=this.getFn(t,e.path);if(an(i))if(en(i)){let t=[];const e=[{nestedArrIndex:-1,value:i}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(an(r))if(nn(r)&&!cn(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else en(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!cn(i)){let t={v:i,n:this.norm.get(i)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function vn(t,e,{getFn:n=mn.getFn}={}){const r=new yn({getFn:n});return r.setKeys(t.map(pn)),r.setSources(e),r.create(),r}function _n(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=mn.distance,ignoreLocation:o=mn.ignoreLocation}={}){const s=e/t.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}const bn=32;function xn(t,e,n,{location:r=mn.location,distance:i=mn.distance,threshold:o=mn.threshold,findAllMatches:s=mn.findAllMatches,minMatchCharLength:a=mn.minMatchCharLength,includeMatches:c=mn.includeMatches,ignoreLocation:l=mn.ignoreLocation}={}){if(e.length>bn)throw new Error(`Pattern length exceeds max of ${bn}.`);const u=e.length,d=t.length,p=Math.max(0,Math.min(r,d));let h=o,f=p;const m=a>1||c,g=m?Array(d):[];let y;for(;(y=t.indexOf(e,f))>-1;){let t=_n(e,{currentLocation:y,expectedLocation:p,distance:i,ignoreLocation:l});if(h=Math.min(t,h),f=y+u,m){let t=0;for(;t<u;)g[y+t]=1,t+=1}}f=-1;let v=[],_=1,b=u+d;const x=1<<u-1;for(let r=0;r<u;r+=1){let o=0,a=b;for(;o<a;){_n(e,{errors:r,currentLocation:p+a,expectedLocation:p,distance:i,ignoreLocation:l})<=h?o=a:b=a,a=Math.floor((b-o)/2+o)}b=a;let c=Math.max(1,p-a+1),y=s?d:Math.min(p+a,d)+u,E=Array(y+2);E[y+1]=(1<<r)-1;for(let o=y;o>=c;o-=1){let s=o-1,a=n[t.charAt(s)];if(m&&(g[s]=+!!a),E[o]=(E[o+1]<<1|1)&a,r&&(E[o]|=(v[o+1]|v[o])<<1|1|v[o+1]),E[o]&x&&(_=_n(e,{errors:r,currentLocation:s,expectedLocation:p,distance:i,ignoreLocation:l}),_<=h)){if(h=_,f=s,f<=p)break;c=Math.max(1,2*p-f)}}if(_n(e,{errors:r+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:l})>h)break;v=E}const E={isMatch:f>=0,score:Math.max(.001,_)};if(m){const t=function(t=[],e=mn.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let s=t[o];s&&-1===r?r=o:s||-1===r||(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}(g,a);t.length?c&&(E.indices=t):E.isMatch=!1}return E}function En(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class Sn{constructor(t,{location:e=mn.location,threshold:n=mn.threshold,distance:r=mn.distance,includeMatches:i=mn.includeMatches,findAllMatches:o=mn.findAllMatches,minMatchCharLength:s=mn.minMatchCharLength,isCaseSensitive:a=mn.isCaseSensitive,ignoreLocation:c=mn.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:En(t),startIndex:e})},u=this.pattern.length;if(u>bn){let t=0;const e=u%bn,n=u-e;for(;t<n;)l(this.pattern.substr(t,bn),t),t+=bn;if(e){const t=u-bn;l(this.pattern.substr(t),t)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:p,startIndex:h})=>{const{isMatch:f,score:m,indices:g}=xn(t,e,p,{location:r+h,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:a,includeMatches:n,ignoreLocation:c});f&&(d=!0),u+=m,f&&g&&(l=[...l,...g])}));let p={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(p.indices=l),p}}class wn{constructor(t){this.pattern=t}static isMultiMatch(t){return Tn(t,this.multiRegex)}static isSingleMatch(t){return Tn(t,this.singleRegex)}search(){}}function Tn(t,e){const n=t.match(e);return n?n[1]:null}class On extends wn{constructor(t,{location:e=mn.location,threshold:n=mn.threshold,distance:r=mn.distance,includeMatches:i=mn.includeMatches,findAllMatches:o=mn.findAllMatches,minMatchCharLength:s=mn.minMatchCharLength,isCaseSensitive:a=mn.isCaseSensitive,ignoreLocation:c=mn.ignoreLocation}={}){super(t),this._bitapSearch=new Sn(t,{location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class kn extends wn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],i=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+i,r.push([e,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const In=[class extends wn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},kn,class extends wn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends wn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends wn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends wn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends wn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},On],Cn=In.length,Mn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const Rn=new Set([On.type,kn.type]);class An{constructor(t,{isCaseSensitive:e=mn.isCaseSensitive,includeMatches:n=mn.includeMatches,minMatchCharLength:r=mn.minMatchCharLength,ignoreLocation:i=mn.ignoreLocation,findAllMatches:o=mn.findAllMatches,location:s=mn.location,threshold:a=mn.threshold,distance:c=mn.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:o,ignoreLocation:i,location:s,threshold:a,distance:c},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(Mn).filter((t=>t&&!!t.trim())),r=[];for(let t=0,i=n.length;t<i;t+=1){const i=n[t];let o=!1,s=-1;for(;!o&&++s<Cn;){const t=In[s];let n=t.isMultiMatch(i);n&&(r.push(new t(n,e)),o=!0)}if(!o)for(s=-1;++s<Cn;){const t=In[s];let n=t.isSingleMatch(i);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let i=0,o=[],s=0;for(let r=0,a=e.length;r<a;r+=1){const a=e[r];o.length=0,i=0;for(let e=0,r=a.length;e<r;e+=1){const r=a[e],{isMatch:c,indices:l,score:u}=r.search(t);if(!c){s=0,i=0,o.length=0;break}if(i+=1,s+=u,n){const t=r.constructor.type;Rn.has(t)?o=[...o,...l]:o.push(l)}}if(i){let t={isMatch:!0,score:s/i};return n&&(t.indices=o),t}}return{isMatch:!1,score:1}}}const Nn=[];function Ln(t,e){for(let n=0,r=Nn.length;n<r;n+=1){let r=Nn[n];if(r.condition(t,e))return new r(t,e)}return new Sn(t,e)}const jn="$and",Dn="$or",$n="$path",Pn="$val",Fn=t=>!(!t[jn]&&!t[Dn]),Bn=t=>({[jn]:Object.keys(t).map((e=>({[e]:t[e]})))});function Un(t,e,{auto:n=!0}={}){const r=t=>{let i=Object.keys(t);const o=(t=>!!t[$n])(t);if(!o&&i.length>1&&!Fn(t))return r(Bn(t));if((t=>!en(t)&&sn(t)&&!Fn(t))(t)){const r=o?t[$n]:i[0],s=o?t[Pn]:t[r];if(!nn(s))throw new Error((t=>`Invalid value for key ${t}`)(r));const a={keyId:fn(r),pattern:s};return n&&(a.searcher=Ln(s,e)),a}let s={children:[],operator:i[0]};return i.forEach((e=>{const n=t[e];en(n)&&n.forEach((t=>{s.children.push(r(t))}))})),s};return Fn(t)||(t=Bn(t)),r(t)}function Hn(t,e){const n=t.matches;e.matches=[],an(n)&&n.forEach((t=>{if(!an(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let i={indices:n,value:r};t.key&&(i.key=t.key.src),t.idx>-1&&(i.refIndex=t.idx),e.matches.push(i)}))}function qn(t,e){e.score=t.score}class Wn{constructor(t,e={},n){this.options={...mn,...e},this.options.useExtendedSearch,this._keyStore=new dn(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof yn))throw new Error("Incorrect 'index' type");this._myIndex=e||vn(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){an(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,r-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let a=nn(t)?nn(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=mn.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:i})=>{const o=t?t.weight:null;n*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(e?1:r))})),t.score=n}))}(a,{ignoreFieldNorm:s}),i&&a.sort(o),rn(e)&&e>-1&&(a=a.slice(0,e)),function(t,e,{includeMatches:n=mn.includeMatches,includeScore:r=mn.includeScore}={}){const i=[];return n&&i.push(Hn),r&&i.push(qn),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return i.length&&i.forEach((e=>{e(t,r)})),r}))}(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=Ln(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:i})=>{if(!an(t))return;const{isMatch:o,score:s,indices:a}=e.searchIn(t);o&&r.push({item:t,idx:n,matches:[{score:s,value:t,norm:i,indices:a}]})})),r}_searchLogical(t){const e=Un(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:i}=t,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:i});return o&&o.length?[{idx:r,item:e,matches:o}]:[]}switch(t.operator){case jn:{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],a=n(s,e,r);if(!a.length)return[];i.push(...a)}return i}case Dn:{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],a=n(s,e,r);if(a.length){i.push(...a);break}}return i}}},r=this._myIndex.records,i={},o=[];return r.forEach((({$:t,i:r})=>{if(an(t)){let s=n(e,t,r);s.length&&(i[r]||(i[r]={idx:r,item:t,matches:[]},o.push(i[r])),s.forEach((({matches:t})=>{i[r].matches.push(...t)})))}})),o}_searchObjectList(t){const e=Ln(t,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((({$:t,i:r})=>{if(!an(t))return;let o=[];n.forEach(((n,r)=>{o.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),o.length&&i.push({idx:r,item:t,matches:o})})),i}_findMatches({key:t,value:e,searcher:n}){if(!an(e))return[];let r=[];if(en(e))e.forEach((({v:e,i:i,n:o})=>{if(!an(e))return;const{isMatch:s,score:a,indices:c}=n.searchIn(e);s&&r.push({score:a,key:t,value:e,idx:i,norm:o,indices:c})}));else{const{v:i,n:o}=e,{isMatch:s,score:a,indices:c}=n.searchIn(i);s&&r.push({score:a,key:t,value:i,norm:o,indices:c})}return r}}function Gn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Yn(t,e,n){const r=t.slice();return r[10]=e[n],r}function zn(e){let n;return{c(){n=d("pre"),n.textContent="..."},m(t,e){c(t,n,e)},p:t,d(t){t&&l(n)}}}function Jn(t){let e,n=[...t[0].keys()],r=[];for(let e=0;e<n.length;e+=1)r[e]=Kn(Gn(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=f()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);c(t,e,n)},p(t,i){if(1&i){let o;for(n=[...t[0].keys()],o=0;o<n.length;o+=1){const s=Gn(t,n,o);r[o]?r[o].p(s,i):(r[o]=Kn(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){u(r,t),t&&l(e)}}}function Vn(t){let e,n,r,i,o=Q(t[10])+"";return{c(){e=d("li"),n=d("a"),r=p(o),g(n,"href",i="#/"+Z(t[10].type)+"/"+t[10].id)},m(t,i){c(t,e,i),a(e,n),a(n,r)},p(t,e){1&e&&o!==(o=Q(t[10])+"")&&y(r,o),1&e&&i!==(i="#/"+Z(t[10].type)+"/"+t[10].id)&&g(n,"href",i)},d(t){t&&l(e)}}}function Kn(t){let e,n,r,i,o,s=t[7]+"",f=t[0].get(t[7]),m=[];for(let e=0;e<f.length;e+=1)m[e]=Vn(Yn(t,f,e));return{c(){e=d("h1"),n=p(s),r=h(),i=d("ul");for(let t=0;t<m.length;t+=1)m[t].c();o=h()},m(t,s){c(t,e,s),a(e,n),c(t,r,s),c(t,i,s);for(let t=0;t<m.length;t+=1)m[t].m(i,null);a(i,o)},p(t,e){if(1&e&&s!==(s=t[7]+"")&&y(n,s),1&e){let n;for(f=t[0].get(t[7]),n=0;n<f.length;n+=1){const r=Yn(t,f,n);m[n]?m[n].p(r,e):(m[n]=Vn(r),m[n].c(),m[n].m(i,o))}for(;n<m.length;n+=1)m[n].d(1);m.length=f.length}},d(t){t&&l(e),t&&l(r),t&&l(i),u(m,t)}}}function Xn(e){let n;function r(t,e){return t[0]?Jn:zn}let i=r(e),o=i(e);return{c(){o.c(),n=f()},m(t,e){o.m(t,e),c(t,n,e)},p(t,[e]){i===(i=r(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n.parentNode,n)))},i:t,o:t,d(t){o.d(t),t&&l(n)}}}function Zn(t,e,n){let r,i;var o;let a;s(t,nt,(t=>n(3,i=t)));let{search:c}=e;const l=new Set(["item","monster"]);return t.$$set=t=>{"search"in t&&n(1,c=t.search)},t.$$.update=()=>{12&t.$$.dirty&&(a=new Wn([...null!==n(2,o=null==i?void 0:i.all())&&void 0!==o?o:[]].filter((t=>"string"==typeof t.id)),{keys:["id","name"],getFn:(t,e)=>{var n,r;return"id"===e[0]?null!==(r=null!==(n=t.id)&&void 0!==n?n:t.abstract)&&void 0!==r?r:"":"name"===e[0]?Q(t):void 0},ignoreFieldNorm:!0,minMatchCharLength:2,threshold:.2})),10&t.$$.dirty&&n(0,r=c&&c.length>1&&i&&function(t){const e=a.search(t,{limit:100}),n=new Map;for(const{item:t}of e){const e=Z(t.type);l.has(e)&&(n.has(e)||n.set(e,[]),n.get(e).push(t))}return n}(c)),2&t.$$.dirty&&history.replaceState({search:c},"")},[r,c,o,i]}Wn.version="6.4.6",Wn.createIndex=vn,Wn.parseIndex=function(t,{getFn:e=mn.getFn}={}){const{keys:n,records:r}=t,i=new yn({getFn:e});return i.setKeys(n),i.setIndexRecords(r),i},Wn.config=mn,Wn.parseQuery=Un,function(...t){Nn.push(...t)}(An);class Qn extends J{constructor(t){super(),z(this,t,Zn,Xn,o,{search:1})}}const{window:tr}=U;function er(e){let n,r,i,o,s,u,f,m,y,v,b,x=e[2]&&ir(e);return{c(){n=d("img"),i=h(),o=d("p"),o.innerHTML='<strong>Hitchhiker&#39;s Guide to the Cataclysm</strong> is a guide to the\nzombie survival roguelike game <a href="https://cataclysmdda.org/">Cataclysm:\nDark Days Ahead</a>. You can search for things in the game, like <a href="#/item/guidebook">items</a> and <a href="#/monster/mon_zombie">monsters</a>, and find useful information about\nthem. The data in the Guide comes directly from the JSON files in the game\nitself.',s=h(),u=d("p"),f=p("The Guide stores all its data locally and is offline-capable, so you can\ntake it with you whereever you go.\n"),x&&x.c(),m=h(),y=d("p"),y.textContent="More popular than the Celestial Home Care\nOmnibus, better selling than Fifty-three More Things to do in Zero Gravity, and\nmore controversial than Oolon Colluphid's trilogy of philosophical blockbusters\nWhere God Went Wrong, Some More of God's Greatest Mistakes and Who is this God\nPerson Anyway?",v=h(),b=d("p"),b.innerHTML='The guide is developed on <a href="https://github.com/nornagon/cdda-guide">GitHub</a> by <a href="https://www.nornagon.net">nornagon</a>.',n.src!==(r="dont_panic.png")&&g(n,"src","dont_panic.png"),g(n,"height","200"),_(n,"float","right"),g(n,"alt","The words 'Don't Panic' in big friendly letters"),_(y,"font-style","italic"),_(y,"color","var(--cata-color-gray)")},m(t,e){c(t,n,e),c(t,i,e),c(t,o,e),c(t,s,e),c(t,u,e),a(u,f),x&&x.m(u,null),c(t,m,e),c(t,y,e),c(t,v,e),c(t,b,e)},p(t,e){t[2]?x?x.p(t,e):(x=ir(t),x.c(),x.m(u,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){t&&l(n),t&&l(i),t&&l(o),t&&l(s),t&&l(u),x&&x.d(),t&&l(m),t&&l(y),t&&l(v),t&&l(b)}}}function nr(t){let e,n;return e=new Qn({props:{search:t[1]}}),{c(){q(e.$$.fragment)},m(t,r){W(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.search=t[1]),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function rr(t){let e,n,r,i;const o=[sr,or],s=[];function a(t,e){return t[3]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=f()},m(t,n){s[e].m(t,n),c(t,r,n),i=!0},p(t,i){let c=e;e=a(t),e===c?s[e].p(t,i):($(),B(s[c],1,1,(()=>{s[c]=null})),P(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),F(n,1),n.m(r.parentNode,r))},i(t){i||(F(n),i=!0)},o(t){B(n),i=!1},d(t){s[e].d(t),t&&l(r)}}}function ir(e){let n,r,i,o,s;return{c(){n=p("It's also "),r=d("a"),r.textContent="installable",i=p(",\nso you can pop it out of your browser like a regular app."),g(r,"href","#")},m(t,a){c(t,n,a),c(t,r,a),c(t,i,a),o||(s=m(r,"click",e[8]),o=!0)},p:t,d(t){t&&l(n),t&&l(r),t&&l(i),o=!1,s()}}}function or(e){let n;return{c(){n=p("...")},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&l(n)}}}function sr(e){let n,r,i=e[0],s=ar(e);return{c(){s.c(),n=f()},m(t,e){s.m(t,e),c(t,n,e),r=!0},p(e,r){1&r&&o(i,i=e[0])?($(),B(s,1,1,t),P(),s=ar(e),s.c(),F(s),s.m(n.parentNode,n)):s.p(e,r)},i(t){r||(F(s),r=!0)},o(t){B(s),r=!1},d(t){t&&l(n),s.d(t)}}}function ar(t){let e,n;return e=new tn({props:{item:t[0],data:t[3]}}),{c(){q(e.$$.fragment)},m(t,r){W(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[0]),8&n&&(r.data=t[3]),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function cr(t){let e,n,i,o,s,u,p,f,y,b,x,E,S,w,T;const O=[rr,nr,er],k=[];function I(t,e){return t[0]?0:t[1]?1:2}return x=I(t),E=k[x]=O[x](t),{c(){e=d("header"),n=d("nav"),i=d("div"),o=d("strong"),s=d("a"),s.textContent="Hitchhiker's Guide to the Cataclysm",u=h(),p=d("div"),f=d("input"),y=h(),b=d("main"),E.c(),g(s,"href","#"),g(i,"class","title svelte-1n9l7uf"),_(f,"margin","0"),_(f,"width","100%"),g(f,"placeholder","Search..."),g(p,"class","search svelte-1n9l7uf"),g(n,"class","svelte-1n9l7uf"),g(e,"class","svelte-1n9l7uf"),g(b,"class","svelte-1n9l7uf")},m(r,l){c(r,e,l),a(e,n),a(n,i),a(i,o),a(o,s),a(n,u),a(n,p),a(p,f),v(f,t[1]),c(r,y,l),c(r,b,l),k[x].m(b,null),S=!0,w||(T=[m(tr,"hashchange",t[4]),m(s,"click",t[6]),m(f,"input",t[7]),m(f,"input",t[5])],w=!0)},p(t,[e]){2&e&&f.value!==t[1]&&v(f,t[1]);let n=x;x=I(t),x===n?k[x].p(t,e):($(),B(k[n],1,1,(()=>{k[n]=null})),P(),E=k[x],E?E.p(t,e):(E=k[x]=O[x](t),E.c()),F(E,1),E.m(b,null))},i(t){S||(F(E),S=!0)},o(t){B(E),S=!1},d(t){t&&l(e),t&&l(y),t&&l(b),k[x].d(),w=!1,r(T)}}}function lr(t,e,n){let r;s(t,nt,(t=>n(3,r=t)));let i=null;function o(){const t=window.location.hash.slice(1);let e;if(e=/^\/([^\/]+)\/(.+)$/.exec(t)){const[,t,r]=e;n(0,i={type:t,id:r}),window.scrollTo(0,0)}else n(0,i=null)}var a;a=o,E().$$.on_mount.push(a);let c="";let l;window.addEventListener("beforeinstallprompt",(t=>{n(2,l=t)}));return[i,c,l,r,o,()=>{i&&history.pushState(null,"",location.href.replace(/#.*$/,"")),n(0,i=null)},()=>n(1,c=""),function(){c=this.value,n(1,c)},t=>{t.preventDefault(),l.prompt()}]}class ur extends J{constructor(t){super(),z(this,t,lr,cr,o,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var dr=function(t,e){return(dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function pr(t,e){function n(){this.constructor=t}dr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var hr,fr,mr,gr,yr=function(){return(yr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function vr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function br(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_r(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function xr(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Er(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xr(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */!function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(hr||(hr={})),function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(fr||(fr={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(fr||(fr={})),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(mr||(mr={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(mr||(mr={})),function(t){t.Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"}(gr||(gr={}));var Sr=function(){return(Sr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wr(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Tr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wr(arguments[e]));return t}function Or(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return jr(t,Error)}}function kr(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function Ir(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function Cr(t){return"[object String]"===Object.prototype.toString.call(t)}function Mr(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function Rr(t){return"[object Object]"===Object.prototype.toString.call(t)}function Ar(t){return"undefined"!=typeof Event&&jr(t,Event)}function Nr(t){return"undefined"!=typeof Element&&jr(t,Element)}function Lr(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function jr(t,e){try{return t instanceof e}catch(t){return!1}}function Dr(t){try{for(var e=t,n=[],r=0,i=0,o=" > ".length,s=void 0;e&&r++<5&&!("html"===(s=$r(e))||r>1&&i+n.length*o+s.length>=80);)n.push(s),i+=s.length,e=e.parentNode;return n.reverse().join(" > ")}catch(t){return"<unknown>"}}function $r(t){var e,n,r,i,o,s=t,a=[];if(!s||!s.tagName)return"";if(a.push(s.tagName.toLowerCase()),s.id&&a.push("#"+s.id),(e=s.className)&&Cr(e))for(n=e.split(/\s+/),o=0;o<n.length;o++)a.push("."+n[o]);var c=["type","name","title","alt"];for(o=0;o<c.length;o++)r=c[o],(i=s.getAttribute(r))&&a.push("["+r+'="'+i+'"]');return a.join("")}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Pr=function(t,e){return(Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Fr=function(){return(Fr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Br(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ur=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var Hr=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,Ur(r,n.prototype),r}return function(t,e){function n(){this.constructor=t}Pr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),qr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,Wr="Invalid Dsn",Gr=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.host,r=e.path,i=e.pass,o=e.port,s=e.projectId;return e.protocol+"://"+e.publicKey+(t&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+s},t.prototype._fromString=function(t){var e=qr.exec(t);if(!e)throw new Hr(Wr);var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.slice(1),6),r=n[0],i=n[1],o=n[2],s=void 0===o?"":o,a=n[3],c=n[4],l=void 0===c?"":c,u="",d=n[5],p=d.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),d=p.pop()),d){var h=d.match(/^\d+/);h&&(d=h[0])}this._fromComponents({host:a,pass:s,path:u,projectId:d,port:l,protocol:r,publicKey:i})},t.prototype._fromComponents=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new Hr("Invalid Dsn: "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new Hr("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new Hr("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new Hr("Invalid Dsn: Invalid port "+this.port)},t}();function Yr(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function zr(t,e){return t.require(e)}function Jr(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function Vr(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function Kr(t,e){return!!Cr(t)&&(n=e,"[object RegExp]"===Object.prototype.toString.call(n)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e));var n}var Xr={};function Zr(){return Yr()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:Xr}function Qr(){var t=Zr(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function ti(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function ei(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function ni(t){var e=Zr();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var i=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),i}function ri(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function ii(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}var oi=Zr(),si="Sentry Logger ",ai=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&ni((function(){oi.console.log(si+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&ni((function(){oi.console.warn(si+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&ni((function(){oi.console.error(si+"[Error]: "+t.join(" "))}))},t}();oi.__SENTRY__=oi.__SENTRY__||{};var ci=oi.__SENTRY__.logger||(oi.__SENTRY__.logger=new ai),li=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}(),ui="<anonymous>";function di(t){try{return t&&"function"==typeof t&&t.name||ui}catch(t){return ui}}function pi(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=i}}function hi(t){if(Or(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(Ar(t)){var i=t,o={};o.type=i.type;try{o.target=Nr(i.target)?Dr(i.target):Object.prototype.toString.call(i.target)}catch(t){o.target="<unknown>"}try{o.currentTarget=Nr(i.currentTarget)?Dr(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(t){o.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&jr(t,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i);return o}return t}function fi(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function mi(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=vi(t,e);return fi(r)>n?mi(t,e-1,n):r}function gi(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":Rr(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+di(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var n}function yi(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new li),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=gi(t);return Mr(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var i=gi(e,t);if(Mr(i))return i;var o=hi(e),s=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=yi(a,o[a],n-1,r));return r.unmemoize(e),s}function vi(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return yi(t,n,e)})))}catch(t){return"**non-serializable**"}}function _i(t,e){void 0===e&&(e=40);var n=Object.keys(hi(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Jr(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:Jr(i,e)}return""}function bi(t){var e,n;if(Rr(t)){var r=t,i={};try{for(var o=Br(Object.keys(r)),s=o.next();!s.done;s=o.next()){var a=s.value;void 0!==r[a]&&(i[a]=bi(r[a]))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(bi):t}function xi(){if(!("fetch"in Zr()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function Ei(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Si(){if(!xi())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var wi,Ti=Zr(),Oi={},ki={};function Ii(t){if(!ki[t])switch(ki[t]=!0,t){case"console":!function(){if(!("console"in Ti))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in Ti.console&&pi(Ti.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Mi("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,Ti.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in Ti))return;var t=Mi.bind(null,"dom"),e=ji(t,!0);Ti.document.addEventListener("click",e,!1),Ti.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var n=Ti[e]&&Ti[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(pi(n,"addEventListener",(function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this,s=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},a=s[n]=s[n]||{refCount:0};if(!a.handler){var c=ji(t);a.handler=c,e.call(this,n,c,i)}a.refCount+=1}catch(t){}return e.call(this,n,r,i)}})),pi(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var i=this,o=i.__sentry_instrumentation_handlers__||{},s=o[e];s&&(s.refCount-=1,s.refCount<=0&&(t.call(this,e,s.handler,r),s.handler=void 0,delete o[e]),0===Object.keys(o).length&&delete i.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in Ti))return;var t=[],e=[],n=XMLHttpRequest.prototype;pi(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,s=r[1];o.__sentry_xhr__={method:Cr(r[0])?r[0].toUpperCase():r[0],url:r[1]},Cr(s)&&"POST"===o.__sentry_xhr__.method&&s.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var a=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(t){}try{var n=t.indexOf(o);if(-1!==n){t.splice(n);var i=e.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(t){}Mi("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?pi(o,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a(),t.apply(o,e)}})):o.addEventListener("readystatechange",a),n.apply(o,r)}})),pi(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.push(this),e.push(r),Mi("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!xi())return!1;var t=Zr();if(Ei(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=Ei(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){ci.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;pi(Ti,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:Ri(e),url:Ai(e)},startTimestamp:Date.now()};return Mi("fetch",Fr({},r)),t.apply(Ti,e).then((function(t){return Mi("fetch",Fr(Fr({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw Mi("fetch",Fr(Fr({},r),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=Zr(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}())return;var t=Ti.onpopstate;function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var i=wi,o=String(r);wi=o,Mi("history",{from:i,to:o})}return t.apply(this,e)}}Ti.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ti.location.href,i=wi;if(wi=r,Mi("history",{from:i,to:r}),t)return t.apply(this,e)},pi(Ti.history,"pushState",e),pi(Ti.history,"replaceState",e)}();break;case"error":Di=Ti.onerror,Ti.onerror=function(t,e,n,r,i){return Mi("error",{column:r,error:i,line:n,msg:t,url:e}),!!Di&&Di.apply(this,arguments)};break;case"unhandledrejection":Pi=Ti.onunhandledrejection,Ti.onunhandledrejection=function(t){return Mi("unhandledrejection",t),!Pi||Pi.apply(this,arguments)};break;default:ci.warn("unknown instrumentation type:",t)}}function Ci(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(Oi[t.type]=Oi[t.type]||[],Oi[t.type].push(t.callback),Ii(t.type))}function Mi(t,e){var n,r;if(t&&Oi[t])try{for(var i=Br(Oi[t]||[]),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(e)}catch(e){ci.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+di(s)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ri(t){return void 0===t&&(t=[]),"Request"in Ti&&jr(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Ai(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in Ti&&jr(t[0],Request)?t[0].url:String(t[0])}var Ni,Li;function ji(t,e){return void 0===e&&(e=!1),function(n){if(n&&Li!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===Ni||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(Li,n))&&(t({event:n,name:r,global:e}),Li=n),clearTimeout(Ni),Ni=Ti.setTimeout((function(){Ni=void 0}),1e3)}}}var Di=null;var $i,Pi=null;!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}($i||($i={}));var Fi=function(){function t(t){var e=this;this._state=$i.PENDING,this._handlers=[],this._resolve=function(t){e._setResult($i.RESOLVED,t)},this._reject=function(t){e._setResult($i.REJECTED,t)},this._setResult=function(t,n){e._state===$i.PENDING&&(Lr(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==$i.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===$i.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===$i.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach((function(e,s){t.resolve(e).then((function(t){o[s]=t,0===(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,i){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void i(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void i(t)}else i(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var i,o;return n.then((function(t){o=!1,i=t,e&&e()}),(function(t){o=!0,i=t,e&&e()})).then((function(){o?r(i):t(i)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),Bi=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then((function(){return e.remove(t)})).then(null,(function(){return e.remove(t).then(null,(function(){}))})),t):Fi.reject(new Hr("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new Fi((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);Fi.all(e._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}(),Ui={nowSeconds:function(){return Date.now()/1e3}};var Hi=Yr()?function(){try{return zr(module,"perf_hooks").performance}catch(t){return}}():function(){var t=Zr().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),qi=void 0===Hi?Ui:{nowSeconds:function(){return(Hi.timeOrigin+Hi.now())/1e3}},Wi=Ui.nowSeconds.bind(Ui),Gi=qi.nowSeconds.bind(qi),Yi=function(){var t=Zr().performance;if(t)return t.timeOrigin?t.timeOrigin:t.timing&&t.timing.navigationStart||Date.now()}(),zi=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Tr(e._breadcrumbs),n._tags=Sr({},e._tags),n._extra=Sr({},e._extra),n._contexts=Sr({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Tr(e._eventProcessors)),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.setTags=function(t){return this._tags=Sr(Sr({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=Sr(Sr({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=Sr(Sr({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=Sr(Sr({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=Sr(Sr({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,e,n,r,i=this.getSpan();return(null===(t=i)||void 0===t?void 0:t.transaction)?null===(e=i)||void 0===e?void 0:e.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=Sr(Sr({},this._tags),e._tags),this._extra=Sr(Sr({},this._extra),e._extra),this._contexts=Sr(Sr({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint)):Rr(e)&&(e=e,this._tags=Sr(Sr({},this._tags),e.tags),this._extra=Sr(Sr({},this._extra),e.extra),this._contexts=Sr(Sr({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n=Sr({timestamp:Wi()},t);return this._breadcrumbs=void 0!==e&&e>=0?Tr(this._breadcrumbs,[n]).slice(-e):Tr(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){var n;if(this._extra&&Object.keys(this._extra).length&&(t.extra=Sr(Sr({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Sr(Sr({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Sr(Sr({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Sr(Sr({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=Sr({trace:this._span.getTraceContext()},t.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(t.tags=Sr({transaction:r},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=Tr(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(Tr(Ji(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,n,r){var i=this;return void 0===r&&(r=0),new Fi((function(o,s){var a=t[r];if(null===e||"function"!=typeof a)o(e);else{var c=a(Sr({},e),n);Lr(c)?c.then((function(e){return i._notifyEventProcessors(t,e,n,r+1).then(o)})).then(null,s):i._notifyEventProcessors(t,c,n,r+1).then(o).then(null,s)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function Ji(){var t=Zr();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Vi(t){Ji().push(t)}var Ki=function(){function t(t){this.errors=0,this.sid=Qr(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=hr.Ok,this.init=!0,t&&this.update(t)}return t.prototype.update=function(t){void 0===t&&(t={}),t.user&&(t.user.ip_address&&(this.ipAddress=t.user.ip_address),t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Date.now(),t.sid&&(this.sid=32===t.sid.length?t.sid:Qr()),void 0!==t.init&&(this.init=t.init),t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),"number"==typeof t.duration?this.duration=t.duration:this.duration=this.timestamp-this.started,t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),t.ipAddress&&(this.ipAddress=t.ipAddress),t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===hr.Ok?this.update({status:hr.Exited}):this.update()},t.prototype.toJSON=function(){return bi({sid:""+this.sid,init:this.init,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:bi({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),Xi=function(){function t(t,e,n){void 0===e&&(e=new zi),void 0===n&&(n=3),this._version=n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=zi.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=Qr(),r=e;if(!e){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(t){i=t}r={originalException:t,syntheticException:i}}return this._invokeClient("captureException",t,Sr(Sr({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=Qr(),i=n;if(!n){var o=void 0;try{throw new Error(t)}catch(t){o=t}i={originalException:t,syntheticException:o}}return this._invokeClient("captureMessage",t,e,Sr(Sr({},i),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=Qr();return this._invokeClient("captureEvent",t,Sr(Sr({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},s=o.beforeBreadcrumb,a=void 0===s?null:s,c=o.maxBreadcrumbs,l=void 0===c?100:c;if(!(l<=0)){var u=Wi(),d=Sr({timestamp:u},t),p=a?ni((function(){return a(d,e)})):d;null!==p&&r.addBreadcrumb(p,Math.min(l,100))}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=Qi(this);try{t(this)}finally{Qi(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return ci.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t,e,n,r,i;null===(n=null===(e=null===(t=this.getStackTop())||void 0===t?void 0:t.scope)||void 0===e?void 0:e.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(i=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===i||i.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,r=e.client,i=r&&r.getOptions()||{},o=i.release,s=i.environment,a=new Ki(Sr(Sr({release:o,environment:s},n&&{user:n.getUser()}),t));if(n){var c=n.getSession&&n.getSession();c&&c.status===hr.Ok&&c.update({status:hr.Exited}),this.endSession(),n.setSession(a)}return a},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,s=i.client;s&&s[t]&&(e=s)[t].apply(e,Tr(n,[o]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Zi(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[t])return i.extensions[t].apply(this,e);ci.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function Zi(){var t=Zr();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Qi(t){var e=Zi(),n=no(e);return ro(e,t),n}function to(){var t=Zi();return eo(t)&&!no(t).isOlderThan(3)||ro(t,new Xi),Yr()?function(t){var e,n,r;try{var i=null===(r=null===(n=null===(e=Zi().__SENTRY__)||void 0===e?void 0:e.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!i)return no(t);if(!eo(i)||no(i).isOlderThan(3)){var o=no(t).getStackTop();ro(i,new Xi(o.client,zi.clone(o.scope)))}return no(i)}catch(e){return no(t)}}(t):no(t)}function eo(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function no(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Xi),t.__SENTRY__.hub}function ro(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function io(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=to();if(r&&r[t])return r[t].apply(r,Er(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function oo(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return io("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function so(t){io("withScope",t)}var ao=function(){function t(t,e){void 0===e&&(e={}),this.dsn=t,this._dsnObject=new Gr(t),this.metadata=e}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.getBaseApiEndpoint=function(){var t=this._dsnObject,e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+e.toString()),t)if("dsn"!==i)if("user"===i){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return r.length?n+"?"+r.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t,e={sentry_key:this._dsnObject.publicKey,sentry_version:"7"};return t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},t}(),co=function(){return(co=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function lo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function uo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lo(arguments[e]));return t}var po=[];function ho(t){var e={};return function(t){var e=t.defaultIntegrations&&uo(t.defaultIntegrations)||[],n=t.integrations,r=[];if(Array.isArray(n)){var i=n.map((function(t){return t.name})),o=[];e.forEach((function(t){-1===i.indexOf(t.name)&&-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))})),n.forEach((function(t){-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))}))}else"function"==typeof n?(r=n(e),r=Array.isArray(r)?r:[r]):r=uo(e);var s=r.map((function(t){return t.name})),a="Debug";return-1!==s.indexOf(a)&&r.push.apply(r,uo(r.splice(s.indexOf(a),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===po.indexOf(t.name)&&(t.setupOnce(Vi,to),po.push(t.name),ci.log("Integration installed: "+t.name))}(t)})),e}var fo=function(){function t(t,e){this._integrations={},this._processing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new Gr(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,i=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return r._captureEvent(t,e,n)})).then((function(t){i=t}))),i},t.prototype.captureMessage=function(t,e,n,r){var i=this,o=n&&n.event_id,s=Mr(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(s.then((function(t){return i._captureEvent(t,n,r)})).then((function(t){o=t}))),o},t.prototype.captureEvent=function(t,e,n){var r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((function(t){r=t}))),r},t.prototype.captureSession=function(t){t.release?(this._sendSession(t),t.update({init:!1})):ci.warn("Discarded session because of missing release")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientProcessing(t).then((function(n){return e._getBackend().getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=ho(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return ci.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var n,r,i,o=!1,s=!1,a=e.exception&&e.exception.values;if(a){s=!0;try{for(var c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),l=c.next();!l.done;l=c.next()){var u=l.value.mechanism;if(u&&!1===u.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var d=e.user;if(!t.userAgent){var p=e.request?e.request.headers:{};for(var h in p)if("user-agent"===h.toLowerCase()){i=p[h];break}}t.update(co(co({},o&&{status:hr.Crashed}),{user:d,userAgent:i,errors:t.errors+Number(s||o)})),this.captureSession(t)},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientProcessing=function(t){var e=this;return new Fi((function(n){var r=0,i=setInterval((function(){0==e._processing?(clearInterval(i),n(!0)):(r+=1,t&&r>=t&&(clearInterval(i),n(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,s=co(co({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:Qr()),timestamp:t.timestamp||Wi()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=e;n&&n.captureContext&&(a=zi.clone(a).update(n.captureContext));var c=Fi.resolve(s);return a&&(c=a.applyToEvent(s,n)),c.then((function(t){return"number"==typeof o&&o>0?r._normalizeEvent(t,o):t}))},t.prototype._normalizeEvent=function(t,e){if(!t)return null;var n=co(co(co(co(co({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return co(co({},t),t.data&&{data:vi(t.data,e)})}))}),t.user&&{user:vi(t.user,e)}),t.contexts&&{contexts:vi(t.contexts,e)}),t.extra&&{extra:vi(t.extra,e)});return t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace),n},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,r=e.release,i=e.dist,o=e.maxValueLength,s=void 0===o?250:o;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==i&&(t.dist=i),t.message&&(t.message=Jr(t.message,s));var a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Jr(a.value,s));var c=t.request;c&&c.url&&(c.url=Jr(c.url,s))},t.prototype._applyIntegrationsMetadata=function(t){var e=t.sdk,n=Object.keys(this._integrations);e&&n.length>0&&(e.integrations=n)},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then((function(t){return t.event_id}),(function(t){ci.error(t)}))},t.prototype._processEvent=function(t,e,n){var r=this,i=this.getOptions(),o=i.beforeSend,s=i.sampleRate;if(!this._isEnabled())return Fi.reject(new Hr("SDK not enabled, will not send event."));var a="transaction"===t.type;return!a&&"number"==typeof s&&Math.random()>s?Fi.reject(new Hr("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(t,n,e).then((function(t){if(null===t)throw new Hr("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||a||!o)return t;var n=o(t,e);if(void 0===n)throw new Hr("`beforeSend` method has to return `null` or a valid event.");return Lr(n)?n.then((function(t){return t}),(function(t){throw new Hr("beforeSend rejected with "+t)})):n})).then((function(t){if(null===t)throw new Hr("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!a&&e&&r._updateSessionFromEvent(e,t),r._sendEvent(t),t})).then(null,(function(t){if(t instanceof Hr)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new Hr("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._processing+=1,t.then((function(t){return e._processing-=1,t}),(function(t){return e._processing-=1,t}))},t}(),mo=function(){function t(){}return t.prototype.sendEvent=function(t){return Fi.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:mr.Skipped})},t.prototype.close=function(t){return Fi.resolve(!0)},t}(),go=function(){function t(t){this._options=t,this._options.dsn||ci.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new Hr("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new Hr("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){ci.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,(function(t){ci.error("Error while sending session: "+t)})):ci.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new mo},t}();function yo(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function vo(t,e){return e?(t.sdk=t.sdk||{name:e.name,version:e.version},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=uo(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=uo(t.sdk.packages||[],e.packages||[]),t):t}function _o(t,e){var n=yo(e);return{body:JSON.stringify(co({sent_at:(new Date).toISOString()},n&&{sdk:n}))+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(t),type:"session",url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function bo(t,e){var n=yo(e),r=t.type||"event",i="transaction"===r,o=t.debug_meta||{},s=o.transactionSampling,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["transactionSampling"]),c=s||{},l=c.method,u=c.rate;0===Object.keys(a).length?delete t.debug_meta:t.debug_meta=a;var d={body:JSON.stringify(n?vo(t,e.metadata.sdk):t),type:r,url:i?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(i){var p=JSON.stringify(co({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}))+"\n"+JSON.stringify({type:t.type,sample_rates:[{id:l,rate:u}]})+"\n"+d.body;d.body=p}return d}var xo,Eo="6.2.1",So=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){xo=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return xo.apply(n,t)}},t.id="FunctionToString",t}(),wo=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],To=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Vi((function(e){var n=to();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},s=r._mergeOptions(o);if(r._shouldDropEvent(e,s))return null}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(ci.warn("Event dropped due to being internal Sentry Error.\nEvent: "+ei(t)),!0):this._isIgnoredError(t,e)?(ci.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+ei(t)),!0):this._isDeniedUrl(t,e)?(ci.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+ei(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(ci.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+ei(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return Kr(t,e)}))}))},t.prototype._isDeniedUrl=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.denyUrls.some((function(t){return Kr(n,t)}))},t.prototype._isAllowedUrl=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.allowUrls.some((function(t){return Kr(n,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:uo(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:uo(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:uo(this._options.ignoreErrors||[],t.ignoreErrors||[],wo),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,i=e.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(e){return ci.error("Cannot extract message for event "+ei(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return ci.error("Cannot extract url for event "+ei(t)),null}},t.id="InboundFilters",t}(),Oo="?",ko=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Io=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Co=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Mo=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ro=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ao=/Minified React error #\d+;/i;function No(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:Ao.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=t.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),s=[],a=0;a<o.length;a+=2){var c=null;(e=r.exec(o[a]))?c={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=i.exec(o[a]))&&(c={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),c&&(!c.func&&c.line&&(c.func=Oo),s.push(c))}if(!s.length)return null;return{message:jo(t),name:t.name,stack:s}}(t))return Lo(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,i=[],o=t.stack.split("\n"),s=0;s<o.length;++s){if(n=ko.exec(o[s])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=Ro.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||Oo,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=Co.exec(o[s]))r={url:n[2],func:n[1]||Oo,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=Io.exec(o[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=Mo.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==s||n[5]||void 0===t.columnNumber||(i[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||Oo,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=Oo),i.push(r)}if(!i.length)return null;return{message:jo(t),name:t.name,stack:i}}(t))return Lo(e,n)}catch(t){}return{message:jo(t),name:t&&t.name,stack:[],failed:!0}}function Lo(t,e){try{return yr(yr({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function jo(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function Do(t){var e=Po(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function $o(t){return{exception:{values:[Do(t)]}}}function Po(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function Fo(t,e,n){var r,i;if(void 0===n&&(n={}),kr(t)&&t.error)return r=$o(No(t=t.error));if(Ir(t)||(i=t,"[object DOMException]"===Object.prototype.toString.call(i))){var o=t,s=o.name||(Ir(o)?"DOMError":"DOMException"),a=o.message?s+": "+o.message:s;return ri(r=Bo(a,e,n),a),"code"in o&&(r.tags=yr(yr({},r.tags),{"DOMException.code":""+o.code})),r}return Or(t)?r=$o(No(t)):Rr(t)||Ar(t)?(ii(r=function(t,e,n){var r={exception:{values:[{type:Ar(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+_i(t)}]},extra:{__serialized__:mi(t)}};if(e){var i=Po(No(e).stack);r.stacktrace={frames:i}}return r}(t,e,n.rejection),{synthetic:!0}),r):(ri(r=Bo(t,e,n),""+t,void 0),ii(r,{synthetic:!0}),r)}function Bo(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=Po(No(e).stack);r.stacktrace={frames:i}}return r}var Uo=function(){function t(t){this.options=t,this._buffer=new Bi(30),this._rateLimits={},this._api=new ao(t.dsn,t._metadata),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new Hr("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,r=t.headers,i=t.resolve,o=t.reject,s=mr.fromHttpCode(n.status);this._handleRateLimit(r)&&ci.warn("Too many requests, backing off until: "+this._disabledUntil(e)),s!==mr.Success?o(n):i({status:s})},t.prototype._disabledUntil=function(t){return this._rateLimits[t]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,n,r,i,o=Date.now(),s=t["x-sentry-rate-limits"],a=t["retry-after"];if(s){try{for(var c=vr(s.trim().split(",")),l=c.next();!l.done;l=c.next()){var u=l.value.split(":",2),d=parseInt(u[0],10),p=1e3*(isNaN(d)?60:d);try{for(var h=(r=void 0,vr(u[1].split(";"))),f=h.next();!f.done;f=h.next()){var m=f.value;this._rateLimits[m||"all"]=new Date(o+p)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return!0}return!!a&&(this._rateLimits.all=new Date(o+function(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}(o,a)),!0)},t}(),Ho=Zr(),qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(bo(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(_o(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;if(this._isRateLimited(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:Si()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add(new Fi((function(e,i){Ho.fetch(t.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:t.type,response:r,headers:o,resolve:e,reject:i})})).catch(i)})))},e}(Uo),Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(bo(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(_o(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;return this._isRateLimited(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429}):this._buffer.add(new Fi((function(e,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:t.type,response:i,headers:o,resolve:e,reject:r})}},i.open("POST",t.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(t.body)})))},e}(Uo),Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.eventFromException=function(t,e){return function(t,e,n){var r=Fo(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return ii(r,{handled:!0,type:"generic"}),r.level=fr.Error,n&&n.event_id&&(r.event_id=n.event_id),Fi.resolve(r)}(this._options,t,e)},e.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=fr.Info),function(t,e,n,r){void 0===n&&(n=fr.Info);var i=Bo(e,r&&r.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Fi.resolve(i)}(this._options,t,e,n)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=yr(yr({},this._options.transportOptions),{dsn:this._options.dsn,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(e):xi()?new qo(e):new Wo(e)},e}(go),Yo=0;function zo(){return Yo>0}function Jo(){Yo+=1,setTimeout((function(){Yo-=1}))}function Vo(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(t){return Vo(t,e)}));return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(t){throw Jo(),so((function(n){n.addEventProcessor((function(t){var n=yr({},t);return e.mechanism&&(ri(n,void 0,void 0),ii(n,e.mechanism)),n.extra=yr(yr({},n.extra),{arguments:r}),n})),oo(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}function Ko(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new ao(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else ci.error("Missing dsn option in showReportDialog call");else ci.error("Missing eventId option in showReportDialog call")}var Xo=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=yr({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(ci.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(ci.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(Ci({callback:function(n){var r=n.error,i=to(),o=i.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(o&&!zo()&&!s){var a=i.getClient(),c=Mr(r)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(Fo(r,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);ii(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(Ci({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(t){}var i=to(),o=i.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(!o||zo()||s)return!0;var a=i.getClient(),c=Mr(r)?e._eventFromRejectionWithPrimitive(r):Fo(r,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!0});c.level=fr.Error,ii(c,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var i,o=kr(t)?t.message:t;if(Cr(o)){var s=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(i=s[1],o=s[2])}var a={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(a,e,n,r)},t.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,s=Cr(e)&&e.length>0?e:function(){try{return document.location.href}catch(t){return""}}();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:i,filename:s,function:"?",in_app:!0,lineno:o}),t},t.id="GlobalHandlers",t}(),Zo=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Qo=function(){function t(e){this.name=t.id,this._options=yr({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=Zr();(this._options.setTimeout&&pi(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&pi(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&pi(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&pi(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Zo).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Vo(r,{mechanism:{data:{function:di(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,Vo(e,{mechanism:{data:{function:"requestAnimationFrame",handler:di(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=Zr(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(pi(n,"addEventListener",(function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=Vo(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:di(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Vo(r,{mechanism:{data:{function:"addEventListener",handler:di(r),target:t},handled:!0,type:"instrument"}}),i)}})),pi(n,"removeEventListener",(function(t){return function(e,n,r){var i,o=n;try{var s=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;s&&t.call(this,e,s,r)}catch(t){}return t.call(this,e,o,r)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(t){t in r&&"function"==typeof r[t]&&pi(r,t,(function(e){var n={mechanism:{data:{function:t,handler:di(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=di(e.__sentry_original__)),Vo(e,n)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),ts=function(){function t(e){this.name=t.id,this._options=yr({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&to().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ei(t)},{event:t})},t.prototype.setupOnce=function(){var t=this;this._options.console&&Ci({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,br(e))},type:"console"}),this._options.dom&&Ci({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,br(e))},type:"dom"}),this._options.xhr&&Ci({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,br(e))},type:"xhr"}),this._options.fetch&&Ci({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,br(e))},type:"fetch"}),this._options.history&&Ci({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,br(e))},type:"history"})},t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:fr.fromString(t.level),message:Vr(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(Vr(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}to().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e;try{e=t.event.target?Dr(t.event.target):Dr(t.event)}catch(t){e="<unknown>"}0!==e.length&&to().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name,global:t.global})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,i=e.status_code,o=e.body;to().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:t.xhr,input:o})}else;},t.prototype._fetchBreadcrumb=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?to().addBreadcrumb({category:"fetch",data:t.fetchData,level:fr.Error,type:"http"},{data:t.error,input:t.args}):to().addBreadcrumb({category:"fetch",data:yr(yr({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype._historyBreadcrumb=function(t){var e=Zr(),n=t.from,r=t.to,i=ti(e.location.href),o=ti(n),s=ti(r);o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),to().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.id="Breadcrumbs",t}(),es=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){Vi((function(e,n){var r=to().getIntegration(t);return r?r._handler(e,n):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&jr(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=br(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!jr(t[e],Error)||n.length+1>=this._limit)return n;var r=Do(No(t[e]));return this._walkErrorTree(t[e],e,br([r],n))},t.id="LinkedErrors",t}(),ns=Zr(),rs=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Vi((function(e){var n,r,i;if(to().getIntegration(t)){if(!ns.navigator&&!ns.location&&!ns.document)return e;var o=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=ns.location)||void 0===r?void 0:r.href),s=(ns.document||{}).referrer,a=(ns.navigator||{}).userAgent,c=yr(yr(yr({},null===(i=e.request)||void 0===i?void 0:i.headers),s&&{Referer:s}),a&&{"User-Agent":a}),l=yr(yr({},o&&{url:o}),{headers:c});return yr(yr({},e),{request:l})}return e}))},t.id="UserAgent",t}(),is=function(t){function e(e){void 0===e&&(e={});return e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Eo}],version:Eo},t.call(this,Go,e)||this}return pr(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),Zr().document&&(this._isEnabled()?Ko(yr(yr({},t),{dsn:t.dsn||this.getDsn()})):ci.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",t.prototype._prepareEvent.call(this,e,n,r)},e.prototype._sendEvent=function(e){var n=this.getIntegration(ts);n&&n.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(fo),os=[new To,new So,new Qo,new ts,new Xo,new es,new rs];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var ss=function(t,e){return(ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function as(t,e){function n(){this.constructor=t}ss(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var cs,ls=function(){return(ls=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function us(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ds(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(us(arguments[e]));return t}!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(cs||(cs={})),function(t){t.fromHttpCode=function(e){if(e<400)return t.Ok;if(e>=400&&e<500)switch(e){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}}(cs||(cs={}));var ps=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function hs(t){return"tracesSampleRate"in t||"tracesSampler"in t}function fs(t){var e,n;return void 0===t&&(t=to()),null===(n=null===(e=t)||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTransaction()}function ms(t){return t/1e3}function gs(){var t=fs();t&&(ci.log("[Tracing] Transaction: "+cs.InternalError+" -> Global error occured"),t.setStatus(cs.InternalError))}var ys=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this._maxlen=t}return t.prototype.add=function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)},t}(),vs=function(t){function e(e,n){var r=t.call(this,e)||this;return r._metadata={},r._measurements={},r._hub=to(),jr(n,Xi)&&(r._hub=n),r.name=e.name||"",r._trimEnd=e.trimEnd,r.transaction=r,r}return as(e,t),e.prototype.setName=function(t){this.name=t},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new ys(t)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(t){this._measurements=ls({},t)},e.prototype.setMetadata=function(t){this._metadata=ls(ls({},this._metadata),t)},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(ci.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var r=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==n&&t.endTimestamp})):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var i={contexts:{trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this._metadata};return Object.keys(this._measurements).length>0&&(ci.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),this._hub.captureEvent(i)}ci.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},e.prototype.toContext=function(){var e=t.prototype.toContext.call(this);return bi(ls(ls({},e),{name:this.name,trimEnd:this._trimEnd}))},e.prototype.updateWithContext=function(e){var n;return t.prototype.updateWithContext.call(this,e),this.name=null!=(n=e.name)?n:"",this._trimEnd=e.trimEnd,this},e}(function(){function t(t){if(this.traceId=Qr(),this.spanId=Qr().substring(16),this.startTimestamp=Gi(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(e){var n=new t(ls(ls({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},t.prototype.setTag=function(t,e){var n;return this.tags=ls(ls({},this.tags),((n={})[t]=e,n)),this},t.prototype.setData=function(t,e){var n;return this.data=ls(ls({},this.data),((n={})[t]=e,n)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var e=cs.fromHttpCode(t);return e!==cs.UnknownError&&this.setStatus(e),this},t.prototype.isSuccess=function(){return this.status===cs.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:Gi()},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.toContext=function(){return bi({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(t){var e,n,r,i,o;return this.data=null!=(e=t.data)?e:{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.startTimestamp=null!=(r=t.startTimestamp)?r:this.startTimestamp,this.status=t.status,this.tags=null!=(i=t.tags)?i:{},this.traceId=null!=(o=t.traceId)?o:this.traceId,this},t.prototype.getTraceContext=function(){return bi({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return bi({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}()),_s=function(t){function e(e,n,r,i){void 0===r&&(r="");var o=t.call(this,i)||this;return o._pushActivity=e,o._popActivity=n,o.transactionSpanId=r,o}return as(e,t),e.prototype.add=function(e){var n=this;e.spanId!==this.transactionSpanId&&(e.finish=function(t){e.endTimestamp="number"==typeof t?t:Gi(),n._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),t.prototype.add.call(this,e)},e}(ys),bs=function(t){function e(e,n,r,i){void 0===r&&(r=1e3),void 0===i&&(i=!1);var o=t.call(this,e,n)||this;return o._idleHub=n,o._idleTimeout=r,o._onScope=i,o.activities={},o._heartbeatTimer=0,o._heartbeatCounter=0,o._finished=!1,o._beforeFinishCallbacks=[],n&&i&&(xs(n),ci.log("Setting idle transaction on scope. Span ID: "+o.spanId),n.configureScope((function(t){return t.setSpan(o)}))),o._initTimeout=setTimeout((function(){o._finished||o.finish()}),o._idleTimeout),o}return as(e,t),e.prototype.finish=function(e){var n,r,i=this;if(void 0===e&&(e=Gi()),this._finished=!0,this.activities={},this.spanRecorder){ci.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._beforeFinishCallbacks),s=o.next();!s.done;s=o.next()){(0,s.value)(this,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(t){if(t.spanId===i.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus(cs.Cancelled),ci.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));var n=t.startTimestamp<e;return n||ci.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),ci.log("[Tracing] flushing IdleTransaction")}else ci.log("[Tracing] No active IdleTransaction");return this._onScope&&xs(this._idleHub),t.prototype.finish.call(this,e)},e.prototype.registerBeforeFinishCallback=function(t){this._beforeFinishCallbacks.push(t)},e.prototype.initSpanRecorder=function(t){var e=this;if(!this.spanRecorder){this.spanRecorder=new _s((function(t){e._finished||e._pushActivity(t)}),(function(t){e._finished||e._popActivity(t)}),this.spanId,t),ci.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},e.prototype._pushActivity=function(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),ci.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,ci.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype._popActivity=function(t){var e=this;if(this.activities[t]&&(ci.log("[Tracing] popActivity "+t),delete this.activities[t],ci.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,r=Gi()+n/1e3;setTimeout((function(){e._finished||e.finish(r)}),n)}},e.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var t=Object.keys(this.activities),e=t.length?t.reduce((function(t,e){return t+e})):"";e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(ci.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(cs.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},e.prototype._pingHeartbeat=function(){var t=this;ci.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){t._beat()}),5e3)},e}(vs);function xs(t){if(t){var e=t.getScope();if(e)e.getTransaction()&&e.setSpan(void 0)}}function Es(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function Ss(t,e,n){return hs(e)?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:gr.Explicit}}),t):("function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:gr.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:gr.Inheritance}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:gr.Rate,rate:Number(r)}})),function(t){if(isNaN(t)||"number"!=typeof t&&"boolean"!=typeof t)return ci.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1;if(t<0||t>1)return ci.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1;return!0}(r)?r?(t.sampled=Math.random()<r,t.sampled?(ci.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(ci.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),t)):(ci.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(ci.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var r}function ws(t,e){var n,r,i=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},o=new vs(t,this);return(o=Ss(o,i,ls({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&o.initSpanRecorder(null===(r=i._experiments)||void 0===r?void 0:r.maxSpans),o}var Ts=Zr();var Os,ks,Is=function(t,e,n,r){var i;return function(){n&&e.isFinal&&n.disconnect(),e.value>=0&&(r||e.isFinal||"hidden"===document.visibilityState)&&(e.delta=e.value-(i||0),(e.delta||e.isFinal||void 0===i)&&(t(e),i=e.value))}},Cs=function(t,e){return void 0===e&&(e=-1),{name:t,value:e,delta:0,entries:[],id:Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12),isFinal:!1}},Ms=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},Rs=!1,As=!1,Ns=function(t){Rs=!t.persisted},Ls=function(t,e){void 0===e&&(e=!1),As||(addEventListener("pagehide",Ns),addEventListener("beforeunload",(function(){})),As=!0),addEventListener("visibilitychange",(function(e){var n=e.timeStamp;"hidden"===document.visibilityState&&t({timeStamp:n,isUnloading:Rs})}),{capture:!0,once:e})},js=function(){return void 0===Os&&(Os="hidden"===document.visibilityState?0:1/0,Ls((function(t){var e=t.timeStamp;return Os=e}),!0)),{get timeStamp(){return Os}}},Ds=function(t,e){void 0===e&&(e=!1);var n,r=Cs("LCP"),i=js(),o=function(t){var e=t.startTime;e<i.timeStamp?(r.value=e,r.entries.push(t)):r.isFinal=!0,n()},s=Ms("largest-contentful-paint",o);if(s){n=Is(t,r,s,e);var a=function(){r.isFinal||(s.takeRecords().map(o),r.isFinal=!0,n())};(ks||(ks=new Promise((function(t){return["scroll","keydown","pointerdown"].map((function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})}))}))),ks).then(a),Ls(a,!0)}},$s=Zr(),Ps=function(t){var e,n=Cs("TTFB");e=function(){try{var e=$s.performance.getEntriesByType("navigation")[0]||function(){var t=$s.performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();n.value=n.delta=e.responseStart,n.entries=[e],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)},Fs=Zr(),Bs=function(){function t(){this._measurements={},this._performanceCursor=0,Fs&&Fs.performance&&(Fs.performance.mark&&Fs.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID(),this._trackTTFB())}return t.prototype.addPerformanceEntries=function(t){var e=this;if(Fs&&Fs.performance&&Fs.performance.getEntries&&Yi){ci.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,i,o=ms(Yi);if(Fs.document)for(var s=0;s<document.scripts.length;s++)if("true"===document.scripts[s].dataset.entry){n=document.scripts[s].src;break}if(Fs.performance.getEntries().slice(this._performanceCursor).forEach((function(s){var a=ms(s.startTime),c=ms(s.duration);if(!("navigation"===t.op&&o+a<t.startTimestamp))switch(s.entryType){case"navigation":!function(t,e,n){Us(t,e,"unloadEvent",n),Us(t,e,"redirect",n),Us(t,e,"domContentLoadedEvent",n),Us(t,e,"loadEvent",n),Us(t,e,"connect",n),Us(t,e,"secureConnection",n,"connectEnd"),Us(t,e,"fetch",n,"domainLookupStart"),Us(t,e,"domainLookup",n),function(t,e,n){Hs(t,{op:"browser",description:"request",startTimestamp:n+ms(e.requestStart),endTimestamp:n+ms(e.responseEnd)}),Hs(t,{op:"browser",description:"response",startTimestamp:n+ms(e.responseStart),endTimestamp:n+ms(e.responseEnd)})}(t,e,n)}(t,s,o);break;case"mark":case"paint":case"measure":var l=function(t,e,n,r,i){var o=i+n,s=o+r;return Hs(t,{description:e.name,endTimestamp:s,op:e.entryType,startTimestamp:o}),o}(t,s,a,c,o);void 0===i&&"sentry-tracing-init"===s.name&&(i=l);var u=js(),d=s.startTime<u.timeStamp;"first-paint"===s.name&&d&&(ci.log("[Measurements] Adding FP"),e._measurements.fp={value:s.startTime},e._measurements["mark.fp"]={value:l}),"first-contentful-paint"===s.name&&d&&(ci.log("[Measurements] Adding FCP"),e._measurements.fcp={value:s.startTime},e._measurements["mark.fcp"]={value:l});break;case"resource":var p=s.name.replace(window.location.origin,""),h=function(t,e,n,r,i,o){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var s={};"transferSize"in e&&(s["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(s["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(s["Decoded Body Size"]=e.decodedBodySize);var a=o+r,c=a+i;return Hs(t,{description:n,endTimestamp:c,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:a,data:s}),c}(t,s,p,a,c,o);void 0===r&&(n||"").indexOf(p)>-1&&(r=h)}})),void 0!==r&&void 0!==i&&Hs(t,{description:"evaluation",endTimestamp:i,op:"script",startTimestamp:r}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(t),"pageload"===t.op){var a=ms(Yi);["fcp","fp","lcp","ttfb"].forEach((function(n){if(e._measurements[n]&&!(a>=t.startTimestamp)){var r=e._measurements[n].value,i=a+ms(r),o=Math.abs(1e3*(i-t.startTimestamp)),s=o-r;ci.log("[Measurements] Normalized "+n+" from "+r+" to "+o+" ("+s+")"),e._measurements[n].value=o}})),this._measurements["mark.fid"]&&this._measurements.fid&&Hs(t,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+ms(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),t.setMeasurements(this._measurements)}}},t.prototype._trackCLS=function(){var t=this;!function(t,e){void 0===e&&(e=!1);var n,r=Cs("CLS",0),i=function(t){t.hadRecentInput||(r.value+=t.value,r.entries.push(t),n())},o=Ms("layout-shift",i);o&&(n=Is(t,r,o,e),Ls((function(t){var e=t.isUnloading;o.takeRecords().map(i),e&&(r.isFinal=!0),n()})))}((function(e){e.entries.pop()&&(ci.log("[Measurements] Adding CLS"),t._measurements.cls={value:e.value})}))},t.prototype._trackNavigator=function(t){var e=Fs.navigator;if(e){var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),qs(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),qs(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),qs(e.deviceMemory)&&t.setTag("deviceMemory",String(e.deviceMemory)),qs(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}},t.prototype._trackLCP=function(){var t=this;Ds((function(e){var n=e.entries.pop();if(n){var r=ms(performance.timeOrigin),i=ms(n.startTime);ci.log("[Measurements] Adding LCP"),t._measurements.lcp={value:e.value},t._measurements["mark.lcp"]={value:r+i}}}))},t.prototype._trackFID=function(){var t,e,n,r,i,o,s=this;t=function(t){var e=t.entries.pop();if(e){var n=ms(performance.timeOrigin),r=ms(e.startTime);ci.log("[Measurements] Adding FID"),s._measurements.fid={value:t.value},s._measurements["mark.fid"]={value:n+r}}},e=Cs("FID"),n=js(),i=Ms("first-input",r=function(t){t.startTime<n.timeStamp&&(e.value=t.processingStart-t.startTime,e.entries.push(t),e.isFinal=!0,o())}),o=Is(t,e,i),i?Ls((function(){i.takeRecords().map(r),i.disconnect()}),!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((function(t,r){r.timeStamp<n.timeStamp&&(e.value=t,e.isFinal=!0,e.entries=[{entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+t}],o())}))},t.prototype._trackTTFB=function(){var t=this;Ps((function(e){var n,r=e.entries.pop();if(r){ci.log("[Measurements] Adding TTFB"),t._measurements.ttfb={value:e.value};var i=e.value-(n=e.entries[0],null!=n?n:r).requestStart;t._measurements["ttfb.requestTime"]={value:i}}}))},t}();function Us(t,e,n,r,i){var o=i?e[i]:e[n+"End"],s=e[n+"Start"];s&&o&&Hs(t,{op:"browser",description:n,startTimestamp:r+ms(s),endTimestamp:r+ms(o)})}function Hs(t,e){var n=e.startTimestamp,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(ls({startTimestamp:n},r))}function qs(t){return"number"==typeof t&&isFinite(t)}var Ws={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function Gs(t){var e=ls(ls({},Ws),t),n=e.traceFetch,r=e.traceXHR,i=e.tracingOrigins,o=e.shouldCreateSpanForRequest,s={},a=function(t){if(s[t])return s[t];var e=i;return s[t]=e.some((function(e){return Kr(t,e)}))&&!Kr(t,"sentry_key"),s[t]},c=a;"function"==typeof o&&(c=function(t){return a(t)&&o(t)});var l={};n&&Ci({callback:function(t){!function(t,e,n){var r,i=null===(r=to().getClient())||void 0===r?void 0:r.getOptions();if(!(i&&hs(i)&&t.fetchData&&e(t.fetchData.url)))return;if(t.endTimestamp&&t.fetchData.__span){if(a=n[t.fetchData.__span]){var o=t.response;o&&a.setHttpStatus(o.status),a.finish(),delete n[t.fetchData.__span]}return}var s=fs();if(s){var a=s.startChild({data:ls(ls({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http"});t.fetchData.__span=a.spanId,n[a.spanId]=a;var c=t.args[0]=t.args[0],l=t.args[1]=t.args[1]||{},u=l.headers;jr(c,Request)&&(u=c.headers),u?"function"==typeof u.append?u.append("sentry-trace",a.toTraceparent()):u=Array.isArray(u)?ds(u,[["sentry-trace",a.toTraceparent()]]):ls(ls({},u),{"sentry-trace":a.toTraceparent()}):u={"sentry-trace":a.toTraceparent()},l.headers=u}}(t,c,l)},type:"fetch"}),r&&Ci({callback:function(t){!function(t,e,n){var r,i=null===(r=to().getClient())||void 0===r?void 0:r.getOptions();if(!i||!hs(i)||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url))||t.xhr.__sentry_own_request__)return;var o=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){return void((a=n[t.xhr.__sentry_xhr_span_id__])&&(a.setHttpStatus(o.status_code),a.finish(),delete n[t.xhr.__sentry_xhr_span_id__]))}var s=fs();if(s){var a=s.startChild({data:ls(ls({},o.data),{type:"xhr",method:o.method,url:o.url}),description:o.method+" "+o.url,op:"http"});if(t.xhr.__sentry_xhr_span_id__=a.spanId,n[t.xhr.__sentry_xhr_span_id__]=a,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",a.toTraceparent())}catch(t){}}}(t,c,l)},type:"xhr"})}var Ys=Zr();var zs=ls({idleTimeout:1e3,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),Ys&&Ys.location){var r,i=Ys.location.href;e&&(r=t({name:Ys.location.pathname,op:"pageload"})),n&&Ci({callback:function(e){var n=e.to,o=e.from;void 0===o&&i&&-1!==i.indexOf(n)?i=void 0:o!==n&&(i=void 0,r&&(ci.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=t({name:Ys.location.pathname,op:"navigation"}))},type:"history"})}else ci.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},Ws),Js=function(){function t(e){this.name=t.id,this._metrics=new Bs,this._emitOptionsWarning=!1;var n=Ws.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&0!==e.tracingOrigins.length?n=e.tracingOrigins:this._emitOptionsWarning=!0,this.options=ls(ls(ls({},zs),e),{tracingOrigins:n})}return t.prototype.setupOnce=function(t,e){var n=this;this._getCurrentHub=e,this._emitOptionsWarning&&(ci.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),ci.warn("[Tracing] We added a reasonable default for you: "+Ws.tracingOrigins));var r=this.options,i=r.routingInstrumentation,o=r.startTransactionOnLocationChange,s=r.startTransactionOnPageLoad,a=r.markBackgroundTransactions,c=r.traceFetch,l=r.traceXHR,u=r.tracingOrigins,d=r.shouldCreateSpanForRequest;i((function(t){return n._createRouteTransaction(t)}),s,o),a&&(Ts&&Ts.document?Ts.document.addEventListener("visibilitychange",(function(){var t=fs();Ts.document.hidden&&t&&(ci.log("[Tracing] Transaction: "+cs.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(cs.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())})):ci.warn("[Tracing] Could not set up background tab detection due to lack of global document")),Gs({traceFetch:c,traceXHR:l,tracingOrigins:u,shouldCreateSpanForRequest:d})},t.prototype._createRouteTransaction=function(t){var e=this;if(this._getCurrentHub){var n=this.options,r=n.beforeNavigate,i=n.idleTimeout,o=n.maxTransactionDuration,s="pageload"===t.op?function(){var t=(e="sentry-trace",n=document.querySelector("meta[name="+e+"]"),n?n.getAttribute("content"):null);var e,n;if(t)return function(t){var e=t.match(ps);if(e){var n=void 0;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}}(t);return}():void 0,a=ls(ls(ls({},t),s),{trimEnd:!0}),c="function"==typeof r?r(a):a,l=void 0===c?ls(ls({},a),{sampled:!1}):c;!1===l.sampled&&ci.log("[Tracing] Will not send "+l.op+" transaction because of beforeNavigate."),ci.log("[Tracing] Starting "+l.op+" transaction on scope");var u=function(t,e,n,r,i){var o,s,a=(null===(o=t.getClient())||void 0===o?void 0:o.getOptions())||{},c=new bs(e,t,n,r);return(c=Ss(c,a,ls({parentSampled:e.parentSampled,transactionContext:e},i))).sampled&&c.initSpanRecorder(null===(s=a._experiments)||void 0===s?void 0:s.maxSpans),c}(this._getCurrentHub(),l,i,!0,{location:Zr().location});return u.registerBeforeFinishCallback((function(t,n){e._metrics.addPerformanceEntries(t),function(t,e,n){var r=n-e.startTimestamp;n&&(r>t||r<0)&&(e.setStatus(cs.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}(1e3*o,t,n)})),u}ci.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.")},t.id="BrowserTracing",t}();var Vs=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return t.prototype.setupOnce=function(){this._router?function(t,e){void 0===e&&(e=[]);e.forEach((function(e){return function(t,e){var n=t[e];return t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.call.apply(n,ds([this],Xs(t,e)))},t}(t,e)}))}(this._router,this._methods):ci.error("ExpressIntegration is missing an Express instance")},t.id="Express",t}();function Ks(t,e){var n=t.length;switch(n){case 2:return function(n,r){var i=r.__sentry_transaction;if(i){var o=i.startChild({description:t.name,op:"middleware."+e});r.once("finish",(function(){o.finish()}))}return t.call(this,n,r)};case 3:return function(n,r,i){var o,s=null===(o=r.__sentry_transaction)||void 0===o?void 0:o.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=s)||void 0===t||t.finish(),i.call.apply(i,ds([this],e))}))};case 4:return function(n,r,i,o){var s,a=null===(s=i.__sentry_transaction)||void 0===s?void 0:s.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,i,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=a)||void 0===t||t.finish(),o.call.apply(o,ds([this],e))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function Xs(t,e){return t.map((function(t){return"function"==typeof t?Ks(t,e):Array.isArray(t)?t.map((function(t){return"function"==typeof t?Ks(t,e):t})):t}))}var Zs,Qs=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n;try{n=zr(module,"pg").Client}catch(t){return void ci.error("Postgres Integration was unable to require `pg` package.")}pi(n.prototype,"query",(function(t){return function(n,r,i){var o,s,a=null===(s=null===(o=e().getScope())||void 0===o?void 0:o.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.text,op:"db"});return"function"==typeof i?t.call(this,n,r,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),i(t,e)})):"function"==typeof r?t.call(this,n,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),r(t,e)})):t.call(this,n,r).then((function(t){var e;return null===(e=a)||void 0===e||e.finish(),t}))}}))},t.id="Postgres",t}(),ta=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n;try{n=zr(module,"mysql/lib/Connection.js")}catch(t){return void ci.error("Mysql Integration was unable to require `mysql` package.")}pi(n.prototype,"query",(function(t){return function(n,r,i){var o,s,a=null===(s=null===(o=e().getScope())||void 0===o?void 0:o.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof i?t.call(this,n,r,(function(t,e,n){var r;null===(r=a)||void 0===r||r.finish(),i(t,e,n)})):"function"==typeof r?t.call(this,n,(function(t,e,n){var i;null===(i=a)||void 0===i||i.finish(),r(t,e,n)})):t.call(this,n,r,i)}}))},t.id="Mysql",t}(),ea=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],na={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},ra=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._operations=Array.isArray(e.operations)?e.operations:ea,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}return t.prototype.setupOnce=function(t,e){var n,r=this._useMongoose?"mongoose":"mongodb";try{n=zr(module,r).Collection}catch(t){return void ci.error("Mongo Integration was unable to require `"+r+"` package.")}this._instrumentOperations(n,this._operations,e)},t.prototype._instrumentOperations=function(t,e,n){var r=this;e.forEach((function(e){return r._patchOperation(t,e,n)}))},t.prototype._patchOperation=function(t,e,n){if(e in t.prototype){var r=this._getSpanContextFromOperationArguments.bind(this);pi(t.prototype,e,(function(t){return function(){for(var i,o,s,a,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=c[c.length-1],d=n().getScope(),p=null===(i=d)||void 0===i?void 0:i.getSpan();if("function"!=typeof u||"mapReduce"===e&&2===c.length){var h=null===(o=p)||void 0===o?void 0:o.startChild(r(this,e,c)),f=t.call.apply(t,ds([this],c));return Lr(f)?f.then((function(t){var e;return null===(e=h)||void 0===e||e.finish(),t})):(null===(s=h)||void 0===s||s.finish(),f)}var m=null===(a=p)||void 0===a?void 0:a.startChild(r(this,e,c.slice(0,-1)));return t.call.apply(t,ds([this],c.slice(0,-1),[function(t,e){var n;null===(n=m)||void 0===n||n.finish(),u(t,e)}]))}}))}},t.prototype._getSpanContextFromOperationArguments=function(t,e,n){var r={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},i={op:"db",description:e,data:r},o=na[e],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!o||!s)return i;try{if("mapReduce"===e){var a=us(n,2),c=a[0],l=a[1];r[o[0]]="string"==typeof c?c:c.name||"<anonymous>",r[o[1]]="string"==typeof l?l:l.name||"<anonymous>"}else for(var u=0;u<o.length;u++)r[o[u]]=JSON.stringify(n[u])}catch(t){}return i},t.id="Mongo",t}(),ia=ls(ls({},Object.freeze({__proto__:null,Express:Vs,Postgres:Qs,Mysql:ta,Mongo:ra})),{BrowserTracing:Js});(Zs=Zi()).__SENTRY__&&(Zs.__SENTRY__.extensions=Zs.__SENTRY__.extensions||{},Zs.__SENTRY__.extensions.startTransaction||(Zs.__SENTRY__.extensions.startTransaction=ws),Zs.__SENTRY__.extensions.traceHeaders||(Zs.__SENTRY__.extensions.traceHeaders=Es)),Ci({callback:gs,type:"error"}),Ci({callback:gs,type:"unhandledrejection"}),"localhost"!==location.hostname&&function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=os),void 0===t.release){var e=Zr();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),function(t,e){!0===e.debug&&ci.enable();var n=to(),r=new t(e);n.bindClient(r)}(is,t),t.autoSessionTracking&&function(){if(void 0===Zr().document)return void ci.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var t=to();t.startSession(),t.captureSession(),Ci({callback:function(){t.startSession(),t.captureSession()},type:"history"})}()}({dsn:"https://e7e132477a2844118b8f6d045a507e10@o318291.ingest.sentry.io/5665093",integrations:[new ia.BrowserTracing],tracesSampleRate:1}),"serviceWorker"in navigator&&(navigator.serviceWorker.register("service-worker.js").catch((t=>{console.log("ServiceWorker registration failed: ",t)})),navigator.serviceWorker.ready.then((function(){new ur({target:document.body})})))}();
//# sourceMappingURL=bundle.js.map
